(this["webpackJsonptribute-ui"]=this["webpackJsonptribute-ui"]||[]).push([[3],{10:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},100:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(237);function c(){return Object(r.useContext)(a.a)}},1022:function(e,t,n){},1023:function(e,t,n){"use strict";n.r(t),n.d(t,"getApolloClient",(function(){return Wr}));var r=n(33),a=n(104),c=n(14),s=n(43),o=n(1049),i=n(1052),u=n(1043),d=n(1051),l=n(1048),b=n(1054),j=n(66),f=n(12),O=n(25),p=n(11),h=n(117),m=n(149),x=n(495),v=n(496),N=n(6),g=n(70),E=n(190),A=["type"],w=null;function _(e,t){return Object(N.a)(Object(N.a)({},e),t)}function y(){return w}var C=n(191),k={isOpen:!1};function I(e){return Object(N.a)(Object(N.a)({},e),{},{isOpen:!1})}function S(e){return Object(N.a)(Object(N.a)({},e),{},{isOpen:!0})}var T=["type"],D={BankAdapterContract:null,BankExtensionContract:null,BankFactoryContract:null,ConfigurationContract:null,CouponOnboardingContract:null,DaoFactoryContract:null,DaoRegistryAdapterContract:null,DaoRegistryContract:null,DistributeContract:null,ERC20ExtensionContract:null,FinancingContract:null,GuildKickContract:null,KycOnboardingContract:null,ManagingContract:null,NFTExtensionContract:null,OnboardingContract:null,RagequitContract:null,TributeContract:null,TributeNFTContract:null,VotingContract:null};function R(e){return Object(N.a)(Object(N.a)({},e),D)}function P(e,t){return Object(N.a)(Object(N.a)({},e),{},{BankFactoryContract:Object(N.a)({},t)})}function L(e,t){return Object(N.a)(Object(N.a)({},e),{},{DaoFactoryContract:Object(N.a)({},t)})}function F(e,t){return Object(N.a)(Object(N.a)({},e),{},{DaoRegistryContract:Object(N.a)({},t)})}function M(e,t){return Object(N.a)(Object(N.a)({},e),{},{DaoRegistryAdapterContract:Object(N.a)({},t)})}function B(e,t){return Object(N.a)(Object(N.a)({},e),{},{BankExtensionContract:Object(N.a)({},t)})}function G(e,t){return Object(N.a)(Object(N.a)({},e),{},{ConfigurationContract:Object(N.a)({},t)})}function V(e,t){return Object(N.a)(Object(N.a)({},e),{},{DistributeContract:Object(N.a)({},t)})}function U(e,t){return Object(N.a)(Object(N.a)({},e),{},{FinancingContract:Object(N.a)({},t)})}function Y(e,t){return Object(N.a)(Object(N.a)({},e),{},{GuildKickContract:Object(N.a)({},t)})}function H(e,t){return Object(N.a)(Object(N.a)({},e),{},{OnboardingContract:Object(N.a)({},t)})}function K(e,t){return Object(N.a)(Object(N.a)({},e),{},{RagequitContract:Object(N.a)({},t)})}function W(e,t){return Object(N.a)(Object(N.a)({},e),{},{TributeContract:Object(N.a)({},t)})}function q(e,t){return Object(N.a)(Object(N.a)({},e),{},{VotingContract:Object(N.a)({},t)})}function z(e,t){return Object(N.a)(Object(N.a)({},e),{},{ManagingContract:Object(N.a)({},t)})}function J(e,t){return Object(N.a)(Object(N.a)({},e),{},{BankAdapterContract:Object(N.a)({},t)})}function Q(e,t){return Object(N.a)(Object(N.a)({},e),{},{TributeNFTContract:Object(N.a)({},t)})}function X(e,t){return Object(N.a)(Object(N.a)({},e),{},{CouponOnboardingContract:Object(N.a)({},t)})}function $(e,t){return Object(N.a)(Object(N.a)({},e),{},{KycOnboardingContract:Object(N.a)({},t)})}function Z(e,t){return Object(N.a)(Object(N.a)({},e),{},{NFTExtensionContract:Object(N.a)({},t)})}function ee(e,t){return Object(N.a)(Object(N.a)({},e),{},{ERC20ExtensionContract:Object(N.a)({},t)})}var te=n(225),ne=n(94),re=["type"],ae={status:ne.a.OK};function ce(e,t){return Object(N.a)(Object(N.a)({},e),t)}var se=Object(m.combineReducers)({connectModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case C.a:return I(e);case C.b:return S(e);default:return e}},connectedMember:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(g.a)(t,A);switch(n){case E.b:return _(e,r);case E.a:return y();default:return e}},contracts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(g.a)(t,T);switch(n){case O.a:return R(e);case O.b:return J(e,r);case O.c:return B(e,r);case O.d:return P(e,r);case O.e:return G(e,r);case O.f:return X(e,r);case O.g:return L(e,r);case O.h:return F(e,r);case O.i:return M(e,r);case O.j:return V(e,r);case O.k:return ee(e,r);case O.l:return U(e,r);case O.m:return Y(e,r);case O.n:return $(e,r);case O.o:return z(e,r);case O.p:return Z(e,r);case O.q:return H(e,r);case O.r:return K(e,r);case O.s:return W(e,r);case O.t:return Q(e,r);case O.u:case O.v:return q(e,r);default:return e}},subgraphNetworkStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(g.a)(t,re);return n===te.a?ce(e,r):e}}),oe=Object(m.createStore)(se,Object(x.composeWithDevTools)(Object(m.applyMiddleware)(v.a))),ie=n(63),ue=n(4),de=n(1),le=n.n(de),be=n(16),je=n(10),fe=n(0),Oe=Object(de.lazy)((function(){return n.e(9).then(n.bind(null,1084))}));function pe(){var e=Object(c.c)((function(e){return e.connectModal.isOpen})),t=Object(de.useState)({isOpen:e,onRequestClose:function(){j(Object(O.y)())}}),n=Object(ue.a)(t,2),r=n[0],a=n[1],s=Object(be.g)(),o=s.account,i=s.connected,u=s.initialCachedConnectorCheckStatus,d=s.web3Instance,l=Object(be.e)().isDefaultChain,b=Object(be.f)(o,null===d||void 0===d?void 0:d.currentProvider),j=Object(c.b)(),f=Object(ie.f)().pathname;return Object(de.useEffect)((function(){a((function(t){return Object(N.a)(Object(N.a)({},t),{},{isOpen:e})}))}),[e]),Object(de.useEffect)((function(){u===je.a.FULFILLED&&j(!(!i||l&&!b)?Object(O.z)():Object(O.y)())}),[i,j,u,l,b,f]),e?Object(fe.jsx)(de.Suspense,{fallback:null,children:Object(fe.jsx)(Oe,{maybeContractWallet:b,modalProps:r})}):null}var he=n(500);function me(){return Object(fe.jsxs)(he.a,{children:[Object(fe.jsx)("title",{children:"Tribute"}),Object(fe.jsx)("meta",{name:"description",content:"A modular DAO framework developed and coordinated by its members"})]})}var xe=n(5),ve=n(2),Ne=n.n(ve),ge=n(87),Ee=n(23),Ae=n(50),we=n(37),_e=n(41),ye=n(44),Ce=n(9),ke=n(35),Ie=n(27),Se=["error"];function Te(e){var t=e.error,n=Object(g.a)(e,Se);return Object(fe.jsx)(fe.Fragment,{children:t&&Object(fe.jsx)(Ie.a,{children:Object(fe.jsx)("p",Object(N.a)(Object(N.a)({},n),{},{className:"error-message ".concat(n.className||""),children:t}))})})}var De=n(53),Re=n(238);function Pe(e){var t=e.value;return t?Object(fe.jsxs)("details",{children:[Object(fe.jsx)("summary",{style:{cursor:"pointer",outline:"none"},children:Object(fe.jsx)("small",{children:"Preview Markdown"})}),Object(fe.jsx)("div",{style:{marginTop:"1em"},children:Object(fe.jsx)(Re.a,{children:t})})]}):null}var Le,Fe=["children"],Me=function(e){var t=e.children,n=Object(g.a)(e,Fe);return Object(fe.jsx)("div",Object(N.a)(Object(N.a)({style:{position:"relative"}},n),{},{children:t}))};!function(e){e.title="title",e.description="description"}(Le||(Le={}));function Be(){var e=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),t=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),n=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),r=Object(de.useState)(),a=Object(ue.a)(r,2),s=a[0],o=a[1],i=Object(be.g)(),u=i.connected,d=i.account,l=Object(ye.i)(),b=l.proposalSignAndSendStatus,j=l.signAndSendProposal,f=Object(be.e)().defaultChainError,O=Object(ge.b)({mode:"onBlur",reValidateMode:"onChange"}),h=Object(ie.e)(),m=O.errors,x=O.getValues,v=O.register,N=O.trigger,g=O.watch,E=u&&d,A=b===Ce.f.AWAITING_CONFIRM||b===Ce.f.PENDING,w=b===Ce.f.FULFILLED,_=A||w;function y(e){return C.apply(this,arguments)}function C(){return(C=Object(xe.a)(Ne.a.mark((function e(t){var n,r,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j({partialProposalData:{name:t.title,body:t.description,metadata:{type:_e.d.Governance}},type:Ee.SnapshotType.proposal});case 3:n=e.sent,r=n.uniqueId,h.push("/governance/".concat(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0,o(a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return E&&n&&!f?Object(fe.jsx)(Ge,{children:Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:Le.title,children:"Title"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Le.title),"aria-invalid":m.title?"true":"false",id:Le.title,name:Le.title,ref:v({required:we.a.REQUIRED}),type:"text",disabled:_}),Object(fe.jsx)(Te,{error:Object(p.h)(Le.title,m),id:"error-".concat(Le.title)})]})]}),Object(fe.jsxs)("div",{className:"form__textarea-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:Le.description,children:"Description"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("textarea",{"aria-describedby":"error-".concat(Le.description),"aria-invalid":m.description?"true":"false",id:Le.description,name:Le.description,placeholder:"Say something about your governance proposal...",ref:v({required:we.a.REQUIRED}),disabled:_}),Object(fe.jsx)(Te,{error:Object(p.h)(Le.description,m),id:"error-".concat(Le.description)}),Object(fe.jsx)(Pe,{value:g(Le.description)})]})]}),Object(fe.jsx)("button",{"aria-label":A?"Submitting your proposal...":"",className:"button",disabled:_,onClick:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:y(x());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:A?Object(fe.jsx)(De.a,{}):w?"Done":"Submit"}),_&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){switch(b){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:["Submitting",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.FULFILLED:return"Done!";default:return""}}()}),s&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong while submitting the proposal.",error:s})})]})}):Object(fe.jsx)(Ge,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:function(){return E?f?f.message:n||t?!n&&e&&t?(r=e,"Your member address is delegated to ".concat(Object(p.m)(r,7),". You must use that address.")):void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to submit a governance proposal.";var r}()})})})}function Ge(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Governance Proposal"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."})}),e.children]})]})})}var Ve,Ue=n(17),Ye=n(28),He=n(74),Ke=["defaultValue","max","min","name","onChange","step"];function We(e){var t=e.defaultValue,n=e.max,r=e.min,a=e.name,c=e.onChange,s=e.step,o=Object(g.a)(e,Ke),i=Object(de.useState)(),u=Object(ue.a)(i,2),d=u[0],l=u[1];return Object(fe.jsx)("input",Object(N.a)(Object(N.a)({},o),{},{"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":Number(d),max:n,min:r,name:a,onChange:function(e){l(e.target.value),c&&c(e)},step:s,type:"range",value:d||t}))}!function(e){e.ethAddress="ethAddress",e.amount="amount"}(Ve||(Ve={}));var qe="\u2014",ze=f.v!==f.n;function Je(e){var t=e.defaultChainError;return e.isConnected?t?t.message:void 0:"Connect your wallet to submit an onboarding proposal."}function Qe(e){switch(e){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:["Submitting",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.FULFILLED:return"Done!";default:return null}}function Xe(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(be.e)().defaultChainError,r=Object(be.g)(),a=r.connected,s=r.account,o=r.web3Instance,i=Object(ye.i)(),u=i.proposalData,d=i.proposalSignAndSendError,l=i.proposalSignAndSendStatus,b=i.signAndSendProposal,j=Object(ge.b)({mode:"onBlur",reValidateMode:"onChange"}),O=Object(ie.e)(),h=Object(de.useState)(),m=Object(ue.a)(h,2),x=m[0],v=m[1],N=Object(de.useState)(),g=Object(ue.a)(N,2),E=g[0],A=g[1],w=Object(de.useState)(),_=Object(ue.a)(w,2),y=_[0],C=_[1],k=Object(de.useState)(),I=Object(ue.a)(k,2),S=I[0],T=I[1],D=Object(de.useState)(),R=Object(ue.a)(D,2),P=R[0],L=R[1],F=Object(de.useState)(),M=Object(ue.a)(F,2),B=M[0],G=M[1],V=Object(de.useState)(),U=Object(ue.a)(V,2),Y=U[0],H=U[1],K=Object(de.useState)(),W=Object(ue.a)(K,2),q=W[0],z=W[1],J=j.clearErrors,Q=j.control,X=j.errors,$=j.getValues,Z=j.register,ee=j.setValue,te=j.trigger,ne=j.watch,re=ne(Ve.ethAddress),ae=ne(Ve.amount),ce=x||d,se=!(!a||!s),oe=l===Ce.f.AWAITING_CONFIRM||l===Ce.f.PENDING,le=l===Ce.f.FULFILLED,Oe=oe||le,pe=Object(ye.a)(re),he=pe.checkApplicantError,me=pe.checkApplicantInvalidMsg,ve=pe.checkApplicantStatus,Ae=pe.isApplicantValid,_e=B?Object(p.d)(B.unitsPerChunk):qe,Ie=S?Object(p.d)(S):qe,Se=B?Object(p.d)(String(Object(Ue.toBN)(B.unitsPerChunk).mul(Object(Ue.toBN)(B.maximumChunks)))):qe,Re=P?Object(p.d)(P):qe,Pe=ze?null===q||void 0===q?void 0:q.symbol:"ETH",Le=Object(de.useCallback)((function(){return et.apply(this,arguments)}),[s,t,Y,o]),Fe=Object(de.useCallback)((function(){try{if(!e||t||!B)return C(void 0),T(void 0),L(void 0),void ee(Ve.amount,qe);if(ze){if(!q)return C(void 0),T(void 0),L(void 0),void ee(Ve.amount,qe);var n=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(q.decimals)),r=Object(Ue.toBN)(B.chunkSize).div(n),a=Object(Ue.toBN)(B.chunkSize).mod(n),c=a.eq(Object(Ue.toBN)(0))?Number(String(r)):Number("".concat(String(r),".").concat(String(a)));C(c),L(c*Number(B.maximumChunks)),T(c),ee(Ve.amount,String(c))}else C(Number(Object(Ue.fromWei)(B.chunkSize,"ether"))),L(Number(Object(Ue.fromWei)(Object(Ue.toBN)(B.chunkSize).mul(Object(Ue.toBN)(B.maximumChunks)),"ether"))),T(Number(Object(Ue.fromWei)(B.chunkSize,"ether"))),ee(Ve.amount,Object(Ue.fromWei)(B.chunkSize,"ether"))}catch(s){C(void 0),T(void 0),L(void 0),ee(Ve.amount,qe),console.error(s)}}),[e,t,q,B,ee]),Me=Object(de.useCallback)((function(){return Ze.apply(this,arguments)}),[e,t]),Be=Object(de.useCallback)((function(){return Ke.apply(this,arguments)}),[t,o]),Ge=Object(de.useCallback)((function(){return Xe.apply(this,arguments)}),[t,Y]);function Ke(){return(Ke=Object(xe.a)(Ne.a.mark((function e(){var r,a,c,s;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&!t){e.next=3;break}return H(void 0),e.abrupt("return");case 3:if(e.prev=3,f.v){e.next=6;break}throw new Error("No Onboarding ERC20 address was found. Are you sure it is set?");case 6:return e.next=8,Promise.resolve().then(n.t.bind(null,505,3));case 8:r=e.sent,a=r.default,c=a,s=new o.eth.Contract(c,f.v),H(s),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0),H(void 0);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function Xe(){return(Xe=Object(xe.a)(Ne.a.mark((function e(){var n,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y&&!t){e.next=3;break}return z(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Y.methods.symbol().call();case 6:return n=e.sent,e.next=9,Y.methods.decimals().call();case 9:r=e.sent,z({symbol:n,decimals:Number(r)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),z(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Ze(){return(Ze=Object(xe.a)(Ne.a.mark((function n(){var r,a,c;return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e&&!t){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Object(Ye.g)(e.instance,Ce.b.onboardingChunkSize,f.z);case 5:return r=n.sent,n.next=8,Object(Ye.g)(e.instance,Ce.b.onboardingMaximumChunks,f.z);case 8:return a=n.sent,n.next=11,Object(Ye.g)(e.instance,Ce.b.onboardingUnitsPerChunk,f.z);case 11:c=n.sent,G({chunkSize:r,maximumChunks:a,unitsPerChunk:c}),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),console.error(n.t0),G(void 0);case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))).apply(this,arguments)}function et(){return(et=Object(xe.a)(Ne.a.mark((function e(){var n,r,a,c,i,u,d;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s&&!t){e.next=4;break}return A(void 0),e.abrupt("return");case 4:if(!ze){e.next=22;break}if(Y){e.next=8;break}return A(void 0),e.abrupt("return");case 8:return e.next=10,Y.methods.balanceOf(s).call();case 10:return n=e.sent,r=Object(Ue.toBN)(n),e.next=14,Y.methods.decimals().call();case 14:a=e.sent,c=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(a)),i=r.div(c),u=r.mod(c),d=u.eq(Object(Ue.toBN)(0))?String(i):"".concat(String(i),".").concat(String(u)),A(d),e.next=32;break;case 22:if(o){e.next=25;break}return A(void 0),e.abrupt("return");case 25:return e.t0=A,e.t1=o.utils,e.next=29,o.eth.getBalance(s);case 29:e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2,"ether"),(0,e.t0)(e.t3);case 32:e.next=38;break;case 34:e.prev=34,e.t4=e.catch(0),console.error(e.t4),A(void 0);case 38:case"end":return e.stop()}}),e,null,[[0,34]])})))).apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(xe.a)(Ne.a.mark((function e(t){var n,r,a,c,o,i,d,l,j,h,m,x,N,g,E;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,se){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(s){e.next=5;break}throw new Error("No account found.");case 5:if(he&&console.warn("Error checking if the applicant address is valid: ".concat(he.message)),ve!==je.a.FULFILLED||Ae||!me){e.next=8;break}throw new Error(me);case 8:if(n=(null===u||void 0===u?void 0:u.uniqueId)||"",r=t.ethAddress,a=t.amount,c=Object(Ue.toChecksumAddress)(r),o=Object(Ue.toChecksumAddress)(s),i="",!ze){e.next=23;break}if(q){e.next=16;break}throw new Error("No ERC20 details found.");case 16:if(Number.isInteger(Number(a))){e.next=18;break}throw new Error("The amount must be an integer for an ERC20 token.");case 18:d=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(q.decimals)),l=Object(Ue.toBN)(a).mul(d),i=String(l),e.next=25;break;case 23:j=Object(Ue.toWei)(a,"ether"),i=j;case 25:if(h={tributeAmount:Object(p.d)(a),tributeAmountUnit:Pe},m=[c,f.z,i],n){e.next=34;break}return x=Object(p.j)(r)===Object(p.j)(s)?"Onboarding ".concat(Object(p.m)(c,7),"."):"Onboarding proposal from ".concat(Object(p.m)(o,7)," for applicant ").concat(Object(p.m)(c,7),"."),e.next=31,b({partialProposalData:{name:c,body:x,metadata:{proposalAmountValues:h,submitActionArgs:m,accountAuthorizedToProcessPassedProposal:o}},adapterName:Ce.a.onboarding,type:Ee.SnapshotType.draft});case 31:N=e.sent,g=N.uniqueId,n=g;case 34:O.push("/onboarding/".concat(n)),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(0),E=e.t0,v(E);case 41:case"end":return e.stop()}}),e,null,[[0,37]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){Le()}),[Le]),Object(de.useEffect)((function(){t||ee(Ve.ethAddress,s&&Object(Ue.toChecksumAddress)(s))}),[s,t,ee]),Object(de.useEffect)((function(){Fe()}),[Fe]),Object(de.useEffect)((function(){v(void 0),J()}),[J,re]),Object(de.useEffect)((function(){Me()}),[Me]),Object(de.useEffect)((function(){ze&&Be()}),[Be]),Object(de.useEffect)((function(){ze&&Ge()}),[Ge]),!se||t?Object(fe.jsx)($e,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:Je({defaultChainError:t,isConnected:se})})})}):Object(fe.jsxs)($e,{children:[Object(fe.jsxs)("div",{className:"form__description",children:[Object(fe.jsxs)("p",{children:["Submit a proposal to join Tribute DAO. Each member can purchase"," ",_e," units for ",Ie," ",Pe," (up to"," ",Se," units for ",Re," ",Pe,"). Please put your preferred ETH address below and the amount of ",Pe," ","you'd like to contribute."]}),Object(fe.jsxs)("p",{children:["Following your submission, existing members will consider your proposal. If approved by vote, your proposal will be processed and you will finalize the transfer of your allocated ",Pe," in exchange for membership units."]})]}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:Ve.ethAddress,children:"Applicant Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Ve.ethAddress),"aria-invalid":X.ethAddress?"true":"false",id:Ve.ethAddress,name:Ve.ethAddress,ref:Z({validate:function(e){return e?!!Object(He.a)(e)||we.a.INVALID_ETHEREUM_ADDRESS:we.a.REQUIRED}}),type:"text",disabled:Oe}),Object(fe.jsx)(Te,{error:Object(p.h)(Ve.ethAddress,X),id:"error-".concat(Ve.ethAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:Ve.amount,id:"".concat(Ve.amount,"-label"),children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsx)(ge.a,{render:function(e){var t=e.onChange;return Object(fe.jsx)(We,{"data-testid":"onboarding-slider","aria-labelledby":"".concat(Ve.amount,"-label"),defaultValue:S||0,id:Ve.amount,max:P||0,min:S||0,step:y||0,onChange:t,disabled:Oe})},defaultValue:S||0,control:Q,name:Ve.amount,rules:{validate:function(e){return!(Number(e)>Number(E))||"Insufficient funds. ".concat(function(e){return e?Object(p.d)(e):"---"}(E)," ").concat(Pe," available.")}}}),Object(fe.jsx)(Te,{error:Object(p.h)(Ve.amount,X),id:"error-".concat(Ve.amount)})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:[Object(p.d)(ae)," ",Pe]})]}),Object(fe.jsx)("button",{"aria-label":oe?"Submitting your proposal.":"",className:"button",disabled:Oe,onClick:Oe?function(){}:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:tt($());case 5:case"end":return e.stop()}}),e)}))),type:"submit",children:oe?Object(fe.jsx)(De.a,{}):le?"Done":"Submit"}),Oe&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:Qe(l)}),ce&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong while submitting the proposal.",error:ce,detailsProps:{open:!0}})})]})]})}function $e(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Onboard"})}),Object(fe.jsx)("div",{className:"form-wrapper",children:e.children})]})})}var Ze,et=n(199),tt=n(48),nt=n(505),rt=n(62),at=n(73),ct=n(51);!function(e){e.type="type",e.selectedToken="selectedToken",e.memberAddress="memberAddress",e.amount="amount",e.notes="notes"}(Ze||(Ze={}));var st;function ot(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),t=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DaoRegistryContract})),n=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.BankExtensionContract})),a=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),s=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),o=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),i=Object(be.e)().defaultChainError,u=Object(be.g)(),d=u.connected,l=u.account,b=u.web3Instance,j=Object(be.c)().average,O=Object(be.a)(),h=O.txError,m=O.txEtherscanURL,x=O.txIsPromptOpen,v=O.txSend,g=O.txStatus,E=Object(ye.i)(),A=E.proposalData,w=E.proposalSignAndSendStatus,_=E.signAndSendProposal,y=Object(ge.b)({mode:"onBlur",reValidateMode:"onChange"}),C=Object(ie.e)(),k=Object(de.useState)(),I=Object(ue.a)(k,2),S=I[0],T=I[1],D=Object(de.useState)(),R=Object(ue.a)(D,2),P=R[0],L=R[1],F=Object(de.useState)(),M=Object(ue.a)(F,2),B=M[0],G=M[1],V=y.errors,U=y.getValues,Y=y.setValue,H=y.register,K=y.trigger,W=y.watch,q="all members"===W("type"),z=W("selectedToken"),J=S||h,Q=d&&l,X=nt,$=g===Ce.f.AWAITING_CONFIRM||g===Ce.f.PENDING||w===Ce.f.AWAITING_CONFIRM||w===Ce.f.PENDING,Z=g===Ce.f.FULFILLED&&w===Ce.f.FULFILLED,ee=$||Z||x,te=Object(de.useCallback)((function(){return re.apply(this,arguments)}),[n,l,X,b]),ne=Object(de.useCallback)((function(){return ae.apply(this,arguments)}),[l,z]);function re(){return(re=Object(xe.a)(Ne.a.mark((function e(){var t,a,c,s,o,i,u,d,j,O,p,h,m,x,v,g,E,A,w,_,y,C,k,I,S,T,D;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&n&&b){e.next=3;break}return L(void 0),e.abrupt("return");case 3:return e.prev=3,t=n.abi,a=n.contractAddress,c=n.instance.methods,e.next=7,c.nbTokens().call();case 7:if(s=e.sent,!(Number(s)<1)){e.next=12;break}L([]),e.next=44;break;case 12:return o=[],i=t.find((function(e){return"getToken"===e.name})),u=Object(r.a)(Array(Number(s)).keys()).map((function(e){return[a,i,[e.toString()]]})),e.next=17,Object(Ye.l)({calls:u,web3Instance:b});case 17:return d=e.sent,j=t.find((function(e){return"balanceOf"===e.name})),O=d.map((function(e){return[a,j,[f.q,e]]})),e.next=22,Object(Ye.l)({calls:O,web3Instance:b});case 22:if(p=e.sent,h=d.map((function(e,t){return{address:e,daoBalance:p[t]}})).filter((function(e){return Object(Ue.toBN)(e.daoBalance).gt(Object(Ue.toBN)(0))})),(m=h.find((function(e){return e.address===f.n})))&&o.push(Object(N.a)(Object(N.a)({},m),{},{name:"Ether",symbol:"ETH",decimals:18})),!((x=h.filter((function(e){return e.address!==f.n}))).length>0)){e.next=43;break}return v=X.find((function(e){return"name"===e.name})),g=x.map((function(e){return[e.address,v,[]]})),E=X.find((function(e){return"symbol"===e.name})),A=x.map((function(e){return[e.address,E,[]]})),w=X.find((function(e){return"decimals"===e.name})),_=x.map((function(e){return[e.address,w,[]]})),y=[].concat(Object(r.a)(g),Object(r.a)(A),Object(r.a)(_)),e.next=37,Object(Ye.l)({calls:y,web3Instance:b});case 37:for(C=e.sent,k=[];C.length;)k.push(C.splice(0,x.length));I=k[0],S=k[1],T=k[2],D=x.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{name:I[t],symbol:S[t],decimals:T[t]})})).sort((function(e,t){return e.name.localeCompare(t.name)})),o=[].concat(Object(r.a)(o),Object(r.a)(D));case 43:L(o);case 44:e.next=50;break;case 46:e.prev=46,e.t0=e.catch(3),console.error(e.t0),L(void 0);case 50:case"end":return e.stop()}}),e,null,[[3,46]])})))).apply(this,arguments)}function ae(){return(ae=Object(xe.a)(Ne.a.mark((function e(){var t,n,r,a,c,s,o,i;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&z){e.next=3;break}return G(void 0),e.abrupt("return");case 3:try{t=JSON.parse(z),n=t.daoBalance,r=Object(Ue.toBN)(n),a=t.decimals,c=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(a)),s=r.div(c),o=r.mod(c),i=o.eq(Object(Ue.toBN)(0))?s.toString():"".concat(s.toString(),".").concat(o.toString()),G(i)}catch(u){console.error(u),G(void 0)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(xe.a)(Ne.a.mark((function n(r){var a,c,s,o,i,u,d,O,h,m,x,g,E,w,y,k,I,S,D,R,P,L,F,M,B,G,V,U,Y,H,K;return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,Q){n.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(e){n.next=5;break}throw new Error("No DistributeContract found.");case 5:if(t){n.next=7;break}throw new Error("No DaoRegistryContract found.");case 7:if(l){n.next=9;break}throw new Error("No account found.");case 9:if(b){n.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(a=r.selectedToken,c=r.memberAddress,s=r.amount,o=r.notes,i=Object(Ue.toChecksumAddress)(c),u=JSON.parse(a),d=u.symbol,O=u.decimals,(h=u.address)===f.n?m=Object(Ue.toWei)(Object(p.l)(s),"ether"):(x=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(O)),g=Object(Ue.toBN)(Object(p.l)(s)).mul(x),m=g.toString()),E=(null===A||void 0===A?void 0:A.uniqueId)||"",w=null===A||void 0===A?void 0:A.data,y=(null===A||void 0===A?void 0:A.signature)||"",k=(null===A||void 0===A?void 0:A.submitter)||"",I=q?"Transfer to all members pro rata.":"Transfer to ".concat(Object(p.m)(i,7),"."),S={transferAmount:s,transferAmountUnit:d},E){n.next=37;break}return D=o?"".concat(I,"\n").concat(o):I,R=q?"All members":i,P=Math.floor(Date.now()/1e3),n.next=28,_({partialProposalData:{name:R,body:D,metadata:{proposalAmountValues:S,isTypeAllMembers:q},timestamp:P.toString()},adapterName:Ce.a.distribute,type:Ee.SnapshotType.proposal});case 28:L=n.sent,F=L.uniqueId,M=L.data,B=L.signature,G=L.submitter,E=F,w=M,y=B,k=G;case 37:return V=q?tt.a:i,U=w?Object(Ee.prepareVoteProposalData)({payload:{name:w.payload.name,body:w.payload.body,choices:w.payload.choices,snapshot:w.payload.snapshot.toString(),start:w.payload.start,end:w.payload.end},submitter:k,sig:y,space:w.space,timestamp:parseInt(w.timestamp)},b):"",Y=[t.contractAddress,E,V,h,m,U],H=Object(N.a)({from:l||""},j?{gasPrice:j}:null),n.next=43,v("submitProposal",e.instance.methods,Y,H);case 43:C.push("/transfers/".concat(E)),n.next=50;break;case 46:n.prev=46,n.t0=n.catch(0),K=n.t0,T(K);case 50:case"end":return n.stop()}}),n,null,[[0,46]])})))).apply(this,arguments)}function oe(e){return le.apply(this,arguments)}function le(){return(le=Object(xe.a)(Ne.a.mark((function e(t){var r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.error("No BankExtensionContract found."),e.abrupt("return",!1);case 3:return e.next=5,n.instance.methods.balanceOf(t,f.z).call();case 5:return r=e.sent,e.abrupt("return",Object(Ue.toBN)(r).gt(Object(Ue.toBN)(0)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(de.useEffect)((function(){te()}),[te]),Object(de.useEffect)((function(){ne()}),[ne]),Q&&!i&&o?Object(fe.jsx)(it,{children:Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Type"}),Object(fe.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(fe.jsxs)("select",{name:Ze.type,ref:H,disabled:ee,children:[Object(fe.jsx)("option",{value:"single member",children:"Single member"}),Object(fe.jsx)("option",{value:"all members",children:"All members"})]})})]}),!q&&Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Member Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Ze.memberAddress),"aria-invalid":V.memberAddress?"true":"false",name:Ze.memberAddress,ref:H({validate:function(){var e=Object(xe.a)(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}e.t0=we.a.REQUIRED,e.next=17;break;case 4:if(Object(He.a)(t)){e.next=8;break}e.t1=we.a.INVALID_ETHEREUM_ADDRESS,e.next=16;break;case 8:return e.next=10,oe(t);case 10:if(e.sent){e.next=14;break}e.t2="The address is not an active member with membership tokens.",e.next=15;break;case 14:e.t2=!0;case 15:e.t1=e.t2;case 16:e.t0=e.t1;case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),type:"text",disabled:ee}),Object(fe.jsx)(Te,{error:Object(p.h)(Ze.memberAddress,V),id:"error-".concat(Ze.memberAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Asset"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsxs)("select",{"aria-describedby":"error-".concat(Ze.selectedToken),"aria-invalid":V.selectedToken?"true":"false",name:Ze.selectedToken,ref:H({validate:function(e){return!P||P.length<1?"No tokens available for distribution.":!!e||we.a.REQUIRED}}),disabled:ee,children:[Object(fe.jsx)("option",{value:"",children:"Select from DAO assets"}),null===P||void 0===P?void 0:P.map((function(e){return Object(fe.jsx)("option",{value:JSON.stringify(e),children:"".concat(e.name," (").concat(e.symbol,")")},e.address)}))]}),Object(fe.jsx)(Te,{error:Object(p.h)(Ze.selectedToken,V),id:"error-".concat(Ze.selectedToken)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsxs)("div",{className:"input__suffix-wrap",children:[Object(fe.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Ze.amount),"aria-invalid":V.amount?"true":"false",name:Ze.amount,onChange:Object(et.debounce)((function(){return Y(Ze.amount,Object(p.d)(Object(p.l)(U().amount)))}),1e3),ref:H({validate:function(e){var t=Number(Object(p.l)(e)),n=z&&JSON.parse(z),r=(null===n||void 0===n?void 0:n.address)===f.n;return""===e?we.a.REQUIRED:isNaN(t)?we.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(B)?"Insufficient funds.":!!r||(!!Number.isInteger(t)||"The value must be an integer for an ERC20 token.")}}),type:"text",disabled:ee}),Object(fe.jsx)("div",{className:"input__suffix-item",children:z&&JSON.parse(z).symbol||"___"})]}),Object(fe.jsx)(Te,{error:Object(p.h)(Ze.amount,V),id:"error-".concat(Ze.amount)}),Object(fe.jsx)("div",{className:"form__input-description",children:q?"If the proposal passes, this total amount will be distributed pro rata to all members' internal accounts, based on the current number of membership tokens held by each member.":"If the proposal passes, this amount will be distributed to the member's internal account."})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(fe.jsx)("span",{children:B?Object(p.d)(B):"---"})]})]}),Object(fe.jsxs)("div",{className:"form__textarea-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Notes"}),Object(fe.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(fe.jsx)("textarea",{name:Ze.notes,placeholder:"Transactions purpose...",ref:H,disabled:ee})})]}),Object(fe.jsx)("button",{className:"button",disabled:ee,onClick:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,K();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:ce(U());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:$?Object(fe.jsx)(De.a,{}):Z?"Done":"Submit"}),ee&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){if(g===Ce.f.AWAITING_CONFIRM||w===Ce.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(g){case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:m,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Proposal submitted!"}),Object(fe.jsx)(ct.a,{url:m})]});default:return null}}()}),J&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong while submitting the proposal.",error:J})})]})}):Object(fe.jsx)(it,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:function(){return Q?i?i.message:o||s?!o&&a&&s?(e=a,"Your member address is delegated to ".concat(Object(p.m)(e,7),". You must use that address.")):void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to submit a transfer proposal.";var e}()})})})}function it(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Transfer Proposal"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."})}),e.children]})]})})}function ut(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(be.e)().defaultChainError,r=Object(be.g)(),a=r.connected,s=r.account,o=r.web3Instance,i=Object(ye.i)(),u=i.proposalData,d=i.proposalSignAndSendError,l=i.proposalSignAndSendStatus,b=i.signAndSendProposal,j=Object(ge.b)({mode:"onBlur",reValidateMode:"onChange"}),O=Object(ie.e)(),h=Object(de.useState)(),m=Object(ue.a)(h,2),x=m[0],v=m[1],N=Object(de.useState)(),g=Object(ue.a)(N,2),E=g[0],A=g[1],w=Object(de.useState)(),_=Object(ue.a)(w,2),y=_[0],C=_[1],k=Object(de.useState)(),I=Object(ue.a)(k,2),S=I[0],T=I[1],D=j.errors,R=j.getValues,P=j.setValue,L=j.register,F=j.trigger,M=j.watch,B=M(st.erc20Address),G=M(st.applicantAddress),V=x||d,U=a&&s,Y=l===Ce.f.AWAITING_CONFIRM||l===Ce.f.PENDING,H=l===Ce.f.FULFILLED,K=Y||H,W=Object(ye.a)(G),q=W.checkApplicantError,z=W.checkApplicantInvalidMsg,J=W.checkApplicantStatus,Q=W.isApplicantValid,X=Object(de.useCallback)((function(){return ee.apply(this,arguments)}),[B,o]),$=Object(de.useCallback)((function(){return te.apply(this,arguments)}),[s,S]),Z=Object(de.useCallback)((function(){return ne.apply(this,arguments)}),[s,S]);function ee(){return(ee=Object(xe.a)(Ne.a.mark((function e(){var t,r,a,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&B){e.next=3;break}return T(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.resolve().then(n.t.bind(null,505,3));case 6:t=e.sent,r=t.default,a=r,c=new o.eth.Contract(a,B),T(c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),T(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function te(){return(te=Object(xe.a)(Ne.a.mark((function e(){var t,n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&S){e.next=3;break}return C(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,S.methods.symbol().call();case 6:return t=e.sent,e.next=9,S.methods.decimals().call();case 9:n=e.sent,C({symbol:t,decimals:Number(n)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),C(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function ne(){return(ne=Object(xe.a)(Ne.a.mark((function e(){var t,n,r,a,c,o,i;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&S){e.next=3;break}return A(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,S.methods.balanceOf(s).call();case 6:return t=e.sent,n=Object(Ue.toBN)(t),e.next=10,S.methods.decimals().call();case 10:r=e.sent,a=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(r)),c=n.div(a),o=n.mod(a),i=o.eq(Object(Ue.toBN)(0))?c.toString():"".concat(c.toString(),".").concat(o.toString()),A(i),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0),A(void 0);case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(xe.a)(Ne.a.mark((function t(){return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.abrupt("return","UNITS");case 4:return t.prev=4,t.next=7,e.instance.methods.symbol().call();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(4),console.log(t.t0),t.abrupt("return","UNITS");case 14:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(xe.a)(Ne.a.mark((function e(t){var n,r,a,c,o,i,d,l,j,h,m,x,N,g,E,A,w,_;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,U){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(s){e.next=5;break}throw new Error("No account found.");case 5:if(S){e.next=7;break}throw new Error("No ERC20Contract found.");case 7:if(y){e.next=9;break}throw new Error("No ERC20 details found.");case 9:if(q&&console.warn("Error checking if the applicant address is valid: ".concat(q.message)),J!==je.a.FULFILLED||Q||!z){e.next=12;break}throw new Error(z);case 12:if(n=t.applicantAddress,r=t.erc20Address,a=t.tributeAmount,c=t.requestAmount,o=t.description,i=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(y.decimals)),d=Object(Ue.toBN)(Object(p.l)(a)).mul(i),l=Object(p.l)(c),j=Object(Ue.toChecksumAddress)(n),h=Object(Ue.toChecksumAddress)(s),m=(null===u||void 0===u?void 0:u.uniqueId)||""){e.next=35;break}return x=Object(p.j)(n)===Object(p.j)(s)?"Tribute from ".concat(Object(p.m)(j,7),"."):"Tribute from ".concat(Object(p.m)(h,7)," for applicant ").concat(Object(p.m)(j,7),"."),N=o?"".concat(x,"\n").concat(o):x,e.t0=c,e.next=25,re();case 25:return e.t1=e.sent,e.t2=a,e.t3=y.symbol,g={requestAmount:e.t0,requestAmountUnit:e.t1,tributeAmount:e.t2,tributeAmountUnit:e.t3},E=[j,f.z,l,Object(Ue.toChecksumAddress)(r),d.toString(),h],e.next=32,b({partialProposalData:{name:j,body:N,metadata:{proposalAmountValues:g,submitActionArgs:E,accountAuthorizedToProcessPassedProposal:h}},adapterName:Ce.a.tribute,type:Ee.SnapshotType.draft});case 32:A=e.sent,w=A.uniqueId,m=w;case 35:O.push("/tributes/".concat(m)),e.next=42;break;case 38:e.prev=38,e.t4=e.catch(0),_=e.t4,v(_);case 42:case"end":return e.stop()}}),e,null,[[0,38]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){X()}),[X]),Object(de.useEffect)((function(){$()}),[$]),Object(de.useEffect)((function(){Z()}),[Z]),Object(de.useEffect)((function(){P(st.applicantAddress,s)}),[s,P]),!U||t?Object(fe.jsx)(dt,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:U?t?t.message:void 0:"Connect your wallet to submit a tribute proposal."})})}):Object(fe.jsx)(dt,{children:Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Applicant Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(st.applicantAddress),"aria-invalid":D.applicantAddress?"true":"false",name:st.applicantAddress,ref:L({validate:function(e){return e?!!Object(He.a)(e)||we.a.INVALID_ETHEREUM_ADDRESS:we.a.REQUIRED}}),type:"text",disabled:K}),Object(fe.jsx)(Te,{error:Object(p.h)(st.applicantAddress,D),id:"error-".concat(st.applicantAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"ERC20 Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(st.erc20Address),"aria-invalid":D.erc20Address?"true":"false",name:st.erc20Address,ref:L({validate:function(e){return e?!!Object(He.a)(e)||we.a.INVALID_ETHEREUM_ADDRESS:we.a.REQUIRED}}),type:"text",disabled:K,value:"0x4DBCdF9B62e891a7cec5A2568C3F4FAF9E8Abe2b"}),Object(fe.jsx)(Te,{error:Object(p.h)(st.erc20Address,D),id:"error-".concat(st.erc20Address)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsxs)("div",{className:"input__suffix-wrap",children:[Object(fe.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(st.tributeAmount),"aria-invalid":D.tributeAmount?"true":"false",name:st.tributeAmount,onChange:Object(et.debounce)((function(){return P(st.tributeAmount,Object(p.d)(Object(p.l)(R().tributeAmount)))}),1e3),ref:L({validate:function(e){var t=Number(Object(p.l)(e));return""===e?we.a.REQUIRED:isNaN(t)?we.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(E)?"Insufficient funds.":!!Number.isInteger(t)||"The value must be an integer for an ERC20 token."}}),type:"text",disabled:K}),Object(fe.jsx)("div",{className:"input__suffix-item",children:(null===y||void 0===y?void 0:y.symbol)||"___"})]}),Object(fe.jsx)(Te,{error:Object(p.h)(st.tributeAmount,D),id:"error-".concat(st.tributeAmount)}),Object(fe.jsx)("div",{className:"form__input-description",children:"This amount will be held in escrow pending a member vote. If the proposal passes, the funds will automatically be sent to the DAO. If the proposal fails, the funds will be refunded to you."})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(fe.jsx)("span",{children:E?Object(p.d)(E):"---"})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Request Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(st.requestAmount),"aria-invalid":D.requestAmount?"true":"false",name:st.requestAmount,onChange:Object(et.debounce)((function(){return P(st.requestAmount,Object(p.d)(Object(p.l)(R().requestAmount)))}),1e3),ref:L({validate:function(e){var t=Number(Object(p.l)(e));return""===e?we.a.REQUIRED:isNaN(t)?we.a.INVALID_NUMBER:t<0?"The value must be at least 0.":!!Number.isInteger(t)||"The value must be an integer."}}),type:"text",disabled:K}),Object(fe.jsx)(Te,{error:Object(p.h)(st.requestAmount,D),id:"error-".concat(st.requestAmount)}),Object(fe.jsx)("div",{className:"form__input-description",children:"This is the amount of DAO membership tokens you are requesting be sent to the Applicant Address in exchange for your tribute."})]})]}),Object(fe.jsxs)("div",{className:"form__textarea-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Description"}),Object(fe.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(fe.jsx)("textarea",{name:st.description,placeholder:"Say something about your tribute...",ref:L,disabled:K})})]}),Object(fe.jsx)("button",{className:"button",disabled:K,onClick:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,F();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:ce(R());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:Y?Object(fe.jsx)(De.a,{}):H?"Done":"Submit"}),K&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){switch(l){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:["Submitting",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.FULFILLED:return"Done!";default:return""}}()}),V&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong while submitting the proposal.",error:V})})]})})}function dt(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Become a Member"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsxs)("div",{className:"form__description",children:[Object(fe.jsx)("p",{children:"For U.S. accredited investors"}),Object(fe.jsxs)("p",{children:["Salon is a for-profit member-managed limited liability company organized in Delaware."," "]}),Object(fe.jsx)("p",{children:"Salon will have up to 100 initial members who will pool their capital to build a world class collection of contemporary art. Each member can purchase 1% blocks of Salon units for $30,000 (up to 10% for $300,000)."}),Object(fe.jsx)("p",{children:"Interested? Get accredited below."})]}),Object(fe.jsxs)("form",{style:{width:"100%"},action:"https://getform.io/f/9ddb7b44-927e-475f-bf03-6e92cd6c71a8",method:"POST",children:[Object(fe.jsxs)("div",{className:"rendered-form",children:[Object(fe.jsxs)("div",{className:"form__input-row formbuilder-radio-group form-group form__input-row field-type_of_entity",children:[Object(fe.jsxs)("label",{htmlFor:"type_of_entity",className:"formbuilder-radio-group-label form__input-row-label",children:["Type of Entity",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsxs)("div",{className:"radio-group",children:[Object(fe.jsxs)("div",{className:"formbuilder-radio",children:[Object(fe.jsx)("input",{name:"type_of_entity",id:"type_of_entity-0",required:!0,"aria-required":"true",value:"person",type:"radio"}),Object(fe.jsx)("label",{htmlFor:"type_of_entity-0",children:"Person"})]}),Object(fe.jsxs)("div",{className:"formbuilder-radio",children:[Object(fe.jsx)("input",{name:"type_of_entity",id:"type_of_entity-1",required:!0,"aria-required":"true",value:"company",type:"radio"}),Object(fe.jsx)("label",{htmlFor:"type_of_entity-1",children:"Company"})]}),Object(fe.jsxs)("div",{className:"formbuilder-radio",children:[Object(fe.jsx)("input",{name:"type_of_entity",id:"type_of_entity-2",required:!0,"aria-required":"true",value:"trust",type:"radio"}),Object(fe.jsx)("label",{htmlFor:"type_of_entity-2",children:"Trust"})]})]})]}),Object(fe.jsxs)("div",{className:"form__input-row formbuilder-text form-group form__input-row field-legal_name_of_person",children:[Object(fe.jsxs)("label",{htmlFor:"legal_name_of_person",className:"formbuilder-text-label form__input-row-label",children:["Legal Name of Person",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",name:"legal_name_of_person",id:"legal_name_of_person",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-email_address",children:[Object(fe.jsxs)("label",{htmlFor:"email_address",className:"formbuilder-text-label form__input-row-label",children:["Email Address",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",name:"email_address",id:"email_address",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-text-1650421756581",children:[Object(fe.jsxs)("label",{htmlFor:"text-1650421756581",className:"formbuilder-text-label form__input-row-label",children:["Home Address",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",className:"form-control",name:"text-1650421756581",id:"text-1650421756581",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-select form-group form__input-row field-select-1650421785515",children:[Object(fe.jsxs)("label",{htmlFor:"select-1650421785515",className:"formbuilder-select-label form__input-row-label",children:["Month",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsxs)("select",{className:"form-control",name:"select-1650421785515",id:"select-1650421785515",required:!0,"aria-required":"true",children:[Object(fe.jsx)("option",{value:"01",selected:!0,id:"select-1650421785515-0",children:"01"}),Object(fe.jsx)("option",{value:"02",id:"select-1650421785515-1",children:"02"}),Object(fe.jsx)("option",{value:"03",id:"select-1650421785515-2",children:"03"})]})]}),Object(fe.jsxs)("div",{className:"formbuilder-select form-group form__input-row field-day",children:[Object(fe.jsxs)("label",{htmlFor:"day",className:"formbuilder-select-label form__input-row-label",children:["Day",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsxs)("select",{name:"day",id:"day",required:!0,"aria-required":"true",children:[Object(fe.jsx)("option",{value:"01",selected:!0,id:"day-0",children:"01"}),Object(fe.jsx)("option",{value:"02",id:"day-1",children:"02"}),Object(fe.jsx)("option",{value:"03",id:"day-2",children:"03"})]})]}),Object(fe.jsxs)("div",{className:"formbuilder-select form-group form__input-row field-year",children:[Object(fe.jsxs)("label",{htmlFor:"year",className:"formbuilder-select-label form__input-row-label",children:["Year",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsxs)("select",{name:"year",id:"year",required:!0,"aria-required":"true",children:[Object(fe.jsx)("option",{value:"2000",selected:!0,id:"year-0",children:"2000"}),Object(fe.jsx)("option",{value:"2001",id:"year-1",children:"2001"}),Object(fe.jsx)("option",{value:"2003",id:"year-2",children:"2003"})]})]}),Object(fe.jsxs)("div",{className:"formbuilder-file form-group form__input-row field-id_scan",children:[Object(fe.jsxs)("label",{htmlFor:"id_scan",className:"formbuilder-file-label form__input-row-label",children:["ID Scan",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"file",name:"id_scan",id:"id_scan",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-file form-group form__input-row field-back_of_id_scan",children:[Object(fe.jsx)("label",{htmlFor:"back_of_id_scan",className:"formbuilder-file-label form__input-row-label",children:"Back of ID Scan (Optional)"}),Object(fe.jsx)("input",{type:"file",name:"back_of_id_scan",id:"back_of_id_scan"})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-passport_or_id_number",children:[Object(fe.jsxs)("label",{htmlFor:"passport_or_id_number",className:"formbuilder-text-label form__input-row-label",children:["Passport or ID Number",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",name:"passport_or_id_number",id:"passport_or_id_number",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-Phone-Number",children:[Object(fe.jsxs)("label",{htmlFor:"Phone-Number",className:"formbuilder-text-label form__input-row-label",children:["Phone Number",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",name:"Phone-Number",id:"Phone-Number",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-occupation",children:[Object(fe.jsxs)("label",{htmlFor:"occupation",className:"formbuilder-text-label form__input-row-label",children:["Occupation",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",className:"form-control",name:"occupation",id:"occupation",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-radio-group form-group form__input-row field-basis_of_accreditation",children:[Object(fe.jsxs)("label",{htmlFor:"basis_of_accreditation",className:"formbuilder-radio-group-label form__input-row-label",children:["Basis of Accreditation",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsxs)("div",{className:"radio-group",children:[Object(fe.jsxs)("div",{className:"formbuilder-radio",children:[Object(fe.jsx)("input",{name:"basis_of_accreditation",id:"basis_of_accreditation-0",required:!0,"aria-required":"true",value:"income",type:"radio"}),Object(fe.jsx)("label",{htmlFor:"basis_of_accreditation-0",children:"Income of $200k ($300K with spouse) in each of the last 2 years"})]}),Object(fe.jsxs)("div",{className:"formbuilder-radio",children:[Object(fe.jsx)("input",{name:"basis_of_accreditation",id:"basis_of_accreditation-1",required:!0,"aria-required":"true",value:"net-worth",type:"radio"}),Object(fe.jsx)("label",{htmlFor:"basis_of_accreditation-1",children:"Net worth over $1M"})]})]})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-income_recent",children:[Object(fe.jsxs)("label",{htmlFor:"income_recent",className:"formbuilder-text-label form__input-row-label",children:["Income",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",name:"income_recent",id:"income_recent",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-file form-group form__input-row field-income_recent_documentation",children:[Object(fe.jsxs)("label",{htmlFor:"income_recent_documentation",className:"formbuilder-file-label form__input-row-label",children:["Documentation",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"file",name:"income_recent_documentation",id:"income_recent_documentation",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-text form-group form__input-row field-income_last",children:[Object(fe.jsxs)("label",{htmlFor:"income_last",className:"formbuilder-text-label form__input-row-label",children:["Income",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"text",name:"income_last",id:"income_last",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-file form-group form__input-row field-income_last_documentation",children:[Object(fe.jsxs)("label",{htmlFor:"income_last_documentation",className:"formbuilder-file-label form__input-row-label",children:["Documenation",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("input",{type:"file",name:"income_last_documentation",id:"income_last_documentation",required:!0,"aria-required":"true"})]}),Object(fe.jsxs)("div",{className:"formbuilder-checkbox-group form-group form__input-row field-current_year_income",children:[Object(fe.jsxs)("label",{htmlFor:"current_year_income",className:"formbuilder-checkbox-group-label form__input-row-label",children:["Current Year Income",Object(fe.jsx)("span",{className:"formbuilder-required",children:"*"})]}),Object(fe.jsx)("div",{className:"checkbox-group",children:Object(fe.jsxs)("div",{className:"formbuilder-checkbox",children:[Object(fe.jsx)("input",{name:"current_year_income[]",id:"current_year_income-0","aria-required":"true",value:"true",type:"checkbox",checked:!0}),Object(fe.jsxs)("label",{htmlFor:"current_year_income-0",children:["I expect to earn an income of at least $200k ($300k with spouse) again this year."," "]})]})})]})]}),Object(fe.jsx)("input",{type:"hidden",name:"_captcha",value:"false"}),Object(fe.jsx)("button",{type:"submit",children:"Send"})]}),e.children]})]})})}!function(e){e.applicantAddress="applicantAddress",e.erc20Address="erc20Address",e.tributeAmount="tributeAmount",e.requestAmount="requestAmount",e.description="description"}(st||(st={}));var lt=n(506),bt=n.n(lt);n(1020);function jt(e){return Object(fe.jsx)("div",{className:"logo ".concat(e.size?"logo--".concat(e.size):""),children:"Salon"})}function ft(){return Object(fe.jsx)("div",{className:"logo-container logo-container--center",children:Object(fe.jsx)(jt,{size:"small"})})}function Ot(){return Object(fe.jsx)("div",{className:"logo-container logo-container--header",children:Object(fe.jsx)(jt,{size:"medium"})})}function pt(){return Object(fe.jsx)("div",{className:"logo-container logo-container--center",children:Object(fe.jsx)(jt,{size:"large"})})}var ht=n(1030),mt=n(507),xt=n(165),vt=n.n(xt);function Nt(){return Object(fe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"bars","data-prefix":"fal",viewBox:"0 0 448 512",children:Object(fe.jsx)("path",{fill:"currentColor",d:"M442 114H6a6 6 0 01-6-6V84a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6z"})})}var gt=n(163),Et=n(148),At=n(480);function wt(e){var t=e.customWalletText,n=e.showWalletETHBadge,r=void 0===n||n,a=Object(be.g)(),s=a.account,o=a.accountENS,i=a.connected,u=a.web3Modal,d=Object(be.e)().isDefaultChain,l=Object(c.b)(),b=!1===d;return Object(fe.jsxs)("button",{className:"walletconnect__connect-button \n        ".concat(b&&i?"walletconnect__connect-button--error":""),onClick:function(){l(Object(O.z)())},children:[Object(fe.jsx)("span",{className:"connect-button-text ".concat(i?"connect-button-text--ethAddress":""),children:t?"function"===typeof t?t({account:s,connected:i,isMobile:Object(Et.isMobile)()}):t:s?o||Object(p.m)(Object(Ue.toChecksumAddress)(s)):"Connect"}),b&&i&&Object(fe.jsx)("span",{children:"Wrong Network"}),r&&Object(fe.jsx)(At.a,{providerName:null===u||void 0===u?void 0:u.cachedProvider})]})}var _t={transition:"0.1s"},yt={entering:{right:"-300px"},entered:{right:0},exiting:{right:0,opacity:0},exited:{right:"-300px",opacity:0}},Ct={entering:{right:0,opacity:1},entered:{right:"-300px",opacity:1},exiting:{right:"-300px",opacity:1},exited:{right:0,opacity:1}};function kt(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(de.useState)(!1),n=Object(ue.a)(t,2),r=n[0],a=n[1],o=Object(de.useState)(yt),i=Object(ue.a)(o,2),u=i[0],d=i[1],l=Object(be.g)().account,b=Object(de.useRef)();Object(de.useEffect)((function(){return function(){b.current&&clearTimeout(b.current)}}),[]);var j=!(!l||!e||!e.isActiveMember&&!e.isAddressDelegated||Object(p.j)(l)!==Object(p.j)(e.memberAddress)&&Object(p.j)(l)!==Object(p.j)(e.delegateKey));function f(e){if(!e)return d(Ct),b.current=setTimeout((function(){return a(e)}),500),function(){return b.current&&clearTimeout(b.current)};a(e),d(yt)}return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{tabIndex:0,className:"nav__hamburger-wrapper",children:Object(fe.jsx)("div",{className:"nav__hamburger","aria-label":"Menu","aria-controls":"navigation",onClick:function(e){e.preventDefault(),f(!0)},children:Object(fe.jsx)(Nt,{})})}),Object(fe.jsx)(vt.a,{ariaHideApp:!1,className:"nav-modal-container",isOpen:r,onRequestClose:function(){f(!1)},overlayClassName:"nav-modal-overlay",role:"dialog",style:{overlay:{zIndex:"99"}},children:Object(fe.jsx)(ht.a,{appear:!0,in:r,timeout:200,children:function(t){return Object(fe.jsx)("nav",{role:"navigation",id:"navigation",children:Object(fe.jsxs)("div",{style:Object(N.a)(Object(N.a)({},_t),u[t]),className:"nav-modal",children:[Object(fe.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(e){e.preventDefault(),f(!1)},children:Object(fe.jsx)(gt.a,{})}),Object(fe.jsx)(ft,{}),Object(fe.jsx)("div",{className:"nav-modal__walletconnect-button-container",children:Object(fe.jsx)(wt,{})}),Object(fe.jsxs)("ul",{className:"nav__list",children:[!j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.d,{to:"/tribute",children:Object(fe.jsx)("span",{children:"Join"})})}),Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.d,{to:"/tributes",children:Object(fe.jsx)("span",{children:"Applications"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.d,{to:"/transfers",children:Object(fe.jsx)("span",{children:"Transfer"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.d,{to:"/governance",children:Object(fe.jsx)("span",{children:"Governance"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.d,{to:"/members",children:Object(fe.jsx)("span",{children:"Members"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.d,{to:"/members/".concat(null===e||void 0===e?void 0:e.memberAddress),children:Object(fe.jsx)("span",{children:"Profile"})})})]})]})})}})})]})}function It(){return Object(fe.jsx)(mt.a,{query:"(max-width: 62em)",children:function(e){return Object(fe.jsx)("div",{className:"nav-header",children:Object(fe.jsxs)("div",{className:"nav-header__menu-container",children:[Object(fe.jsx)(kt,{}),Object(fe.jsx)("div",{className:"nav-header__walletconnect-button-container",children:Object(fe.jsx)(wt,{})})]})})}})}function St(e){return Object(fe.jsx)("svg",Object(N.a)(Object(N.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 14"},e),{},{children:Object(fe.jsx)("g",{fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:Object(fe.jsx)("g",{transform:"translate(-737 -124)",children:Object(fe.jsx)("g",{transform:"translate(596 124)",children:Object(fe.jsx)("path",{fill:"currentColor",d:"M151.166.8h-8.679c-.733 0-1.344.611-1.344 1.345v8.8c0 .734.611 1.345 1.344 1.345h7.395l-.366-1.223.855.795.795.733 1.405 1.223V2.145c-.06-.734-.61-1.345-1.405-1.345zm-2.506 8.495s-.244-.306-.428-.55c.49-.122.917-.367 1.161-.795a2.065 2.065 0 01-.733.367c-.306.122-.611.245-.917.306a4.039 4.039 0 01-1.71 0 6.007 6.007 0 01-.979-.306 1.83 1.83 0 01-.489-.244s-.06 0-.06-.061c-.123-.062-.184-.123-.184-.123.305.367.672.673 1.161.795-.183.244-.428.55-.428.55a2.579 2.579 0 01-2.017-.978c0-1.344.367-2.628.917-3.79.55-.427 1.161-.671 1.834-.671l.06.06c-.61.184-1.222.429-1.71.856l.366-.183c.49-.183.978-.367 1.467-.428h.122a4.947 4.947 0 011.345 0c.672.061 1.344.306 1.955.611a5.299 5.299 0 00-1.65-.855l.061-.122c.673.06 1.284.244 1.834.672.611 1.161.917 2.506.917 3.789-.367.733-1.1 1.1-1.895 1.1zm-2.995-3.056c-.427-.06-.733.245-.794.673-.061.427.244.733.672.794.428.061.734-.244.795-.672v-.061c0-.367-.306-.734-.673-.734zm2.384 0c-.428-.06-.733.245-.795.673-.06.427.245.733.673.794.427.061.733-.244.794-.672v-.061c0-.367-.305-.734-.672-.734z"})})})})}))}var Tt,Dt=n(20),Rt=n(21),Pt=n(31),Lt=n(32),Ft=function(e){Object(Pt.a)(n,e);var t=Object(Lt.a)(n);function n(){return Object(Dt.a)(this,n),t.apply(this,arguments)}return Object(Rt.a)(n,[{key:"render",value:function(){return Object(fe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"github","data-prefix":"fab",viewBox:"0 0 496 512",children:Object(fe.jsx)("path",{fill:"currentColor",d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})}}]),n}(le.a.Component),Mt=Ft;function Bt(){return Object(fe.jsxs)("div",{className:"socialmedia",children:[Object(fe.jsx)("a",{href:Tt.DISCORD,target:"_blank",rel:"noopener noreferrer",children:Object(fe.jsx)(St,{})}),Object(fe.jsx)("a",{href:Tt.GITHUB,target:"_blank",rel:"noopener noreferrer",children:Object(fe.jsx)(Mt,{})})]})}!function(e){e.DISCORD="https://discord.gg/tEfP68xnTd",e.GITHUB="https://github.com/search?q=org%3Aopenlawteam+tribute-ui+OR+tribute-contracts+OR+tribute-subgraph+in%3Aname&type=repositories"}(Tt||(Tt={}));var Gt=Object(de.memo)((function(){return Object(fe.jsxs)("div",{className:"cube","data-testid":"cube","data-aos":"fade-up","data-aos-delay":"150",children:[Object(fe.jsx)("div",{className:"cube__segment--top"}),Object(fe.jsx)("div",{className:"cube__segment--left"}),Object(fe.jsx)("div",{className:"cube__segment--right"})]})}));function Vt(){return Object(fe.jsxs)("div",{"data-testid":"get-started-header",className:"landing__header",children:[Object(fe.jsx)(Bt,{}),Object(fe.jsx)(kt,{})]})}function Ut(){var e=Object(ie.e)();return Object(de.useEffect)((function(){bt.a.init({duration:800,offset:40,delay:120,mirror:!1,once:!0})}),[]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Vt,{}),Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)(pt,{}),Object(fe.jsxs)("div",{className:"landing",children:[Object(fe.jsxs)("div",{className:"landing__subtitle",children:["The art world's DAO.",Object(fe.jsx)("br",{}),"Collecting contemporary art together."]}),Object(fe.jsx)("div",{className:"landing__img",children:Object(fe.jsx)(Gt,{})}),Object(fe.jsx)("div",{className:"landing__button",children:Object(fe.jsx)("button",{className:"button",onClick:function(){e.push(f.i?"/join":"/tribute")},children:"Join"})})]})]})})]})}var Yt=n(150);function Ht(e){var t,n=e.proposal,r=n.snapshotProposal,a=1e3*Number((null===r||void 0===r?void 0:r.msg.payload.start)||0),c=1e3*Number((null===r||void 0===r?void 0:r.msg.payload.end)||0),s=Object(de.useState)({hasVotingStarted:!1,hasVotingEnded:!1,votingStartEndInitReady:!1}),o=Object(ue.a)(s,2),i=o[0],u=o[1],d=Object(ye.c)(r).offchainVotingResults,l=Object(de.useCallback)((function(e){u(e)}),[]),b=null===(t=d[0])||void 0===t?void 0:t[1],j=i.hasVotingEnded,f=i.hasVotingStarted,O=i.votingStartEndInitReady;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Yt.c,{countdownVotingEndMs:c,countdownVotingStartMs:a,onVotingPeriodChange:l,votingResult:b}),O&&f&&!j&&Object(fe.jsx)(Yt.b,{proposal:n})]})}var Kt=n(82);function Wt(){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsx)(Ie.a,{children:Object(fe.jsx)("div",{style:{textAlign:"center",fontSize:"5rem"},children:Object(fe.jsxs)("h3",{children:["4",Object(fe.jsx)("span",{className:"pulse",role:"img","aria-label":"404, not found",style:{display:"inline-block"},children:"\ud83d\ude35"}),"4"]})})})})}function qt(e){var t=e.proposal,n=e.renderAmountBadge,r=e.renderActions,a=t.getCommonSnapshotProposalData();return a?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"proposaldetails__header",children:"Proposal Details"}),Object(fe.jsxs)("div",{className:"proposaldetails",children:[Object(fe.jsxs)("div",{className:"proposaldetails__content",children:[Object(fe.jsx)("h3",{children:Object(p.m)(a.msg.payload.name||"",7)}),Object(fe.jsx)(Re.a,{children:a.msg.payload.body})]}),Object(fe.jsxs)("div",{className:"proposaldetails__status",children:[n&&n(),r()]})]})]}):null}function zt(){var e=Object(ie.g)().proposalId,t=Object(ye.d)(e,Ee.SnapshotType.proposal),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(be.e)().defaultChainError,o=r||s;return c===je.a.PENDING&&!o?Object(fe.jsx)(Jt,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})})}):a?Object(fe.jsx)(Jt,{children:Object(fe.jsx)(Wt,{})}):o?Object(fe.jsx)(Jt,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong while getting the proposal."})})}):n?Object(fe.jsx)(Jt,{children:Object(fe.jsx)(qt,{proposal:n,renderActions:function(){return Object(fe.jsx)(Ht,{proposal:n})}})}):Object(fe.jsx)(fe.Fragment,{})}function Jt(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance")},children:"View all"})]}),e.children]})})}var Qt=n(36);var Xt=n(509),$t=n(510),Zt="View Proposal",en=n.n($t)()()(Xt.a);function tn(e){var t=e.buttonText,n=void 0===t?Zt:t,r=e.proposalOnClickId,a=e.linkPath,c=e.onClick,o=e.name,i=e.renderStatus,u=Object(ie.e)().location,d="/"===u.pathname?"":u.pathname,l="function"===typeof a?a(r):a||"".concat(d,"/").concat(r);return Object(fe.jsx)(s.c,{className:"proposalcard__link",to:l,onClick:function(){null===c||void 0===c||c(r)},children:Object(fe.jsxs)("div",{className:"proposalcard",children:[Object(fe.jsx)("h3",{className:"proposalcard__title",children:function(e){return Object(He.a)(e)?Object(p.m)(e,7):Object(fe.jsx)(en,{text:e,maxLine:1,ellipsis:"...",trimRight:!0,basedOn:"letters"})}(o)}),i&&i(),Object(fe.jsx)("button",{className:"proposalcard__button",children:n||Zt})]})})}function nn(e){var t=e.actionId,n=void 0===t?tt.a:t,r=e.onProposalClick,a=void 0===r?function(){}:r,c=e.proposalLinkPath,s=e.renderProposalCard,o=Object(de.useState)([]),i=Object(ue.a)(o,2),u=i[0],d=i[1],l=Object(de.useState)({failedProposals:[],passedProposals:[],votingProposals:[]}),b=Object(ue.a)(l,2),O=b[0],h=b[1],m=function(e){var t=e.actionId,n=void 0===t?tt.a:t,r=Object(de.useState)([]),a=Object(ue.a)(r,2),c=a[0],s=a[1],o=Object(de.useState)(),i=Object(ue.a)(o,2),u=i[0],d=i[1],l=Object(de.useState)(je.a.STANDBY),b=Object(ue.a)(l,2),O=b[0],p=b[1],h=Object(Qt.e)().isMountedRef,m=Object(j.useQuery)(["snapshotProposalEntries",n],Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{enabled:!!n}),x=m.data,v=m.error,g=Object(de.useCallback)((function(){return w.apply(this,arguments)}),[h,x,v]);function E(e){return A.apply(this,arguments)}function A(){return A=Object(xe.a)(Ne.a.mark((function e(t){var n,r,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(f.w,"/api/").concat(f.x),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return a=e.sent,e.abrupt("return",Object.entries(a).map((function(e){var t=Object(ue.a)(e,2),n=t[0],r=t[1];return{daoProposal:void 0,snapshotDraft:void 0,snapshotProposal:Object(N.a)(Object(N.a)({},r),{},{idInSnapshot:n,idInDAO:""}),getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){},snapshotType:Ee.SnapshotType.proposal}})));case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),A.apply(this,arguments)}function w(){return(w=Object(xe.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(je.a.PENDING),!v){e.next=4;break}throw v;case 4:if(!x){e.next=9;break}if(h.current){e.next=7;break}return e.abrupt("return");case 7:p(je.a.FULFILLED),s(x);case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),h.current){e.next=15;break}return e.abrupt("return");case 15:t=e.t0,p(je.a.REJECTED),s([]),d(t);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){g()}),[g]),{governanceProposals:c,governanceProposalsError:u,governanceProposalsStatus:O}}({actionId:n}),x=m.governanceProposals,v=m.governanceProposalsError,g=m.governanceProposalsStatus,E=Object(ye.c)(u),A=E.offchainVotingResults,w=E.offchainVotingResultsError,_=E.offchainVotingResultsStatus,y=Object(be.e)().defaultChainError,C=O.failedProposals,k=O.passedProposals,I=O.votingProposals,S=g===je.a.STANDBY||g===je.a.PENDING||_===je.a.STANDBY&&u.length>0||_===je.a.PENDING,T=v||w||y;function D(e){return e.map((function(e){var t,n=e.snapshotProposal,r=null===n||void 0===n?void 0:n.idInSnapshot,o=(null===n||void 0===n?void 0:n.msg.payload.name)||"",i=1e3*Number((null===n||void 0===n?void 0:n.msg.payload.start)||0),u=1e3*Number((null===n||void 0===n?void 0:n.msg.payload.end)||0);if(!r)return null;var d=null===(t=A.find((function(e){var t=Object(ue.a)(e,2),n=t[0];t[1];return Object(p.j)(n)===Object(p.j)(r)})))||void 0===t?void 0:t[1];return s?Object(fe.jsx)(de.Fragment,{children:s({proposalData:e,votingResult:d})},r):Object(fe.jsx)(tn,{name:o,linkPath:c,onClick:a,proposalOnClickId:r,renderStatus:function(){return Object(fe.jsx)(Yt.c,{votingResult:d,countdownVotingEndMs:u,countdownVotingStartMs:i})}},r)}))}return Object(de.useEffect)((function(){d(x.map((function(e){return e.snapshotProposal})))}),[x]),Object(de.useEffect)((function(){if(g===je.a.FULFILLED){var e={failedProposals:[],passedProposals:[],votingProposals:[]};x.forEach((function(t){var n,r;if(((null===(n=t.snapshotProposal)||void 0===n?void 0:n.msg.payload.end)||0)<Math.ceil(Date.now()/1e3)){var a=null===(r=A.find((function(e){var n,r=Object(ue.a)(e,2),a=r[0];r[1];return Object(p.j)(a)===Object(p.j)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInSnapshot)||"")})))||void 0===r?void 0:r[1],c=!!a&&a.Yes.units>a.No.units;c?e.passedProposals.push(t):c||e.failedProposals.push(t)}else e.votingProposals.push(t)})),h((function(t){return Object(N.a)(Object(N.a)({},t),e)}))}}),[x,g,A]),S&&!T?Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})}):x.length||Object.values(O).flatMap((function(e){return e})).length||g!==je.a.FULFILLED?T?Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:T,renderText:"Something went wrong while getting the proposals."})}):Object(fe.jsxs)("div",{className:"grid--fluid grid-container",children:[I.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.VOTING}),Object(fe.jsx)("div",{className:"grid__cards",children:D(I)})]}),k.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.PASSED}),Object(fe.jsx)("div",{className:"grid__cards",children:D(k)})]}),C.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.FAILED}),Object(fe.jsx)("div",{className:"grid__cards",children:D(C)})]})]}):Object(fe.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function rn(){return Object(fe.jsx)(an,{children:Object(fe.jsx)(nn,{actionId:tt.a,proposalLinkPath:function(e){return"/governance/".concat(e)}})})}function an(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance-proposal")},children:"New Proposal"})]}),e.children]})})}var cn={joinIsWhitelisted:!0};function sn(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(de.useState)(),n=Object(ue.a)(t,2),r=n[0],a=n[1],s=Object(de.useState)(je.a.STANDBY),o=Object(ue.a)(s,2),i=o[0],u=o[1],d=Object(de.useState)(),l=Object(ue.a)(d,2),b=l[0],j=l[1],f=Object(de.useCallback)((function(){return O.apply(this,arguments)}),[e]);function O(){return(O=Object(xe.a)(Ne.a.mark((function t(){var n,r,c;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,u(je.a.PENDING),t.next=6,e.instance.methods.symbol().call();case 6:return n=t.sent,t.next=9,e.instance.methods.decimals().call();case 9:r=t.sent,a({address:e.contractAddress,symbol:n,decimals:Number(r),image:"".concat(window.location.origin,"/favicon.ico")}),u(je.a.FULFILLED),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(2),c=t.t0,console.log(c),a(void 0),j(c),u(je.a.REJECTED);case 21:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){f()}),[f]),{daoTokenDetails:r,daoTokenDetailsError:b,daoTokenDetailsStatus:i}}var on=n(1055);je.a.FULFILLED,je.a.PENDING,je.a.REJECTED,je.a.STANDBY,Object(Ue.sha3)("ConfigurationUpdated(bytes32,uint256)"),Object(Ue.sha3)(Ce.b.kycOnboardingChunkSize),Object(Ue.sha3)(Ce.b.kycOnboardingMaximumChunks);var un,dn=Object(fe.jsxs)(fe.Fragment,{children:["Checking your KYC status",Object(fe.jsx)(Ae.a,{})]}),ln=Object(fe.jsxs)(fe.Fragment,{children:["Redirecting you to our KYC form",Object(fe.jsx)(Ae.a,{})]}),bn=Object(fe.jsx)(fe.Fragment,{children:"The applicant address has been KYC verified, but has not been authorized to join yet."}),jn=Object(fe.jsxs)(fe.Fragment,{children:["KYC verification for the applicant address is pending and must be completed first.",Object(fe.jsx)("br",{}),"Please try again later."]});function fn(e){return function(){var t=Object(xe.a)(Ne.a.mark((function t(n){var r,a=arguments;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:2e3,t.next=3,new Promise((function(e){return setTimeout(e,r)}));case 3:e(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}!function(e){e.ethAddress="ethAddress",e.amount="amount"}(un||(un={}));var On="\u2014",pn=f.v!==f.n;function hn(e){var t=e.defaultChainError;return e.isConnected?t?t.message:void 0:"Connect your wallet to get started."}function mn(e){var t=e.txEtherscanURL,n=e.txStatus,r=e.txEtherscanURLTokenApprove,a=e.txStatusTokenApprove;if(a===Ce.f.AWAITING_CONFIRM)return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer your tokens",Object(fe.jsx)(Ae.a,{intervalMs:500})]});if(a===Ce.f.PENDING)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:["Approving your tokens for transfer",Object(fe.jsx)(Ae.a,{intervalMs:500})]}),Object(fe.jsx)(ct.a,{url:r,isPending:!0})]});switch(n){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:t,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Onboarding done!"}),Object(fe.jsx)(ct.a,{url:t})]});default:return null}}function xn(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){return e.contracts.KycOnboardingContract})),r=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),a=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),s=Object(be.e)().defaultChainError,o=Object(be.g)(),i=o.connected,u=o.account,d=o.web3Instance,l=Object(be.a)(),b=l.txEtherscanURL,j=l.txIsPromptOpen,h=l.txSend,m=l.txStatus,x=Object(be.a)(),v=x.txEtherscanURL,g=x.txIsPromptOpen,E=x.txSend,A=x.txStatus,w=Object(be.c)().average,_=sn().daoTokenDetails,y=function(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(de.useState)(je.a.STANDBY),n=Object(ue.a)(t,2),r=n[0],a=n[1],s=Object(de.useState)(),o=Object(ue.a)(s,2),i=o[0],u=o[1],d=Object(de.useState)(),l=Object(ue.a)(d,2),b=l[0],j=l[1],O=Object(de.useState)(),p=Object(ue.a)(O,2),h=p[0],m=p[1],x=Object(de.useState)(""),v=Object(ue.a)(x,2),N=v[0],g=v[1],E=Object(de.useState)(""),A=Object(ue.a)(E,2),w=A[0],_=A[1],y=Object(de.useState)(!1),C=Object(ue.a)(y,2),k=C[0],I=C[1],S=Object(Qt.a)(),T=S.abortController,D=S.isMountedRef,R=Object(be.e)().defaultChainError,P=Object(de.useMemo)((function(){return fn(m)}),[]),L=Object(de.useMemo)((function(){return fn(_)}),[]),F=Object(de.useCallback)((function(){return M.apply(this,arguments)}),[null===T||void 0===T?void 0:T.signal,e,R,N,D,P]);function M(){return(M=Object(xe.a)(Ne.a.mark((function t(){var n,r,c;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==T&&void 0!==T&&T.signal){t.next=3;break}return t.abrupt("return");case 3:if(e&&N&&!R){t.next=8;break}return u(void 0),j(void 0),a(je.a.STANDBY),t.abrupt("return");case 8:return m(dn),a(je.a.PENDING),t.next=12,fetch("".concat(f.r,"/").concat(e.contractAddress,"/").concat(N),{signal:T.signal});case 12:return n=t.sent,t.next=15,n.json();case 15:if(r=t.sent,404!==n.status){t.next=22;break}return u(void 0),m(ln),a(je.a.REJECTED),I(!0),t.abrupt("return");case 22:if(n.ok){t.next=31;break}if(!r.message.includes("pending verification")){t.next=30;break}return u(void 0),P(jn),a(je.a.REJECTED),t.abrupt("return");case 30:throw new Error(r.message);case 31:if(r.isWhitelisted||null===cn||void 0===cn||!cn.joinIsWhitelisted||!n.ok){t.next=36;break}return u(void 0),P(bn),a(je.a.FULFILLED),t.abrupt("return");case 36:if(D.current){t.next=38;break}return t.abrupt("return");case 38:u(r),j(void 0),m(void 0),a(je.a.FULFILLED),t.next=52;break;case 44:if(t.prev=44,t.t0=t.catch(0),D.current){t.next=48;break}return t.abrupt("return");case 48:c=t.t0,u(void 0),j(c),a(je.a.REJECTED);case 52:case"end":return t.stop()}}),t,null,[[0,44]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){F()}),[F]),Object(de.useEffect)((function(){k&&w&&(window.location.href=w)}),[r,w,k]),Object(de.useEffect)((function(){return function(){null===T||void 0===T||T.abort()}}),[T]),{kycCheckCertificate:i,kycCheckError:b,kycCheckMessageJSX:h,kycCheckStatus:r,setKYCCheckETHAddress:g,setKYCCheckRedirect:L}}(),C=y.kycCheckCertificate,k=y.kycCheckError,I=y.kycCheckMessageJSX,S=y.kycCheckStatus,T=y.setKYCCheckETHAddress,D=y.setKYCCheckRedirect,R=Object(ge.b)({mode:"onBlur",reValidateMode:"onChange"}),P=Object(c.b)(),L=Object(de.useState)(),F=Object(ue.a)(L,2),M=F[0],B=F[1],G=Object(de.useState)(),V=Object(ue.a)(G,2),U=V[0],Y=V[1],H=Object(de.useState)(),K=Object(ue.a)(H,2),W=K[0],q=K[1],z=Object(de.useState)(),J=Object(ue.a)(z,2),Q=J[0],X=J[1],$=Object(de.useState)(),Z=Object(ue.a)($,2),ee=Z[0],te=Z[1],ne=Object(de.useState)(),re=Object(ue.a)(ne,2),ae=re[0],ce=re[1],se=Object(de.useState)(),oe=Object(ue.a)(se,2),ie=oe[0],le=oe[1],Oe=Object(de.useState)(),pe=Object(ue.a)(Oe,2),he=pe[0],me=pe[1],ve=R.clearErrors,Ee=R.control,Ae=R.errors,_e=R.getValues,Se=R.register,Re=R.setValue,Pe=R.trigger,Le=R.watch,Fe=Le(un.ethAddress),Me=Le(un.amount),Be=M,Ge=!(!i||!u),Ve=m===Ce.f.AWAITING_CONFIRM||m===Ce.f.PENDING||A===Ce.f.AWAITING_CONFIRM||A===Ce.f.PENDING,Ke=m===Ce.f.FULFILLED,qe=Ve||Ke||j||g,ze=!C||qe||S===je.a.PENDING||S===je.a.REJECTED,Je=Object(ye.a)(Fe),Qe=Je.checkApplicantError,Xe=Je.checkApplicantInvalidMsg,$e=Je.checkApplicantStatus,Ze=Je.isApplicantValid,et=ae?Object(p.d)(Number(ae.maxMembers)-2):On,tt=ae?Object(p.d)(ae.unitsPerChunk):On,nt=Q?Object(p.d)(Q):On,rt=ae?Object(p.d)(String(Object(Ue.toBN)(ae.unitsPerChunk).mul(Object(Ue.toBN)(ae.maximumChunks)))):On,at=ee?Object(p.d)(ee):On,ct=pn?null===he||void 0===he?void 0:he.symbol:"ETH",st=Object(de.useCallback)((function(){return ft.apply(this,arguments)}),[u,s,ie,d]),ot=Object(de.useCallback)((function(){try{if(!e||s||!ae)return q(void 0),X(void 0),te(void 0),void Re(un.amount,On);if(pn){if(!he)return q(void 0),X(void 0),te(void 0),void Re(un.amount,On);var t=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(he.decimals)),n=Object(Ue.toBN)(ae.chunkSize).div(t),r=Object(Ue.toBN)(ae.chunkSize).mod(t),a=r.eq(Object(Ue.toBN)(0))?Number(String(n)):Number("".concat(String(n),".").concat(String(r)));q(a),te(a*Number(ae.maximumChunks)),X(a),Re(un.amount,String(a))}else q(Number(Object(Ue.fromWei)(ae.chunkSize,"ether"))),te(Number(Object(Ue.fromWei)(Object(Ue.toBN)(ae.chunkSize).mul(Object(Ue.toBN)(ae.maximumChunks)),"ether"))),X(Number(Object(Ue.fromWei)(ae.chunkSize,"ether"))),Re(un.amount,Object(Ue.fromWei)(ae.chunkSize,"ether"))}catch(c){q(void 0),X(void 0),te(void 0),Re(un.amount,On),console.error(c)}}),[e,s,he,ae,Re]),it=Object(de.useCallback)((function(){return jt.apply(this,arguments)}),[e,s]),ut=Object(de.useCallback)((function(){return lt.apply(this,arguments)}),[s,d]),dt=Object(de.useCallback)((function(){return bt.apply(this,arguments)}),[s,ie]);function lt(){return(lt=Object(xe.a)(Ne.a.mark((function e(){var t,r,a,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&!s){e.next=3;break}return le(void 0),e.abrupt("return");case 3:if(e.prev=3,f.v){e.next=6;break}throw new Error("No Onboarding ERC20 address was found. Are you sure it is set?");case 6:return e.next=8,Promise.resolve().then(n.t.bind(null,505,3));case 8:t=e.sent,r=t.default,a=r,c=new d.eth.Contract(a,f.v),le(c),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0),le(void 0);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function bt(){return(bt=Object(xe.a)(Ne.a.mark((function e(){var t,n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie&&!s){e.next=3;break}return me(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,ie.methods.symbol().call();case 6:return t=e.sent,e.next=9,ie.methods.decimals().call();case 9:n=e.sent,me({symbol:t,decimals:Number(n)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),me(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function jt(){return(jt=Object(xe.a)(Ne.a.mark((function t(){var n,r,a,c;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e&&!s){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(Ye.g)(e.instance,Ce.b.kycOnboardingChunkSize,f.v);case 5:return n=t.sent,t.next=8,Object(Ye.g)(e.instance,Ce.b.kycOnboardingMaximumChunks,f.v);case 8:return r=t.sent,t.next=11,Object(Ye.g)(e.instance,Ce.b.kycOnboardingMaxMembers,f.v);case 11:return a=t.sent,t.next=14,Object(Ye.g)(e.instance,Ce.b.kycOnboardingUnitsPerChunk,f.v);case 14:c=t.sent,ce({chunkSize:n,maximumChunks:r,maxMembers:a,unitsPerChunk:c}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0),ce(void 0);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))).apply(this,arguments)}function ft(){return(ft=Object(xe.a)(Ne.a.mark((function e(){var t,n,r,a,c,o,i;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u&&!s){e.next=4;break}return Y(void 0),e.abrupt("return");case 4:if(!pn){e.next=22;break}if(ie){e.next=8;break}return Y(void 0),e.abrupt("return");case 8:return e.next=10,ie.methods.balanceOf(u).call();case 10:return t=e.sent,n=Object(Ue.toBN)(t),e.next=14,ie.methods.decimals().call();case 14:r=e.sent,a=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(r)),c=n.div(a),o=n.mod(a),i=o.eq(Object(Ue.toBN)(0))?String(c):"".concat(String(c),".").concat(String(o)),Y(i),e.next=32;break;case 22:if(d){e.next=25;break}return Y(void 0),e.abrupt("return");case 25:return e.t0=Y,e.t1=d.utils,e.next=29,d.eth.getBalance(u);case 29:e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2,"ether"),(0,e.t0)(e.t3);case 32:e.next=38;break;case 34:e.prev=34,e.t4=e.catch(0),console.error(e.t4),Y(void 0);case 38:case"end":return e.stop()}}),e,null,[[0,34]])})))).apply(this,arguments)}function Ot(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(xe.a)(Ne.a.mark((function e(n){var r,a,c,s,o,i;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No KYC Onboarding contract was found.");case 3:if(ie){e.next=5;break}throw new Error("No ERC20Contract found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return e.next=11,ie.methods.allowance(u,t.contractAddress).call();case 11:if(r=e.sent,a=Object(Ue.toBN)(r),!n.gt(a)){e.next=20;break}return c=n.sub(a),s=a.add(c),o=[t.contractAddress,String(s)],i=Object(N.a)({from:u||""},w?{gasPrice:w}:null),e.next=20,E("approve",ie.methods,o,i);case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function ht(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(xe.a)(Ne.a.mark((function n(c){var s,o,i,l,b,j,m,x,v,g,E,A;return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(t){n.next=5;break}throw new Error("No KYC Onboarding contract was found.");case 5:if(Ge){n.next=7;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 7:if(u){n.next=9;break}throw new Error("No account found.");case 9:if(d){n.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(Qe&&console.warn("Error checking if the applicant address is valid: ".concat(Qe.message)),$e!==je.a.FULFILLED||Ze||!Xe){n.next=14;break}throw new Error(Xe);case 14:if(C){n.next=16;break}throw new Error("No KYC validation certificate found.");case 16:if(null===cn||void 0===cn||!cn.joinIsWhitelisted||C.isWhitelisted){n.next=18;break}throw new Error("The applicant address has been KYC verified, but has not been authorized to join yet.");case 18:if(!r&&!a){n.next=20;break}throw new Error("The applicant address is already a member.");case 20:if(s=c.ethAddress,o=c.amount,i=Object(Ue.toChecksumAddress)(s),!pn){n.next=38;break}if(he){n.next=25;break}throw new Error("No ERC20 details found.");case 25:if(Number.isInteger(Number(o))){n.next=27;break}throw new Error("The amount must be an integer for an ERC20 token.");case 27:return b=Object(Ue.toBN)(10).pow(Object(Ue.toBN)(he.decimals)),j=Object(Ue.toBN)(o).mul(b),n.next=31,Ot(j);case 31:return m=[e.contractAddress,i,f.v,String(j),C.signature],x=Object(N.a)({from:u||""},w?{gasPrice:w}:null),n.next=35,h("onboard",t.instance.methods,m,x);case 35:l=n.sent,n.next=44;break;case 38:return v=Object(Ue.toWei)(o,"ether"),g=[e.contractAddress,i,C.signature],E=Object(N.a)({from:u||"",value:v},w?{gasPrice:w}:null),n.next=43,h("onboardEth",t.instance.methods,g,E);case 43:l=n.sent;case 44:if(!l){n.next=50;break}if(Object(p.j)(s)!==Object(p.j)(u)){n.next=50;break}return n.next=48,P(Object(O.A)({account:u,daoRegistryContract:e,web3Instance:d}));case 48:return n.next=50,xt();case 50:n.next=56;break;case 52:n.prev=52,n.t0=n.catch(0),A=n.t0,B(A);case 56:case"end":return n.stop()}}),n,null,[[0,52]])})))).apply(this,arguments)}function xt(){return vt.apply(this,arguments)}function vt(){return(vt=Object(xe.a)(Ne.a.mark((function e(){var t,n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,null===(t=window)||void 0===t||null===(n=t.ethereum)||void 0===n?void 0:n.request({method:"wallet_watchAsset",params:{type:"ERC20",options:_}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){st()}),[st,Ke]),Object(de.useEffect)((function(){s||Re(un.ethAddress,u&&Object(Ue.toChecksumAddress)(u))}),[u,s,Re]),Object(de.useEffect)((function(){T(Fe)}),[Fe,T]),Object(de.useEffect)((function(){Fe&&f.s&&!s&&D(f.s)}),[s,Fe,D]),Object(de.useEffect)((function(){ot()}),[ot,C]),Object(de.useEffect)((function(){B(void 0),ve()}),[ve,Fe]),Object(de.useEffect)((function(){it()}),[it]),Object(de.useEffect)((function(){pn&&ut()}),[ut]),Object(de.useEffect)((function(){pn&&dt()}),[dt]),!Ge||s?Object(fe.jsxs)(vn,{children:[Object(fe.jsxs)("div",{className:"form__description",children:[Object(fe.jsxs)("p",{children:["Tribute DAO will have up to ",et," initial members. Each member can purchase ",tt," units for ",nt," ",ct," (up to ",rt," units for ",at," ",ct,")."]}),Object(fe.jsxs)("p",{children:["Please put your preferred ETH address below and the amount of"," ",ct," you'd like to contribute."]})]}),Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:hn({defaultChainError:s,isConnected:Ge})})})]}):Object(fe.jsxs)(vn,{children:[Object(fe.jsxs)("div",{className:"form__description",children:[I&&Object(fe.jsx)("div",{className:"form__header",children:Object(fe.jsx)(Ie.a,{children:Object(fe.jsx)("p",{children:I})})}),Object(fe.jsxs)("p",{children:["Tribute DAO will have up to ",et," initial members. Each member can purchase ",tt," units for ",nt," ",ct," (up to ",rt," units for ",at," ",ct,")."]}),Object(fe.jsxs)("p",{children:["Please put your preferred ETH address below and the amount of"," ",ct," you'd like to contribute."]})]}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:un.ethAddress,children:"Applicant Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(un.ethAddress),"aria-invalid":Ae.ethAddress?"true":"false",id:un.ethAddress,name:un.ethAddress,ref:Se({validate:function(e){return e?!!Object(He.a)(e)||we.a.INVALID_ETHEREUM_ADDRESS:we.a.REQUIRED}}),type:"text",disabled:qe}),Object(fe.jsx)(Te,{error:Object(p.h)(un.ethAddress,Ae),id:"error-".concat(un.ethAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:un.amount,id:"".concat(un.amount,"-label"),children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsx)(ge.a,{render:function(e){var t=e.onChange;return Object(fe.jsx)(We,{"aria-labelledby":"".concat(un.amount,"-label"),defaultValue:Q||0,id:un.amount,max:ee||0,min:Q||0,step:W||0,onChange:t,disabled:qe})},defaultValue:Q||0,control:Ee,name:un.amount,rules:{validate:function(e){return!(Number(e)>Number(U))||"Insufficient funds. ".concat(function(e){return e?Object(p.d)(e):"---"}(U)," ").concat(ct," available.")}}}),Object(fe.jsx)(Te,{error:Object(p.h)(un.amount,Ae),id:"error-".concat(un.amount)})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:[Object(p.d)(Me)," ",ct]})]}),Object(fe.jsx)("button",{"aria-label":Ve?"Submitting your proposal.":"",className:"button",disabled:ze,onClick:ze?function(){}:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:ht(_e());case 5:case"end":return e.stop()}}),e)}))),type:"submit",children:Ve?Object(fe.jsx)(De.a,{}):Ke?"Done":"Submit"}),qe&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:mn({txEtherscanURL:b,txStatus:m,txEtherscanURLTokenApprove:v,txStatusTokenApprove:A})}),Be&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong with the submission.",error:Be,detailsProps:{open:!0}})}),k&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"There is a KYC check error.",error:k,detailsProps:{open:!0}})})]})]})}function vn(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Join"})}),Object(fe.jsx)("div",{className:"form-wrapper",children:e.children})]})})}var Nn=n(195),gn=n(108),En=n(223);function An(e){return Object(fe.jsx)("svg",Object(N.a)(Object(N.a)({"aria-hidden":"true",focusable:"false","data-icon":"copy",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"})}))}function wn(e){return Object(fe.jsx)("svg",Object(N.a)(Object(N.a)({"aria-hidden":"true",focusable:"false","data-icon":"wallet",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"})}))}function _n(e){var t=e.daoTokenDetails;function n(){return(n=Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return t?Object(fe.jsxs)("div",{children:["Token:"," ",Object(fe.jsx)(Nn.a,{render:function(e){var n=e.elementRef,r=e.isCopied,a=e.setCopied,c=e.tooltipID;return Object(fe.jsx)("span",{"data-for":c,"data-tip":r?"copied!":t.address,onClick:a,ref:n,children:Object(En.a)(t.address,5)})},textToCopy:t.address}),Object(fe.jsx)(gn.a,{effect:"solid",id:"daotoken-address"}),Object(fe.jsx)(Nn.a,{render:function(e){var t=e.elementRef,n=e.isCopied,r=e.setCopied,a=e.tooltipID;return Object(fe.jsx)("button",{className:"daotoken__button","data-for":a,"data-tip":n?"copied!":"copy address",onClick:r,ref:t,children:Object(fe.jsx)(An,{"aria-label":"copy address"})})},textToCopy:t.address}),Object(fe.jsx)("button",{className:"daotoken__button","data-for":"daotoken-wallet","data-tip":"add to wallet",onClick:function(){return n.apply(this,arguments)},children:Object(fe.jsx)(wn,{"aria-label":"add to wallet"})}),Object(fe.jsx)(gn.a,{delayShow:200,effect:"solid",id:"daotoken-wallet"})]}):Object(fe.jsx)(fe.Fragment,{})}var yn;!function(e){e.LARGE="large",e.SMALL="small"}(yn||(yn={}));var Cn,kn,In,Sn=n(476);function Tn(e){return Object(fe.jsx)("svg",Object(N.a)(Object(N.a)({"aria-hidden":"true",focusable:"false","data-icon":"user",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"})}))}function Dn(e){var t=e.isOpen,n=e.closeHandler,r=e.currentStep,a=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),s=Object(c.c)((function(e){return e.contracts.DaoRegistryAdapterContract})),o=Object(c.c)((function(e){return e.connectedMember})),i=Object(be.g)(),u=i.account,d=i.web3Instance,l=Object(be.c)().average,b=Object(be.a)(),j=b.txError,f=b.txEtherscanURL,h=b.txIsPromptOpen,m=b.txSend,x=b.txStatus,v=Object(ge.b)({mode:"onBlur",reValidateMode:"onChange"}),g=Object(c.b)(),E=Object(de.useState)(),A=Object(ue.a)(E,2),w=A[0],_=A[1],y=v.errors,C=v.getValues,k=v.register,I=v.trigger,S=v.watch,T=x===Ce.f.AWAITING_CONFIRM||x===Ce.f.PENDING,D=x===Ce.f.FULFILLED,R=T||D||h,P=w||j,L=S(In.delegateAddress),F=S(In.confirmDelegation),M=!L||!F,B={setDelegation:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"modal__title",children:"Delegate"}),Object(fe.jsx)("p",{children:"Transfer your member rights"}),Object(fe.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsx)("div",{className:"form__input-row",children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(In.delegateAddress),"aria-invalid":y.delegateAddress?"true":"false",name:In.delegateAddress,ref:k({validate:function(e){return e?!(!Object(He.a)(e)||e===tt.a)||we.a.INVALID_ETHEREUM_ADDRESS:we.a.REQUIRED}}),type:"text",disabled:R,placeholder:"Enter delegate address"}),Object(p.h)(In.delegateAddress,y).includes("invalid")&&Object(fe.jsx)(Te,{error:Object(p.h)(In.delegateAddress,y),id:"error-".concat(In.delegateAddress)})]})}),Object(fe.jsx)("div",{className:"form__input-row",style:{marginTop:0},children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{className:"checkbox-input","aria-describedby":"error-".concat(In.confirmDelegation),"aria-invalid":y.confirmDelegation?"true":"false",id:In.confirmDelegation,name:In.confirmDelegation,ref:k({required:we.a.REQUIRED}),type:"checkbox",disabled:R}),Object(fe.jsxs)("label",{className:"checkbox-label",htmlFor:In.confirmDelegation,children:[Object(fe.jsx)("span",{className:"checkbox-box ".concat(yn.SMALL)}),Object(fe.jsx)("span",{className:"checkbox-text",children:"Confirm delegation to the above address. You can revoke this at any time from your profile."})]})]})}),Object(fe.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R||M,onClick:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(C());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:T?Object(fe.jsx)(De.a,{}):D?"Done":"Confirm"}),R&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:H()}),P&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong with your delegation.",error:P})})]})]})},revokeDelegation:function(){if(o)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"modal__title",children:"Revoke Delegation"}),Object(fe.jsx)("p",{children:Object(p.m)(o.delegateKey,7)}),Object(fe.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(fe.jsxs)("p",{children:[Object(fe.jsx)(Tn,{}),"Back to you"]}),Object(fe.jsx)("div",{className:"delegation-modal__text",children:"You'll be able to resume member actions from your account. You can delegate again at any time from your profile."}),Object(fe.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R,onClick:U,children:T?Object(fe.jsx)(De.a,{}):D?"Done":"Confirm"}),R&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:H()}),P&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong with your revocation.",error:P})})]});return Object(fe.jsx)(fe.Fragment,{})},updateDelegation:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"modal__title",children:"Update Delegate"}),Object(fe.jsx)("p",{children:"Transfer your member rights"}),Object(fe.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsx)("div",{className:"form__input-row",children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(In.delegateAddress),"aria-invalid":y.delegateAddress?"true":"false",name:In.delegateAddress,ref:k({validate:function(e){return e?!(!Object(He.a)(e)||e===tt.a)||we.a.INVALID_ETHEREUM_ADDRESS:we.a.REQUIRED}}),type:"text",disabled:R,placeholder:"Enter delegate address"}),Object(p.h)(In.delegateAddress,y).includes("invalid")&&Object(fe.jsx)(Te,{error:Object(p.h)(In.delegateAddress,y),id:"error-".concat(In.delegateAddress)})]})}),Object(fe.jsx)("div",{className:"form__input-row",style:{marginTop:0},children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{className:"checkbox-input","aria-describedby":"error-".concat(In.confirmDelegation),"aria-invalid":y.confirmDelegation?"true":"false",id:In.confirmDelegation,name:In.confirmDelegation,ref:k({required:we.a.REQUIRED}),type:"checkbox",disabled:R}),Object(fe.jsxs)("label",{className:"checkbox-label",htmlFor:In.confirmDelegation,children:[Object(fe.jsx)("span",{className:"checkbox-box ".concat(yn.SMALL)}),Object(fe.jsx)("span",{className:"checkbox-text",children:"Confirm delegation to the above address. You will no longer be a delegate with member rights."})]})]})}),Object(fe.jsx)("button",{"aria-label":T?"Updating the delegate key...":"",className:"button",disabled:R||M,onClick:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(C());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:T?Object(fe.jsx)(De.a,{}):D?"Done":"Confirm"}),R&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:H()}),P&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong with updating the delegate.",error:P})})]})]})}};function G(e){return V.apply(this,arguments)}function V(){return(V=Object(xe.a)(Ne.a.mark((function e(t){var r,c,o,i,b;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return r=t.delegateAddress,c=[a.contractAddress,Object(Ue.toChecksumAddress)(r)],o=Object(N.a)({from:u||""},l?{gasPrice:l}:null),e.next=14,m("updateDelegateKey",s.instance.methods,c,o);case 14:e.sent&&setTimeout(Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(O.A)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=25;break;case 18:e.prev=18,e.t0=e.catch(0),i=e.t0,console.log(i),b=i,(i.message.includes("cannot overwrite existing delegated keys")||i.message.includes("address already taken as delegated key"))&&(b=new Error("The provided address cannot be another member or already in use as a delegate.")),_(b);case 25:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function U(){return Y.apply(this,arguments)}function Y(){return(Y=Object(xe.a)(Ne.a.mark((function e(){var t,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=[a.contractAddress,Object(Ue.toChecksumAddress)(u)],r=Object(N.a)({from:u||""},l?{gasPrice:l}:null),e.next=13,m("updateDelegateKey",s.instance.methods,t,r);case 13:e.sent&&setTimeout(Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(O.A)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),c=e.t0,console.log(c),_(c);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function H(){switch(x){case Ce.f.AWAITING_CONFIRM:return"Awaiting your confirmation\u2026";case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:f,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Submitted!"}),Object(fe.jsx)(ct.a,{url:f})]});default:return null}}return Object(fe.jsxs)(Sn.a,{keyProp:"delegation",isOpen:t,isOpenHandler:function(){},modalClassNames:"delegation-modal",children:[Object(fe.jsx)("span",{className:"modal__close-button",onClick:function(){n()},children:Object(fe.jsx)(gt.a,{})}),B[r]()]})}function Rn(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(be.g)().account,n=Object(de.useState)(kn.SET_DELEGATION),r=Object(ue.a)(n,2),a=r[0],s=r[1],o=Object(de.useState)(""),i=Object(ue.a)(o,2),u=i[0],d=i[1],l=Object(de.useState)(!1),b=Object(ue.a)(l,2),j=b[0],f=b[1],O=Object(de.useCallback)((function(){if(!e||!t)return;var n=e.delegateKey,r=e.isAddressDelegated,a=e.isActiveMember,c=e.memberAddress;a&&!r&&Object(p.j)(t)===Object(p.j)(c)?(s(kn.SET_DELEGATION),d(Cn.DELEGATE)):!a&&r&&Object(p.j)(t)===Object(p.j)(c)?(s(kn.REVOKE_DELEGATION),d(Cn.REVOKE_DELEGATION)):a&&!r&&Object(p.j)(t)===Object(p.j)(n)&&(s(kn.UPDATE_DELEGATION),d(Cn.UPDATE_DELEGATE))}),[t,e]);return Object(de.useEffect)((function(){O()}),[O]),e?Object(fe.jsxs)(fe.Fragment,{children:[""!==u&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"memberprofile__action-description",children:function(){if(!e)return Object(fe.jsx)(fe.Fragment,{});switch(u){case Cn.DELEGATE:return Object(fe.jsx)(fe.Fragment,{children:"You can delegate your member rights to a different ETH address. The address cannot be another member or already in use as a delegate."});case Cn.REVOKE_DELEGATION:return Object(fe.jsxs)(fe.Fragment,{children:["Your member rights have been delegated to"," ",Object(fe.jsx)("span",{className:"delegation__delegate-address-text",children:Object(p.m)(e.delegateKey,7)}),". You can revoke this at any time."]});case Cn.UPDATE_DELEGATE:return Object(fe.jsxs)(fe.Fragment,{children:["The member rights have been delegated to you"," ",Object(fe.jsx)("span",{className:"delegation__delegate-address-text",children:Object(p.m)(e.delegateKey,7)}),". You can update this at any time."]});default:return Object(fe.jsx)(fe.Fragment,{})}}()}),Object(fe.jsx)("button",{className:"memberprofile__action-button",onClick:function(){return f(!0)},children:u})]}),j&&Object(fe.jsx)(Dn,{isOpen:j,closeHandler:function(){f(!1)},currentStep:a})]}):Object(fe.jsx)(fe.Fragment,{})}!function(e){e.DELEGATE="Delegate",e.REVOKE_DELEGATION="Revoke Delegation",e.UPDATE_DELEGATE="Update Delegate"}(Cn||(Cn={})),function(e){e.SET_DELEGATION="setDelegation",e.REVOKE_DELEGATION="revokeDelegation",e.UPDATE_DELEGATION="updateDelegation"}(kn||(kn={})),function(e){e.delegateAddress="delegateAddress",e.confirmDelegation="confirmDelegation"}(In||(In={}));var Pn=["createdAt","didFullyRagequit"];function Ln(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(c.c)((function(e){return e.subgraphNetworkStatus.status})),a=Object(c.c)((function(e){return e.connectedMember})),s=Object(be.g)().web3Instance,o=Object(be.b)(s),i=Object(ue.a)(o,2),u=i[0],d=i[1],l=Object(on.a)(h.b,{variables:{daoAddress:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),b=Object(ue.a)(l,2),j=b[0],O=b[1],m=O.called,x=O.loading,v=O.data,E=O.error,A=Object(de.useState)([]),w=Object(ue.a)(A,2),_=w[0],y=w[1],C=Object(de.useState)(),k=Object(ue.a)(C,2),I=k[0],S=k[1],T=Object(de.useState)(je.a.STANDBY),D=Object(ue.a)(T,2),R=D[0],P=D[1],L=Object(de.useCallback)((function(){return M.apply(this,arguments)}),[t,e,d,s]),F=Object(de.useCallback)((function(){try{if(P(je.a.PENDING),v){var e=v.tributeDaos[0].members.filter((function(e){return!e.didFullyRagequit})).map((function(e){e.createdAt,e.didFullyRagequit;var t=Object(g.a)(e,Pn);return Object(N.a)(Object(N.a)({},t),{},{address:Object(Ue.toChecksumAddress)(e.address),delegateKey:Object(Ue.toChecksumAddress)(e.delegateKey)})}));P(je.a.FULFILLED),y(e),d(e.map((function(e){return e.address})))}else{if(E)throw new Error("subgraph query error: ".concat(E.message));if("undefined"===typeof v)throw new Error("subgraph query error: data is undefined")}}catch(E){var t=E,n=t.message;console.log(n),L()}}),[v,E,L,d]);function M(){return(M=Object(xe.a)(Ne.a.mark((function n(){var a,c,o,i,u,l,b,j,O,h,m,x,v,N,g,E,A,w;return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&s){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,P(je.a.PENDING),a=e.abi,c=e.contractAddress,o=e.instance.methods,n.next=7,o.getNbMembers().call();case 7:if(i=n.sent,!(Number(i)>0)){n.next=29;break}return u=a.find((function(e){return"getMemberAddress"===e.name})),l=Object(r.a)(Array(Number(i)).keys()).map((function(e){return[c,u,[e.toString()]]})),n.next=13,Object(Ye.l)({calls:l,web3Instance:s});case 13:return b=n.sent,j=a.find((function(e){return"getCurrentDelegateKey"===e.name})),O=b.map((function(e){return[c,j,[e]]})),n.next=18,Object(Ye.l)({calls:O,web3Instance:s});case 18:return h=n.sent,m=t.abi,x=t.contractAddress,v=m.find((function(e){return"balanceOf"===e.name})),N=b.map((function(e){return[x,v,[e,f.z]]})),n.next=24,Object(Ye.l)({calls:N,web3Instance:s});case 24:g=n.sent,E=b.map((function(e,t){return{address:e,delegateKey:h[t],isDelegated:Object(p.j)(e)!==Object(p.j)(h[t]),units:g[t]}})),A=E.filter((function(e){return Object(Ue.toBN)(e.units).gt(Object(Ue.toBN)(0))})).reverse(),y(A),d(A.map((function(e){return e.address})));case 29:P(je.a.FULFILLED),n.next=38;break;case 32:n.prev=32,n.t0=n.catch(2),w=n.t0,P(je.a.REJECTED),y([]),S(w);case 38:case"end":return n.stop()}}),n,null,[[2,32]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){m||j()}),[m,j]),Object(de.useEffect)((function(){n===ne.a.OK?m&&!x&&null!==e&&void 0!==e&&e.contractAddress&&F():L()}),[null===e||void 0===e?void 0:e.contractAddress,m,L,F,x,n]),Object(de.useEffect)((function(){a&&L()}),[a,L]),Object(de.useEffect)((function(){R===je.a.FULFILLED&&y((function(e){return e.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{addressENS:u[t]})}))}))}),[u,R]),{members:_,membersError:I,membersStatus:R}}function Fn(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(be.g)().account,n=sn(),r=n.daoTokenDetails,a=n.daoTokenDetailsStatus,s=Object(be.e)().defaultChainError,o=Ln(),i=o.members,u=o.membersError,d=o.membersStatus,l=Object(Qt.d)(),b=l.totalUnitsIssued,j=l.totalUnitsStatus,f=Object(ie.g)().ethereumAddress,O=Object(de.useState)(),h=Object(ue.a)(O,2),m=h[0],x=h[1],v=Object(de.useState)(!1),N=Object(ue.a)(v,2),g=N[0],E=N[1];Object(de.useEffect)((function(){if(d===je.a.FULFILLED){var e=i.find((function(e){return Object(p.j)(e.address)===Object(p.j)(f)}));x(e),e||E(!0)}}),[f,i,d]);var A=u||s,w=d===je.a.FULFILLED,_=!(null===m||void 0===m||!m.addressENS||Object(p.j)(null===m||void 0===m?void 0:m.addressENS)===Object(p.j)(null===m||void 0===m?void 0:m.address)),y=d===je.a.STANDBY||d===je.a.PENDING||e&&a===je.a.STANDBY||a===je.a.PENDING||j===je.a.STANDBY||j===je.a.PENDING,C=!(!t||!m||Object(p.j)(t)!==Object(p.j)(m.address)),k=!(!t||!m||Object(p.j)(t)!==Object(p.j)(m.address)&&Object(p.j)(t)!==Object(p.j)(m.delegateKey)),I=m&&"number"===typeof b?(Number(m.units)/b*100).toFixed(2):"";return y&&!A?Object(fe.jsx)(Mn,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})})}):A?Object(fe.jsx)(Mn,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:A,renderText:"Something went wrong while getting the member."})})}):g&&w?Object(fe.jsx)(Mn,{children:Object(fe.jsx)("div",{className:"text-center error-message",children:Object(fe.jsx)("p",{children:"Member not found."})})}):Object(fe.jsx)(Mn,{children:m?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"memberprofile__header",children:"Member Profile"}),Object(fe.jsxs)("div",{className:"proposaldetails",children:[Object(fe.jsxs)("div",{className:"memberprofile__left-column",children:[Object(fe.jsx)(Nn.a,{render:function(e){var t=e.elementRef,n=e.isCopied,r=e.setCopied,a=e.tooltipID;return Object(fe.jsx)("h3",{onClick:r,children:Object(fe.jsx)("span",{"data-for":a,"data-tip":n?"copied!":_?"".concat(m.addressENS," (").concat(m.address,")"):"copy",ref:t,children:m.addressENS||m.address})})},textToCopy:m.address}),function(){if(m)return Object(fe.jsxs)("div",{children:[Object(fe.jsx)("div",{className:"memberprofile__info-item",children:r?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"DAO Tokens"}),Object(fe.jsx)("div",{children:"".concat(Object(p.d)(m.units)," ").concat(r.symbol||"tokens")}),C&&Object(fe.jsx)("small",{children:Object(fe.jsx)(_n,{daoTokenDetails:r})})]}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Membership Units"}),Object(fe.jsx)("div",{children:Object(p.d)(m.units)})]})}),Object(fe.jsxs)("div",{className:"memberprofile__info-item",children:[Object(fe.jsx)("div",{children:"Voting Weight"}),Object(fe.jsx)("div",{children:"".concat(I,"%")})]})]})}()]}),Object(fe.jsx)("div",{className:"memberprofile__right-column",children:k?Object(fe.jsx)("div",{children:Object(fe.jsxs)("div",{className:"memberprofile__action",children:[Object(fe.jsx)("div",{className:"memberprofile__action-header",children:"Delegation"}),Object(fe.jsx)(Rn,{})]})}):Object(fe.jsx)("div",{className:"memberprofile__actions-unavailable",children:"Connect your wallet with this member address (or its delegate) to view available actions."})})]})]}):Object(fe.jsx)(fe.Fragment,{})})}function Mn(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Members"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/members")},children:"View all"})]}),e.children]})})}var Bn=n(1029);function Gn(e){var t=e.member,n=e.to,r=void 0===n?"#":n,a=Object(be.g)().account,c=Object(de.useRef)(Object(Bn.a)()),o=Object(de.useRef)(Object(Bn.a)()),i=Object(de.useRef)(Object(Bn.a)()),u=t.units,d=Object(p.e)(Number(u)),l=Object(p.d)(u),b=!(null===t||void 0===t||!t.addressENS||Object(p.j)(null===t||void 0===t?void 0:t.addressENS)===Object(p.j)(null===t||void 0===t?void 0:t.address)),j=b?"".concat(t.addressENS," (").concat(t.address,")"):t.address;return Object(fe.jsx)(s.c,{className:"membercard__link",to:r,children:Object(fe.jsxs)("div",{className:"membercard ".concat(!a||Object(p.j)(a)!==Object(p.j)(t.address)&&Object(p.j)(a)!==Object(p.j)(t.delegateKey)?"":"membercard--connected-account"),children:[Object(fe.jsxs)("div",{className:"membercard__row",children:[Object(fe.jsx)("h3",{className:"membercard__title","data-for":o.current,"data-tip":j,children:t.address}),Object(fe.jsx)(gn.a,{delayShow:200,effect:"solid",id:o.current}),Object(fe.jsx)("span",{className:"membercard__units","data-for":i.current,"data-tip":"".concat(l," unit").concat(1===Number(u)?"":"s"),children:d}),Object(fe.jsx)(gn.a,{delayShow:200,effect:"solid",id:i.current})]}),b&&(null===t||void 0===t?void 0:t.addressENS)&&Object(fe.jsxs)("div",{className:"membercard__row",children:[Object(fe.jsx)("span",{className:"membercard__ens","data-for":c.current,"data-tip":j,children:null===t||void 0===t?void 0:t.addressENS}),Object(fe.jsx)(gn.a,{delayShow:200,effect:"solid",id:c.current})]})]})})}function Vn(e){return e.map((function(e){return Object(fe.jsx)(Gn,{to:"/members/".concat(e.address),member:e},e.address)}))}function Un(){var e=Ln(),t=e.members,n=e.membersError,r=e.membersStatus,a=Object(be.e)().defaultChainError,c=r===je.a.STANDBY||r===je.a.PENDING,s=r===je.a.FULFILLED,o=n||a;return c&&!o?Object(fe.jsx)(Yn,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})})}):o?Object(fe.jsx)(Yn,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong while getting the members."})})}):!Object.values(t).length&&s?Object(fe.jsx)(Yn,{children:Object(fe.jsx)("p",{className:"text-center",children:"No members, yet!"})}):Object(fe.jsx)(Yn,{children:Object(fe.jsx)("div",{className:"grid--fluid grid-container",children:Object(fe.jsxs)("div",{children:[Object(fe.jsx)("div",{className:"grid__header",children:"Active Members"}),Object(fe.jsx)("div",{className:"grid__cards",children:Vn(t)})]})})})}function Yn(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Members"})}),e.children]})})}var Hn=n(40),Kn=n(57),Wn=n(46),qn=[Ce.b.offchainVotingVotingPeriod,Ce.b.offchainVotingGracePeriod];function zn(e){var t=e.adapterName,n=e.onProposalClick,r=void 0===n?function(){}:n,a=e.proposalLinkPath,c=e.renderProposalCard,s=e.includeProposalsExistingOnlyOffchain,o=void 0!==s&&s,i=Object(de.useState)([]),u=Object(ue.a)(i,2),d=u[0],l=u[1],b=Object(de.useState)({failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]}),j=Object(ue.a)(b,2),f=j[0],O=j[1],h=Object(Qt.c)(qn),m=Object(ue.a)(h.daoConfigurations,2),x=m[0],v=m[1],g=Object(ye.f)(Object(de.useMemo)((function(){return{adapterName:t,includeProposalsExistingOnlyOffchain:o}}),[t,o])),E=g.proposals,A=g.proposalsError,w=g.proposalsStatus,_=Object(ye.c)(d),y=_.offchainVotingResults,C=_.offchainVotingResultsError,k=_.offchainVotingResultsStatus,I=Object(be.e)().defaultChainError,S=f.failedProposals,T=f.nonsponsoredProposals,D=f.passedProposals,R=f.votingProposals,P=w===je.a.STANDBY||w===je.a.PENDING||k===je.a.STANDBY&&d.length>0||k===je.a.PENDING,L=A||C||I;function F(e){return e.map((function(e){var t,n=e.daoProposalVote,s=e.daoProposalVotingAdapter,o=e.snapshotDraft,i=e.snapshotProposal,u=(null===o||void 0===o?void 0:o.idInDAO)||(null===i||void 0===i?void 0:i.idInDAO),d=null===s||void 0===s?void 0:s.votingAdapterName,l=0,b=0,j=0,f=0;if(d===Hn.c.OffchainVotingContract){var O=(null===n||void 0===n?void 0:n[Hn.c.OffchainVotingContract])||{},h=O.startingTime,m=O.gracePeriodStartingTime,N=Object(Kn.a)({gracePeriodLength:v,gracePeriodStartingTime:m,votePeriodLength:x,voteStartingTime:h});l=N.gracePeriodEndMs,b=N.gracePeriodStartMs,j=N.voteEndMs,f=N.voteStartMs}if(!u)return null;if(c)return Object(fe.jsx)(de.Fragment,{children:c({proposalData:e})},u);var g=(null===o||void 0===o?void 0:o.msg.payload.name)||(null===i||void 0===i?void 0:i.msg.payload.name)||"",E=null===(t=y.find((function(e){var t=Object(ue.a)(e,2),n=t[0];t[1];return Object(p.j)(n)===Object(p.j)(u)})))||void 0===t?void 0:t[1];return Object(fe.jsx)(tn,{linkPath:a,name:g,onClick:r,proposalOnClickId:u,renderStatus:function(){return d===Hn.c.OffchainVotingContract?Object(fe.jsx)(Yt.c,{countdownGracePeriodEndMs:l,countdownGracePeriodStartMs:b,countdownVotingEndMs:j,countdownVotingStartMs:f,votingResult:E}):Object(fe.jsx)(fe.Fragment,{})}},u)}))}return Object(de.useEffect)((function(){l(E.map((function(e){return e.snapshotProposal})))}),[E]),Object(de.useEffect)((function(){if(w===je.a.FULFILLED){var e={failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]};E.forEach((function(t){var n,r,a,c,s=t.daoProposal,i=t.daoProposalVotingState,u=t.daoProposalVote;if(s){var d=0===(null===(n=t.snapshotProposal)||void 0===n||null===(r=n.votes)||void 0===r?void 0:r.length),l=void 0!==i&&(Object(Kn.f)(Wn.b.GRACE_PERIOD,i)||Object(Kn.f)(Wn.b.TIE,i))&&Object(Kn.e)(_e.b.SPONSORED,s.flags)&&(null===u||void 0===u||null===(a=u.OffchainVotingContract)||void 0===a?void 0:a.reporter)===tt.a;if(void 0!==i)if(void 0!==i&&Object(Kn.f)(Wn.b.PASS,i)&&(Object(Kn.e)(_e.b.SPONSORED,s.flags)||Object(Kn.e)(_e.b.PROCESSED,s.flags)))e.passedProposals.push(t);else{var b=null===(c=y.find((function(e){var n,r=Object(ue.a)(e,2),a=r[0];r[1];return Object(p.j)(a)===Object(p.j)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInDAO)||"")})))||void 0===c?void 0:c[1],j=!!b&&b.Yes.units>b.No.units;l&&!1===d&&j?e.votingProposals.push(t):void 0===i||!Object(Kn.f)(Wn.b.NOT_PASS,i)&&!Object(Kn.f)(Wn.b.TIE,i)||!Object(Kn.e)(_e.b.SPONSORED,s.flags)&&!Object(Kn.e)(_e.b.PROCESSED,s.flags)?void 0!==i&&l&&d?e.failedProposals.push(t):void 0===i||!l||j?void 0!==i&&(Object(Kn.f)(Wn.b.GRACE_PERIOD,i)||Object(Kn.f)(Wn.b.IN_PROGRESS,i))&&Object(Kn.e)(_e.b.SPONSORED,s.flags)&&e.votingProposals.push(t):e.failedProposals.push(t):e.failedProposals.push(t)}else(o||Object(Kn.e)(_e.b.EXISTS,s.flags))&&e.nonsponsoredProposals.push(t)}})),O((function(t){return Object(N.a)(Object(N.a)({},t),e)}))}}),[o,y,E,w]),P&&!L?Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})}):L?Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:L,renderText:"Something went wrong while getting the proposals."})}):Object.values(f).flatMap((function(e){return e})).length||w!==je.a.FULFILLED?Object(fe.jsxs)("div",{className:"grid--fluid grid-container",children:[R.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.VOTING}),Object(fe.jsx)("div",{className:"grid__cards",children:F(R)})]}),T.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.REQUESTS}),Object(fe.jsx)("div",{className:"grid__cards",children:F(T)})]}),D.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.PASSED}),Object(fe.jsx)("div",{className:"grid__cards",children:F(D)})]}),S.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:we.d.FAILED}),Object(fe.jsx)("div",{className:"grid__cards",children:F(S)})]})]}):Object(fe.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function Jn(){return Object(fe.jsx)(Qn,{children:Object(fe.jsx)(zn,{adapterName:Hn.a.ONBOARDING,proposalLinkPath:function(e){return"/onboarding/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function Qn(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Onboarding"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/onboard")},children:"Onboard"})]}),e.children]})})}var Xn={skipIsActiveMemberCheck:!0},$n=f.v!==f.n;function Zn(e){var t=e.txEtherscanURL,n=e.txStatus,r=e.txEtherscanURLTokenApprove,a=e.txStatusTokenApprove;if(a===Ce.f.AWAITING_CONFIRM)return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer your tokens",Object(fe.jsx)(Ae.a,{intervalMs:500})]});if(a===Ce.f.PENDING)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:["Approving your tokens for transfer",Object(fe.jsx)(Ae.a,{intervalMs:500})]}),Object(fe.jsx)(ct.a,{url:r,isPending:!0})]});switch(n){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to process the proposal",Object(fe.jsx)(Ae.a,{intervalMs:500})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:t,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Proposal processed!"}),Object(fe.jsx)(ct.a,{url:t})]});default:return null}}function er(e){var t=e.disabled,r=e.proposal.snapshotProposal,a=Object(de.useState)(),s=Object(ue.a)(a,2),o=s[0],i=s[1],u=Object(de.useState)(),d=Object(ue.a)(u,2),l=d[0],b=d[1],j=Object(de.useRef)({notProposerMessage:""}),p=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.OnboardingContract})),h=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),m=Object(be.g)(),x=m.account,v=m.web3Instance,g=Object(be.a)(),E=g.txEtherscanURL,A=g.txIsPromptOpen,w=g.txSend,_=g.txStatus,y=Object(be.c)().average,C=Object(be.a)(),k=C.txEtherscanURL,I=C.txIsPromptOpen,S=C.txSend,T=C.txStatus,D=Object(Qt.f)(Xn),R=D.isDisabled,P=D.openWhyDisabledModal,L=D.WhyDisabledModal,F=D.setOtherDisabledReasons,M=sn().daoTokenDetails,B=Object(c.b)(),G=_===Ce.f.AWAITING_CONFIRM||_===Ce.f.PENDING||T===Ce.f.AWAITING_CONFIRM||T===Ce.f.PENDING,V=_===Ce.f.FULFILLED,U=G||V||A||I,Y=R||U||t,H=Object(de.useCallback)((function(){return K.apply(this,arguments)}),[p,null===h||void 0===h?void 0:h.contractAddress,r]);function K(){return(K=Object(xe.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==h&&void 0!==h&&h.contractAddress&&p&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p.instance.methods.proposals(h.contractAddress,r.idInDAO).call();case 5:t=e.sent,b(t.amount),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),b(void 0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function W(e){return q.apply(this,arguments)}function q(){return(q=Object(xe.a)(Ne.a.mark((function e(t){var r,a,c,s,o,i,u,d,l,b;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f.v){e.next=3;break}throw new Error("No Onboarding ERC20 address was found. Are you sure it is set?");case 3:if(p){e.next=5;break}throw new Error("No OnboardingContract found.");case 5:if(x){e.next=7;break}throw new Error("No account found.");case 7:if(v){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return e.next=11,Promise.resolve().then(n.t.bind(null,505,3));case 11:return r=e.sent,a=r.default,c=a,s=new v.eth.Contract(c,f.v),e.next=17,s.methods.allowance(x,p.contractAddress).call();case 17:if(o=e.sent,i=Object(Ue.toBN)(o),!t.gt(i)){e.next=26;break}return u=t.sub(i),d=i.add(u),l=[p.contractAddress,String(d)],b=Object(N.a)({from:x||""},y?{gasPrice:y}:null),e.next=26,S("approve",s.methods,l,b);case 26:e.next=31;break;case 28:throw e.prev=28,e.t0=e.catch(0),e.t0;case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)}function z(){return(z=Object(xe.a)(Ne.a.mark((function e(){var t,n,a,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(p){e.next=7;break}throw new Error("No OnboardingContract found.");case 7:if(x){e.next=9;break}throw new Error("No account found.");case 9:if(v){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(l){e.next=13;break}throw new Error("No proposal amount found.");case 13:if(!$n){e.next=17;break}return t=Object(Ue.toBN)(l),e.next=17,W(t);case 17:return n=[h.contractAddress,r.idInDAO],a=Object(N.a)(Object(N.a)({from:x||""},y?{gasPrice:y}:null),$n?null:{value:l}),e.next=21,w("processProposal",p.instance.methods,n,a);case 21:if(!e.sent){e.next=28;break}return e.next=25,B(Object(O.A)({account:x,daoRegistryContract:h,web3Instance:v}));case 25:if(x.toLowerCase()!==r.msg.payload.metadata.submitActionArgs[0].toLowerCase()){e.next=28;break}return e.next=28,J();case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),c=e.t0,i(c);case 34:case"end":return e.stop()}}),e,null,[[0,30]])})))).apply(this,arguments)}function J(){return Q.apply(this,arguments)}function Q(){return(Q=Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:M}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){H()}),[H]),Object(de.useEffect)((function(){var e=r.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&x&&(j.current=Object(N.a)(Object(N.a)({},j.current),{},{notProposerMessage:e.toLowerCase()!==x.toLowerCase()?"Only the original proposer can process the proposal.":""})),F(Object.values(j.current))}),[x,F,r]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"proposaldetails__button",disabled:Y,onClick:Y?function(){}:function(){return z.apply(this,arguments)},children:G?Object(fe.jsx)(De.a,{}):V?"Done":"Process"}),Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong"}),U&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:Zn({txEtherscanURL:E,txStatus:_,txEtherscanURLTokenApprove:k,txStatusTokenApprove:T})}),R&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:P,children:"Why is processing disabled?"})]}),Object(fe.jsx)(L,{title:"Why is processing disabled?"})]})}var tr=Object(de.lazy)((function(){return n.e(8).then(n.bind(null,1085))})),nr={duration:150},rr={display:"inline-block",width:"100%",fontSize:"1.5rem"};function ar(e){var t,n=e.adapterName,r=e.proposal,a=e.renderAction,s=Object(c.c)((function(e){var t;return null===(t=e.contracts.VotingContract)||void 0===t?void 0:t.adapterOrExtensionName})),o=(null===(t=r.daoProposalVotingAdapter)||void 0===t?void 0:t.votingAdapterName)||s;return Object(fe.jsx)(de.Suspense,{fallback:Object(fe.jsx)("span",{className:"text-center",style:rr,children:Object(fe.jsx)(Ae.a,{intervalMs:200,fadeInProps:nr})}),children:function(){if(!o)return Object(fe.jsx)(fe.Fragment,{});switch(o){case Hn.c.OffchainVotingContract:return Object(fe.jsx)(tr,{adapterName:n,proposal:r,renderAction:a});case Hn.c.VotingContract:return Object(fe.jsx)(fe.Fragment,{});default:return Object(fe.jsx)(ke.a,{error:new Error('"'.concat(o,'" is not a valid voting adapter name.')),renderText:"Something went wrong"})}}()})}var cr=n(227);function sr(e){var t=e.amount,n=e.amountUnit,r=e.amount2,a=e.amount2Unit;return Object(fe.jsx)("div",{className:"proposaldetails__amount",children:Object(fe.jsxs)("span",{children:["".concat(t," ").concat(n),r&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("br",{}),Object(fe.jsx)("small",{children:"for"}),Object(fe.jsx)("br",{}),"".concat(r," ").concat(a)]})]})})}function or(){var e=Object(ie.g)().proposalId,t=Object(ye.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(be.e)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===_e.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(fe.jsx)(cr.a,{checkApplicant:s,proposal:r})}return a===_e.c.Process||a===_e.c.OffchainVotingGracePeriod?n&&Wn.b[n]!==Wn.b[Wn.b.PASS]?Object(fe.jsx)(fe.Fragment,{}):Object(fe.jsx)(er,{disabled:a===_e.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===je.a.PENDING&&!o)return Object(fe.jsx)(ir,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})})});if(a)return Object(fe.jsx)(ir,{children:Object(fe.jsx)(Wt,{})});if(o)return Object(fe.jsx)(ir,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong while getting the proposal."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.tributeAmount,l=b.tributeAmountUnit}catch(o){d="\u2014",l=""}return Object(fe.jsx)(ir,{children:Object(fe.jsx)(qt,{proposal:n,renderAmountBadge:function(){return Object(fe.jsx)(sr,{amount:d,amountUnit:l})},renderActions:function(){return Object(fe.jsx)(ar,{adapterName:Ce.a.onboarding,proposal:n,renderAction:i})}})})}return Object(fe.jsx)(fe.Fragment,{})}function ir(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Onboarding"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/onboarding")},children:"View all"})]}),e.children]})})}function ur(e){var t=e.showAfterMs,n=Object(de.useState)(!1),r=Object(ue.a)(n,2),a=r[0],c=r[1];return Object(de.useEffect)((function(){var e=t&&setTimeout((function(){return c(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&a?Object(fe.jsx)("div",{className:"loader--emoji",children:Object(fe.jsx)("span",{role:"img","aria-label":"Loading content...",children:e.emoji})}):null}var dr=n(226),lr=n(166),br={skipIsActiveMemberCheck:!0};function jr(e){var t=e.redeemables,n=e.daoTokenDetails;return Object(fe.jsx)(Or,{children:Object(fe.jsx)(fr,{redeemable:t[0],daoTokenDetails:n})})}function fr(e){var t=e.redeemable,n=e.daoTokenDetails,r=Object(de.useRef)({invalidApplicantMessage:""}),a=Object(lr.b)(),c=a.redeemCoupon,s=a.submitStatus,o=a.submitError,i=a.txStatus,u=a.txEtherscanURL,d=a.txIsPromptOpen,l=Object(Qt.f)(br),b=l.isDisabled,j=l.openWhyDisabledModal,f=l.WhyDisabledModal,O=l.setOtherDisabledReasons,h=Object(ye.a)(t.recipient),m=h.checkApplicantError,x=h.checkApplicantInvalidMsg,v=h.checkApplicantStatus,g=h.isApplicantValid,E=s===lr.a.PENDING||i===Ce.f.AWAITING_CONFIRM||i===Ce.f.PENDING,A=s===lr.a.FULFILLED||i===Ce.f.FULFILLED||t.isRedeemd,w=E||A||d;return Object(de.useEffect)((function(){t.recipient&&(m&&console.warn("Error checking if the applicant address '".concat(t.recipient,"' is valid: ").concat(m.message)),v===je.a.FULFILLED&&!g&&x&&(r.current=Object(N.a)(Object(N.a)({},r.current),{},{invalidApplicantMessage:x})),O(Object.values(r.current)))}),[m,x,v,g,t.recipient,O]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{className:"redeemcard redeemcard__content ".concat(A?"fireworks":""," "),children:[Object(fe.jsxs)("p",{className:"redeemcard__recipient",children:["Recipient:"," ",Object(p.m)(Object(Ue.toChecksumAddress)(t.recipient),7)]}),Object(fe.jsxs)("p",{className:"redeemcard__unit",children:[Object(p.d)(t.amount),Object(fe.jsx)("sup",{children:Object(fe.jsx)("small",{children:(null===n||void 0===n?void 0:n.symbol)||"tokens"})})]}),Object(fe.jsx)(_n,{daoTokenDetails:n}),A&&Object(fe.jsx)("p",{className:"redeemcard__redeemed",children:Object(fe.jsx)("span",{className:"pulse",role:"img","aria-label":"Redeemed!",style:{display:"inline-block"},children:"\ud83e\udd73"})}),Object(fe.jsx)("button",{className:"button",style:{marginTop:A?"1rem":"1.5rem"},onClick:Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,n);case 2:case"end":return e.stop()}}),e)}))),disabled:b||w,children:E?Object(fe.jsx)(De.a,{}):A?"Redeemed!":"Redeem"}),w&&!t.isRedeemd&&Object(fe.jsx)("div",{className:"form__submit-status-container",style:{marginTop:"1rem"},children:function(){switch(i){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(dr.a,{})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:u,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Finalized!"}),Object(fe.jsx)(ct.a,{url:u})]});default:return null}}()}),b&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:j,style:{margin:"1rem auto 0"},children:"Why is redeeming disabled?"}),o&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(ke.a,{renderText:"Something went wrong while redeeming the coupon.",error:o})})]}),Object(fe.jsx)(f,{title:"Why is redeeming disabled?"})]})}function Or(e){return Object(fe.jsx)(Ie.a,{children:Object(fe.jsx)("div",{className:"grid--fluid grid-container",children:e.children})})}function pr(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(de.useState)([]),n=Object(ue.a)(t,2),r=n[0],a=n[1],s=Object(de.useState)(je.a.STANDBY),o=Object(ue.a)(s,2),i=o[0],u=o[1],d=Object(be.g)(),l=d.connected,b=d.account,j=Object(be.e)().defaultChainError,O=Object(Qt.a)(),p=O.abortController,h=O.isMountedRef,m=sn(),x=m.daoTokenDetails,v=m.daoTokenDetailsStatus,N=Object(ie.f)(),g=new URLSearchParams(N.search).get("coupon"),E=i===je.a.STANDBY||i===je.a.PENDING||e&&v===je.a.STANDBY||v===je.a.PENDING,A=Object(de.useCallback)((function(){return w.apply(this,arguments)}),[null===p||void 0===p?void 0:p.signal,g,h]);function w(){return(w=Object(xe.a)(Ne.a.mark((function e(){var t,n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==p&&void 0!==p&&p.signal){e.next=3;break}return e.abrupt("return");case 3:return u(je.a.PENDING),e.next=6,fetch("".concat(f.e,"/api/coupon/redeem"),{method:"POST",body:JSON.stringify({signature:g}),headers:{"Content-Type":"application/json"},signal:p.signal});case 6:if(t=e.sent,h.current){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.json();case 11:n=e.sent,a(n),u(je.a.FULFILLED),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(0),h.current){e.next=20;break}return e.abrupt("return");case 20:u(je.a.REJECTED);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){b&&l&&!j&&A()}),[b,l,A,j]),l?j?Object(fe.jsx)(hr,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:j.message})}):l&&E?Object(fe.jsxs)(hr,{children:[Object(fe.jsx)(ur,{emoji:"\ud83c\udf9f"}),Object(fe.jsx)("p",{children:"Checking\u2026 please wait."})]}):void 0!==g&&g?r&&r.length?Object(fe.jsx)(hr,{children:Object(fe.jsx)(jr,{daoTokenDetails:x,redeemables:r})}):Object(fe.jsx)(hr,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:"Coupon not found."})}):Object(fe.jsx)(hr,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:"Coupon signature missing."})}):Object(fe.jsx)(hr,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:"Connect your wallet to view the coupon."})})}function hr(e){return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Redeem Coupon"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"Redeem coupon to issue the membership tokens."})}),e.children]})]})})}function mr(e){var t=e.proposal.snapshotProposal,n=Object(de.useState)(),r=Object(ue.a)(n,2),a=r[0],s=r[1],o=Object(de.useRef)({alreadyCompletedMessage:""}),i=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),u=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),d=Object(be.g)(),l=d.account,b=d.web3Instance,j=Object(be.a)(),f=j.txEtherscanURL,p=j.txIsPromptOpen,h=j.txSend,m=j.txStatus,x=Object(be.c)().average,v=Object(Qt.f)(),g=v.isDisabled,E=v.openWhyDisabledModal,A=v.WhyDisabledModal,w=v.setOtherDisabledReasons,_=Object(c.b)(),y=m===Ce.f.AWAITING_CONFIRM||m===Ce.f.PENDING,C=m===Ce.f.FULFILLED,k=y||C||p,I=g||k;function S(){return(S=Object(xe.a)(Ne.a.mark((function e(){var n,r,a,c,o;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(t){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:if(l){e.next=9;break}throw new Error("No account found.");case 9:if(b){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(n="0",!(null===t||void 0===t?void 0:t.msg.payload.metadata.isTypeAllMembers)){e.next=24;break}return e.prev=14,e.next=17,u.instance.methods.getNbMembers().call();case 17:r=e.sent,n=r.toString(),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(14),new Error("Error while retrieving number of DAO members");case 24:return a=[u.contractAddress,n],c=Object(N.a)({from:l||""},x?{gasPrice:x}:null),e.next=28,h("distribute",i.instance.methods,a,c);case 28:if(!e.sent){e.next=32;break}return e.next=32,_(Object(O.A)({account:l,daoRegistryContract:u,web3Instance:b}));case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(0),o=e.t1,s(o);case 38:case"end":return e.stop()}}),e,null,[[0,34],[14,21]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){function e(){return(e=Object(xe.a)(Ne.a.mark((function e(){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No Snapshot proposal was found.");case 3:if(u){e.next=5;break}throw new Error("No DAO Registry contract was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:return e.next=9,i.instance.methods.distributions(u.contractAddress,t.idInDAO).call();case 9:n=e.sent,o.current=Object(N.a)(Object(N.a)({},o.current),{},{alreadyCompletedMessage:_e.a[n.status]!==_e.a[_e.a.IN_PROGRESS]?"The transfer has already been completed.":""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:w(Object.values(o.current));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,u,w,t]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"proposaldetails__button",disabled:I,onClick:I?function(){}:function(){return S.apply(this,arguments)},children:y?Object(fe.jsx)(De.a,{}):C?"Transfer done":"Transfer assets"}),Object(fe.jsx)(ke.a,{error:a,renderText:"Something went wrong"}),k&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){switch(m){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer assets",Object(fe.jsx)(Ae.a,{})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:f,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Assets transferred!"}),Object(fe.jsx)(ct.a,{url:f})]});default:return null}}()}),g&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:E,children:"Why is action disabled?"})]}),Object(fe.jsx)(A,{title:"Why is transfer disabled?"})]})}function xr(){var e=Object(ie.g)().proposalId,t=Object(ye.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(be.e)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal;return t.status===_e.c.Completed&&n&&Wn.b[n]===Wn.b[Wn.b.PASS]?Object(fe.jsx)(mr,{proposal:r}):null}if(c===je.a.PENDING&&!o)return Object(fe.jsx)(vr,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})})});if(a)return Object(fe.jsx)(vr,{children:Object(fe.jsx)(Wt,{})});if(o)return Object(fe.jsx)(vr,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.transferAmount,l=b.transferAmountUnit}catch(o){d="\u2014",l=""}return Object(fe.jsx)(vr,{children:Object(fe.jsx)(qt,{proposal:n,renderAmountBadge:function(){return Object(fe.jsx)(sr,{amount:d,amountUnit:l})},renderActions:function(){return Object(fe.jsx)(ar,{adapterName:Ce.a.distribute,proposal:n,renderAction:i})}})})}return Object(fe.jsx)(fe.Fragment,{})}function vr(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfers")},children:"View all"})]}),e.children]})})}function Nr(){return Object(fe.jsx)(gr,{children:Object(fe.jsx)(zn,{adapterName:Hn.a.DISTRIBUTE,proposalLinkPath:function(e){return"/transfers/".concat(e)}})})}function gr(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfer")},children:"Make Transfer"})]}),e.children]})})}var Er={skipIsActiveMemberCheck:!0};function Ar(e){var t=e.disabled,r=e.proposal.snapshotProposal,a=Object(de.useState)(),s=Object(ue.a)(a,2),o=s[0],i=s[1],u=Object(de.useState)(),d=Object(ue.a)(u,2),l=d[0],b=d[1],j=Object(de.useRef)({notProposerMessage:""}),f=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.TributeContract})),p=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),h=Object(be.g)(),m=h.account,x=h.web3Instance,v=Object(be.a)(),g=v.txEtherscanURL,E=v.txIsPromptOpen,A=v.txSend,w=v.txStatus,_=Object(be.c)().average,y=Object(be.a)(),C=y.txEtherscanURL,k=y.txIsPromptOpen,I=y.txSend,S=y.txStatus,T=Object(Qt.f)(Er),D=T.isDisabled,R=T.openWhyDisabledModal,P=T.WhyDisabledModal,L=T.setOtherDisabledReasons,F=sn().daoTokenDetails,M=Object(c.b)(),B=w===Ce.f.AWAITING_CONFIRM||w===Ce.f.PENDING||S===Ce.f.AWAITING_CONFIRM||S===Ce.f.PENDING,G=w===Ce.f.FULFILLED,V=B||G||E||k,U=D||V||t,Y=Object(de.useCallback)((function(){return H.apply(this,arguments)}),[f,null===p||void 0===p?void 0:p.contractAddress,r]);function H(){return(H=Object(xe.a)(Ne.a.mark((function e(){var t,n,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==p&&void 0!==p&&p.contractAddress&&r&&f){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.instance.methods.proposals(p.contractAddress,r.idInDAO).call();case 5:t=e.sent,n=t.token,a=t.tributeAmount,b({tokenAddress:n,tributeAmount:a}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),b(void 0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function K(){return W.apply(this,arguments)}function W(){return(W=Object(xe.a)(Ne.a.mark((function e(){var t,r,a,c,s,o,i,u,d,b,j,O,p;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}throw new Error("No Tribute proposal details found.");case 3:if(f){e.next=5;break}throw new Error("No TributeContract found.");case 5:if(m){e.next=7;break}throw new Error("No account found.");case 7:if(x){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=l.tokenAddress,r=l.tributeAmount,e.next=12,Promise.resolve().then(n.t.bind(null,505,3));case 12:return a=e.sent,c=a.default,s=c,o=new x.eth.Contract(s,t),e.next=18,o.methods.allowance(m,f.contractAddress).call();case 18:if(i=e.sent,u=Object(Ue.toBN)(r),d=Object(Ue.toBN)(i),!u.gt(d)){e.next=34;break}return e.prev=22,b=u.sub(d),j=d.add(b),O=[f.contractAddress,j.toString()],p=Object(N.a)({from:m||""},_?{gasPrice:_}:null),e.next=29,I("approve",o.methods,O,p);case 29:e.next=34;break;case 31:throw e.prev=31,e.t0=e.catch(22),e.t0;case 34:e.next=39;break;case 36:throw e.prev=36,e.t1=e.catch(0),e.t1;case 39:case"end":return e.stop()}}),e,null,[[0,36],[22,31]])})))).apply(this,arguments)}function q(){return(q=Object(xe.a)(Ne.a.mark((function e(){var t,n,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(f){e.next=7;break}throw new Error("No TributeContract found.");case 7:if(m){e.next=9;break}throw new Error("No account found.");case 9:if(x){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:return e.next=13,K();case 13:return t=[p.contractAddress,r.idInDAO],n=Object(N.a)({from:m||""},_?{gasPrice:_}:null),e.next=17,A("processProposal",f.instance.methods,t,n);case 17:if(!e.sent){e.next=24;break}return e.next=21,M(Object(O.A)({account:m,daoRegistryContract:p,web3Instance:x}));case 21:if(m.toLowerCase()!==r.msg.payload.metadata.submitActionArgs[0].toLowerCase()){e.next=24;break}return e.next=24,z();case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),a=e.t0,i(a);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function z(){return J.apply(this,arguments)}function J(){return(J=Object(xe.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:F}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){Y()}),[Y]),Object(de.useEffect)((function(){var e=r.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&m&&(j.current=Object(N.a)(Object(N.a)({},j.current),{},{notProposerMessage:e.toLowerCase()!==m.toLowerCase()?"Only the original proposer can process the proposal.":""})),L(Object.values(j.current))}),[m,L,r]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"proposaldetails__button",disabled:U,onClick:U?function(){}:function(){return q.apply(this,arguments)},children:B?Object(fe.jsx)(De.a,{}):G?"Done":"Process"}),Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong"}),V&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){if(S===Ce.f.AWAITING_CONFIRM)return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer your tokens",Object(fe.jsx)(Ae.a,{})]});if(S===Ce.f.PENDING)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:["Approving your tokens for transfer",Object(fe.jsx)(Ae.a,{})]}),Object(fe.jsx)(ct.a,{url:C,isPending:!0})]});switch(w){case Ce.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to process the proposal",Object(fe.jsx)(Ae.a,{})]});case Ce.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{intervalMs:2e3,messages:rt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Ie.a,{children:e},e)}}),Object(fe.jsx)(ct.a,{url:g,isPending:!0})]});case Ce.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Proposal processed!"}),Object(fe.jsx)(ct.a,{url:g})]});default:return null}}()}),D&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:R,children:"Why is processing disabled?"})]}),Object(fe.jsx)(P,{title:"Why is processing disabled?"})]})}var wr="\u2014";function _r(){var e=Object(ie.g)().proposalId,t=Object(ye.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(be.e)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===_e.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(fe.jsx)(cr.a,{checkApplicant:s,proposal:r})}return a===_e.c.Process||a===_e.c.OffchainVotingGracePeriod?n&&Wn.b[n]!==Wn.b[Wn.b.PASS]?Object(fe.jsx)(fe.Fragment,{}):Object(fe.jsx)(Ar,{disabled:a===_e.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===je.a.PENDING&&!o)return Object(fe.jsx)(yr,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(Kt.a,{})})});if(a)return Object(fe.jsx)(yr,{children:Object(fe.jsx)(Wt,{})});if(o)return Object(fe.jsx)(yr,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(ke.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d=wr,l="",b=wr,j="";try{var f=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=f.tributeAmount,l=f.tributeAmountUnit,b=f.requestAmount,j=f.requestAmountUnit}catch(o){d=wr,l="",b=wr,j=""}return Object(fe.jsx)(yr,{children:Object(fe.jsx)(qt,{proposal:n,renderAmountBadge:function(){return Object(fe.jsx)(sr,{amount:d,amountUnit:l,amount2:b,amount2Unit:j})},renderActions:function(){return Object(fe.jsx)(ar,{adapterName:Ce.a.tribute,proposal:n,renderAction:i})}})})}return Object(fe.jsx)(fe.Fragment,{})}function yr(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tributes")},children:"View all"})]}),e.children]})})}function Cr(){return Object(fe.jsx)(kr,{children:Object(fe.jsx)(zn,{adapterName:Hn.a.TRIBUTE,proposalLinkPath:function(e){return"/tributes/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function kr(e){var t=Object(ie.e)();return Object(fe.jsx)(Me,{className:"section-wrapper",children:Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tribute")},children:"Provide Tribute"})]}),e.children]})})}function Ir(){function e(e){return Object(fe.jsx)(s.c,{to:"/",children:e.children})}return Object(fe.jsxs)("header",{className:"header",children:[Object(fe.jsx)(e,{children:Object(fe.jsx)(Ot,{})}),Object(fe.jsx)("div",{className:"header__nav-container",children:Object(fe.jsx)(It,{})})]})}function Sr(){return Object(fe.jsx)("div",{className:"footer",children:Object(fe.jsx)(Bt,{})})}var Tr=":proposalId";function Dr(){return Object(fe.jsx)(s.b,{children:[Object(fe.jsx)(ie.a,{exact:!0,path:"/",render:function(){return Object(fe.jsx)(Ut,{})}},"splash"),f.i&&Object(fe.jsx)(ie.a,{exact:!0,path:"/join",render:function(){return Object(fe.jsx)(xn,{})}},"join"),Object(fe.jsx)(ie.a,{exact:!0,path:"/onboard",render:function(){return Object(fe.jsx)(Xe,{})}},"onboard"),Object(fe.jsx)(ie.a,{exact:!0,path:"/onboarding",render:function(){return Object(fe.jsx)(Jn,{})}},"onboarding"),Object(fe.jsx)(ie.a,{exact:!0,path:"/onboarding/".concat(Tr),render:function(){return Object(fe.jsx)(or,{})}},"onboarding-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/transfer",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(ot,{}),Object(fe.jsx)(Sr,{})]})}},"transfer"),Object(fe.jsx)(ie.a,{exact:!0,path:"/transfers",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(Nr,{}),Object(fe.jsx)(Sr,{})]})}},"transfers"),Object(fe.jsx)(ie.a,{exact:!0,path:"/transfers/".concat(Tr),render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(xr,{}),Object(fe.jsx)(Sr,{})]})}},"transfer-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/tribute",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(ut,{}),Object(fe.jsx)(Sr,{})]})}},"tribute"),Object(fe.jsx)(ie.a,{exact:!0,path:"/tributes",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(Cr,{}),Object(fe.jsx)(Sr,{})]})}},"tributes"),Object(fe.jsx)(ie.a,{exact:!0,path:"/tributes/".concat(Tr),render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(_r,{}),Object(fe.jsx)(Sr,{})]})}},"tribute-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/governance-proposal",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(Be,{}),Object(fe.jsx)(Sr,{})]})}},"governance-proposal"),Object(fe.jsx)(ie.a,{exact:!0,path:"/governance",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(rn,{}),Object(fe.jsx)(Sr,{})]})}},"governance-proposals"),Object(fe.jsx)(ie.a,{exact:!0,path:"/governance/".concat(Tr),render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(zt,{}),Object(fe.jsx)(Sr,{})]})}},"governance-proposal-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/members",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(Un,{}),Object(fe.jsx)(Sr,{})]})}},"members"),Object(fe.jsx)(ie.a,{exact:!0,path:"/members/:ethereumAddress",render:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ir,{}),Object(fe.jsx)(Fn,{}),Object(fe.jsx)(Sr,{})]})}},"member-profile"),Object(fe.jsx)(ie.a,{exact:!0,path:"/redeem",render:function(){return Object(fe.jsx)(pr,{})}},"redeem")]})}function Rr(e){Object(ie.f)().pathname;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(me,{}),Object(fe.jsx)(Dr,{}),Object(fe.jsx)(pe,{})]})}var Pr,Lr=n(3);function Fr(e){var t=e.render,n=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),r=Object(de.useState)(),a=Object(ue.a)(r,2),s=a[0],o=a[1],i=Object(de.useState)(!1),u=Object(ue.a)(i,2),d=u[0],l=u[1],b=Object(de.useState)(Object(Lr.a)({},Pr.initSnapshotAPI,je.a.STANDBY)),j=Object(ue.a)(b,2),p=j[0],h=j[1],m=Object(be.g)(),x=m.account,v=m.web3Instance,g=Object(be.e)().isDefaultChain,E=Object(Qt.e)().isMountedRef,A=Object(be.d)(),w=Object(c.b)(),_=Object(de.useCallback)((function(){return I.apply(this,arguments)}),[A,g,v]),y=Object(de.useCallback)((function(){return S.apply(this,arguments)}),[x,n,w,g,v]),C=Object(de.useCallback)((function(){return k.apply(this,arguments)}),[E]);function k(){return(k=Object(xe.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f.w){e.next=3;break}throw new Error("No Snapshot Hub API URL was found.");case 3:return e.next=5,Object(Ee.getApiStatus)(f.w);case 5:if(t=e.sent,t.data.version){e.next=9;break}throw new Error("Snapshot API is not ready.");case 9:if(E.current){e.next=11;break}return e.abrupt("return");case 11:h((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(Lr.a)({},Pr.initSnapshotAPI,je.a.FULFILLED))})),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(0),E.current){e.next=18;break}return e.abrupt("return");case 18:o(new Error("Snapshot API is not responding."));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function I(){return(I=Object(xe.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A({web3Instance:v});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0,o(t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function S(){return(S=Object(xe.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x&&n&&g&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w(Object(O.A)({account:x,daoRegistryContract:n,web3Instance:v}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0,o(t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(de.useEffect)((function(){l(Object.values(p).every((function(e){return e===je.a.FULFILLED})))}),[p]),Object(de.useEffect)((function(){_()}),[_,v]),Object(de.useEffect)((function(){y()}),[y]),Object(de.useEffect)((function(){C()}),[C]),t({error:s,isInitComplete:d})}function Mr(e){var t=e.error;return Object(fe.jsxs)(Ie.a,{children:[Object(fe.jsx)("div",{style:{padding:"2em 1em 1em",textAlign:"center"},children:Object(fe.jsxs)("h1",{style:{fontSize:"2rem"},children:[Object(fe.jsx)("span",{className:"pulse",role:"img","aria-label":"Emoji with eyes crossed out.",style:{display:"inline-block"},children:"\ud83d\ude35"})," ","Oops, something went wrong."]})}),Object(fe.jsx)("div",{style:{textAlign:"center",maxWidth:600,display:"block",margin:"0 auto"},children:Object(fe.jsx)(ke.a,{error:t,renderText:""})})]})}!function(e){e.initSnapshotAPI="initSnapshotAPI"}(Pr||(Pr={}));var Br=function(e){e&&e instanceof Function&&n.e(10).then(n.bind(null,1083)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Gr=n(237),Vr=(n(1022),document.getElementById("root"));"production"===f.j&&Object(p.b)(),window.ethereum&&window.ethereum.autoRefreshOnNetworkChange&&(window.ethereum.autoRefreshOnNetworkChange=!1);var Ur=new i.a({uri:function(e){var t=e.operationName;return"".concat(f.p.CORE,"?").concat(t)}}),Yr=new i.a({uri:function(e){var t=e.operationName;return"".concat(f.p.COUPON_ONBOARDING,"?").concat(t)}}),Hr=new i.a({uri:function(e){var t=e.operationName;return"".concat(f.p.NFT_EXTENSION,"?").concat(t)}}),Kr=Object(u.a)((function(e){return e.getContext().serviceName===f.o.COUPON_ONBOARDING}),Yr,Object(u.a)((function(e){return e.getContext().serviceName===f.o.NFT_EXTENSION}),Hr,Ur)),Wr=function(e){return new d.a({link:Object(l.a)(Object(h.d)(e),Kr),cache:new b.a({typePolicies:{Adapter:{fields:{adapters:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}},Extension:{fields:{extensions:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}}}})})},qr=new j.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});null!==Vr&&Object(a.render)(Object(fe.jsx)(c.a,{store:oe,children:Object(fe.jsx)(s.a,{children:Object(fe.jsx)(Gr.b,{onBeforeDisconnect:function(){oe.dispatch(Object(O.w)()),oe.dispatch(Object(O.x)())},onBeforeConnect:function(){oe.dispatch(Object(O.x)())},providerOptions:f.A,children:Object(fe.jsx)(o.a,{client:Wr(oe),children:Object(fe.jsx)(j.QueryClientProvider,{client:qr,children:Object(fe.jsx)(Fr,{render:function(e){var t=e.error,n=e.isInitComplete;return t?Object(fe.jsx)(Rr,{renderMainContent:function(){return Object(fe.jsx)(Mr,{error:t})}}):n?Object(fe.jsx)(Rr,{}):null}})})})})})}),Vr),Br()},11:function(e,t,n){"use strict";function r(e,t){var n=void 0!==t?e.filter((function(e){return e!==t})):e;return n[Math.floor(Math.random()*n.length)]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return E.a}));var a=n(4);function c(){var e=function(){},t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===typeof t)for(var n=0,r=Object.entries(t);n<r.length;n++){var c=Object(a.a)(r[n],2),s=c[0],o=c[1];t[s]="function"===typeof o?e:null}}function s(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}var o=function(e){var t=Number(null!==e&&void 0!==e?e:void 0);return isNaN(t)?"":t.toLocaleString("en-US")};function i(e){var t=function(e){return(new Intl.NumberFormat).format(Math.round(10*e)/10)};return e>=1e12?t(e/1e12)+"T":e>=1e9?t(e/1e9)+"B":e>=1e6?t(e/1e6)+"M":e>=1e3?t(e/1e3)+"k":t(e)}var u=n(12);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.h;if(e!==u.b.GANACHE&&e!==u.b.HARMONY_MAIN&&e!==u.b.HARMONY_TEST&&e!==u.b.POLYGON&&e!==u.b.POLYGON_TEST&&e!==u.b.AVALANCHE_TEST&&e!==u.b.AVALANCHE_MAIN){if(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEFAULT_CHAIN_NAME_LOCAL:"RINKEBY",REACT_APP_ENVIRONMENT:"development",REACT_APP_INFURA_PROJECT_ID_DEV:"9958f906a8b547c3a30da0b35edbd520",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xf91fE994DF8dac04d03A2C3CC0B74739d82700e0",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0x15BdDd42541Aab8e231B909aFB14bd0F8fCEAEDF",REACT_APP_SNAPSHOT_HUB_API_URL:"https://trib-snapshot-hub-terrifickid.cloud.okteto.net",REACT_APP_SNAPSHOT_SPACE:"tribute"}).REACT_APP_ALCHEMY_API_KEY)return"https://eth-".concat(u.c[e],".alchemyapi.io/v2/").concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEFAULT_CHAIN_NAME_LOCAL:"RINKEBY",REACT_APP_ENVIRONMENT:"development",REACT_APP_INFURA_PROJECT_ID_DEV:"9958f906a8b547c3a30da0b35edbd520",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xf91fE994DF8dac04d03A2C3CC0B74739d82700e0",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0x15BdDd42541Aab8e231B909aFB14bd0F8fCEAEDF",REACT_APP_SNAPSHOT_HUB_API_URL:"https://trib-snapshot-hub-terrifickid.cloud.okteto.net",REACT_APP_SNAPSHOT_SPACE:"tribute"}).REACT_APP_ALCHEMY_API_KEY||"");console.warn("No Alchemy API key was found.")}}var l={days:0,hours:0,minutes:0,seconds:0,total:0};function b(e){var t=new Date;if(e<=t)return l;var n=e.getTime()-t.getTime(),r=Math.floor(n/1e3%60),a=Math.floor(n/1e3/60%60),c=Math.floor(n/36e5%24);return{days:Math.floor(n/864e5),hours:c,minutes:a,seconds:r,total:n}}function j(e,t){return t[e]&&"message"in t[e]?t[e].message:""}var f=n(5),O=n(2),p=n.n(O);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().trim()}function m(e,t){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getCode(h(t));case 3:return r=e.sent,a=!r||"0x"===r||"0x0"===r||"0x00"===r,e.abrupt("return",!1===a);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var v=n(33);function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e+1-t;return Object(v.a)(Array(n)).map((function(e,n){return t+n}))}n(164);var g=function(e){return e.toString().replace(/,/g,"")};var E=n(223);n(17)},117:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return O}));var r,a,c,s,o=n(134),i=n(1053),u=Object(i.a)(r||(r=Object(o.a)(["\n  query GetDao($id: ID) {\n    tributeDaos(where: {id: $id}) {\n      id # dao address\n      daoAddress\n      name\n      totalUnits\n      totalUnitsIssued\n    }\n  }\n"]))),d=(Object(i.a)(a||(a=Object(o.a)(["\n  query GetAdaptersAndExtensions($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      daoAddress\n      adapters {\n        id\n        acl\n        adapterId\n        adapterAddress\n      }\n      extensions {\n        id\n        extensionId\n        extensionAddress\n      }\n    }\n  }\n"]))),Object(i.a)(c||(c=Object(o.a)(["\n  query GetMembers($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      members(orderBy: createdAt, orderDirection: desc) {\n        createdAt\n        address: memberAddress\n        delegateKey\n        isDelegated\n        units\n        didFullyRagequit\n      }\n    }\n  }\n"])))),l=Object(i.a)(s||(s=Object(o.a)(["\n  query GetTokenHolderBalances($tokenAddress: String!) {\n    tokens(where: {tokenAddress: $tokenAddress}) {\n      symbol\n      tokenAddress\n      holders {\n        balance\n        member {\n          id\n          delegateKey\n        }\n      }\n    }\n  }\n"]))),b=n(494),j=n(25),f=n(94);function O(e){return Object(b.a)((function(t){var n=t.networkError;n&&(e.getState().subgraphNetworkStatus.status!==f.a.ERR&&(e.dispatch(Object(j.V)({status:f.a.ERR})),console.error("[Subgraph network error]: ".concat(n))));n||e.getState().subgraphNetworkStatus.status!==f.a.OK&&e.dispatch(Object(j.V)({status:f.a.OK}))}))}},12:function(e,t,n){"use strict";(function(e){n.d(t,"j",(function(){return Q})),n.d(t,"w",(function(){return X})),n.d(t,"e",(function(){return $})),n.d(t,"i",(function(){return Z})),n.d(t,"r",(function(){return ee})),n.d(t,"s",(function(){return te})),n.d(t,"p",(function(){return ne})),n.d(t,"o",(function(){return re})),n.d(t,"b",(function(){return ae})),n.d(t,"c",(function(){return ce})),n.d(t,"d",(function(){return se})),n.d(t,"h",(function(){return oe})),n.d(t,"m",(function(){return ie})),n.d(t,"l",(function(){return le})),n.d(t,"A",(function(){return be})),n.d(t,"g",(function(){return je})),n.d(t,"f",(function(){return fe})),n.d(t,"a",(function(){return Oe})),n.d(t,"u",(function(){return pe})),n.d(t,"q",(function(){return he})),n.d(t,"y",(function(){return me})),n.d(t,"z",(function(){return xe})),n.d(t,"t",(function(){return ve})),n.d(t,"n",(function(){return Ne})),n.d(t,"k",(function(){return ge})),n.d(t,"x",(function(){return Ee})),n.d(t,"v",(function(){return Ae}));var r,a,c,s,o,i,u,d,l,b,j,f,O,p,h,m,x,v,N,g,E,A,w,_=n(3),y=n(482),C=n(148),k=n(300),I=n(513),S=n(74);Object(y.config)({path:Object(k.resolve)(e,"../.env")});var T=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEFAULT_CHAIN_NAME_LOCAL:"RINKEBY",REACT_APP_ENVIRONMENT:"development",REACT_APP_INFURA_PROJECT_ID_DEV:"9958f906a8b547c3a30da0b35edbd520",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xf91fE994DF8dac04d03A2C3CC0B74739d82700e0",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0x15BdDd42541Aab8e231B909aFB14bd0F8fCEAEDF",REACT_APP_SNAPSHOT_HUB_API_URL:"https://trib-snapshot-hub-terrifickid.cloud.okteto.net",REACT_APP_SNAPSHOT_SPACE:"tribute"}),D=T.REACT_APP_COUPON_API_URL,R=T.REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS,P=T.REACT_APP_DEFAULT_CHAIN_NAME_LOCAL,L=T.REACT_APP_ENABLE_KYC_ONBOARDING,F=T.REACT_APP_ENVIRONMENT,M=T.REACT_APP_GRAPH_CORE_URL,B=T.REACT_APP_GRAPH_COUPON_ONBOARDING_URL,G=T.REACT_APP_GRAPH_NFT_EXTENSION_URL,V=T.REACT_APP_INFURA_PROJECT_ID_DEV,U=T.REACT_APP_INFURA_PROJECT_ID_LOCAL,Y=T.REACT_APP_INFURA_PROJECT_ID_PROD,H=T.REACT_APP_KYC_BACKEND_URL,K=T.REACT_APP_KYC_FORMS_URL,W=T.REACT_APP_MULTICALL_CONTRACT_ADDRESS,q=T.REACT_APP_ONBOARDING_TOKEN_ADDRESS,z=T.REACT_APP_SNAPSHOT_HUB_API_URL,J=T.REACT_APP_SNAPSHOT_SPACE;console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEFAULT_CHAIN_NAME_LOCAL:"RINKEBY",REACT_APP_ENVIRONMENT:"development",REACT_APP_INFURA_PROJECT_ID_DEV:"9958f906a8b547c3a30da0b35edbd520",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xf91fE994DF8dac04d03A2C3CC0B74739d82700e0",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0x15BdDd42541Aab8e231B909aFB14bd0F8fCEAEDF",REACT_APP_SNAPSHOT_HUB_API_URL:"https://trib-snapshot-hub-terrifickid.cloud.okteto.net",REACT_APP_SNAPSHOT_SPACE:"tribute"}));var Q=F,X="localhost"===Q?"/snapshot-hub":z,$=D,Z="true"===L,ee=H,te=K,ne={CORE:M,COUPON_ONBOARDING:B,NFT_EXTENSION:G},re={CORE:"core",COUPON_ONBOARDING:"coupon-onboarding",NFT_EXTENSION:"nft-extension"},ae={MAINNET:1,ROPSTEN:3,RINKEBY:4,GOERLI:5,KOVAN:42,GANACHE:1337,HARMONY_TEST:16667e5,HARMONY_MAIN:16666e5,POLYGON_TEST:80001,POLYGON:137,AVALANCHE_TEST:43113,AVALANCHE_MAIN:43114},ce=(r={},Object(_.a)(r,ae.MAINNET,"mainnet"),Object(_.a)(r,ae.ROPSTEN,"ropsten"),Object(_.a)(r,ae.RINKEBY,"rinkeby"),Object(_.a)(r,ae.GOERLI,"goerli"),Object(_.a)(r,ae.KOVAN,"kovan"),Object(_.a)(r,ae.GANACHE,"ganache"),Object(_.a)(r,ae.HARMONY_TEST,"harmony-testnet"),Object(_.a)(r,ae.HARMONY_MAIN,"harmony-mainnet"),Object(_.a)(r,ae.POLYGON,"polygon-mainnet"),Object(_.a)(r,ae.POLYGON_TEST,"polygon-testnet"),Object(_.a)(r,ae.AVALANCHE_TEST,"avalanche-fuji"),Object(_.a)(r,ae.AVALANCHE_MAIN,"avalanche-mainnet"),r),se=(a={},Object(_.a)(a,ae.MAINNET,"Main Ethereum Network"),Object(_.a)(a,ae.ROPSTEN,"Ropsten Test Network"),Object(_.a)(a,ae.RINKEBY,"Rinkeby Test Network"),Object(_.a)(a,ae.GOERLI,"G\xf6rli Test Network"),Object(_.a)(a,ae.KOVAN,"Kovan Test Network"),Object(_.a)(a,ae.GANACHE,"Ganache Test Network"),Object(_.a)(a,ae.HARMONY_TEST,"Harmony Test Network"),Object(_.a)(a,ae.HARMONY_MAIN,"Harmony Main Network"),Object(_.a)(a,ae.POLYGON_TEST,"Polygon Test Network"),Object(_.a)(a,ae.POLYGON,"Polygon Main Network"),Object(_.a)(a,ae.AVALANCHE_TEST,"Avalanche Fuji Test Network"),Object(_.a)(a,ae.AVALANCHE_MAIN,"Avalanche Main Network"),a),oe="production"===F?ae.MAINNET:"development"===F?ae.RINKEBY:P?ae[P]:ae.GANACHE,ie=(c={},Object(_.a)(c,ae.MAINNET,"https://etherscan.io"),Object(_.a)(c,ae.ROPSTEN,"https://ropsten.etherscan.io"),Object(_.a)(c,ae.RINKEBY,"https://rinkeby.etherscan.io"),Object(_.a)(c,ae.GOERLI,"https://goerli.etherscan.io"),Object(_.a)(c,ae.KOVAN,"https://kovan.etherscan.io"),Object(_.a)(c,ae.HARMONY_TEST,"https://explorer.pops.one"),Object(_.a)(c,ae.HARMONY_MAIN,"https://explorer.harmony.one"),Object(_.a)(c,ae.POLYGON_TEST,"https://mumbai.polygonscan.com"),Object(_.a)(c,ae.POLYGON,"https://polygonscan.com"),Object(_.a)(c,ae.AVALANCHE_TEST,"https://testnet.snowtrace.io"),Object(_.a)(c,ae.AVALANCHE_MAIN,"https://snowtrace.io"),c),ue=(s={},Object(_.a)(s,ae.MAINNET,"wss://mainnet.infura.io/ws/v3"),Object(_.a)(s,ae.ROPSTEN,"wss://ropsten.infura.io/ws/v3"),Object(_.a)(s,ae.RINKEBY,"wss://rinkeby.infura.io/ws/v3"),Object(_.a)(s,ae.GOERLI,"wss://goerli.infura.io/ws/v3"),Object(_.a)(s,ae.KOVAN,"wss://kovan.infura.io/ws/v3"),Object(_.a)(s,ae.HARMONY_TEST,"wss://ws.s0.pops.one"),Object(_.a)(s,ae.HARMONY_MAIN,"wss://ws.s0.t.hmny.io"),Object(_.a)(s,ae.POLYGON_TEST,"wss://ws-matic-mumbai.chainstacklabs.com"),Object(_.a)(s,ae.POLYGON,"wss://ws-matic-mainnet.chainstacklabs.com"),Object(_.a)(s,ae.AVALANCHE_TEST,"wss://api.avax-test.network:9650/ext/bc/C/ws"),Object(_.a)(s,ae.AVALANCHE_MAIN,"wss://api.avax.network:9650/ext/bc/C/ws"),s),de="production"===F?Y:"development"===F?V:U,le=ue[oe]?de?"".concat(ue[oe],"/").concat(de):ue[oe]:oe===ae.GANACHE?"ws://127.0.0.1:7545":"",be={injected:{display:{name:"MetaMask",description:"Connect with the provider in your Browser"},package:null},walletconnect:{display:{name:"WalletConnect",description:"Connect with your mobile wallet"},package:I.a,options:{infuraId:de,qrcodeModalOptions:{mobileLinks:Object(C.isMobile)()?["rainbow","metamask","argent","trust"]:[]}}}},je=R,fe=(o={},Object(_.a)(o,ae.MAINNET,""),Object(_.a)(o,ae.ROPSTEN,""),Object(_.a)(o,ae.RINKEBY,"0x76F5D63243AE3b176128Ab8C0451Ff347391f56e"),Object(_.a)(o,ae.GOERLI,""),Object(_.a)(o,ae.KOVAN,""),Object(_.a)(o,ae.GANACHE,"0x6d92a8E4aB80adcBbFDA44ef69fe847f82def641"),Object(_.a)(o,ae.HARMONY_TEST,""),Object(_.a)(o,ae.HARMONY_MAIN,""),Object(_.a)(o,ae.POLYGON_TEST,""),Object(_.a)(o,ae.POLYGON,""),Object(_.a)(o,ae.AVALANCHE_TEST,""),Object(_.a)(o,ae.AVALANCHE_MAIN,""),o),Oe=(i={},Object(_.a)(i,ae.MAINNET,""),Object(_.a)(i,ae.ROPSTEN,""),Object(_.a)(i,ae.RINKEBY,"0x80feBc0872aB9CEC472663C0fE33fA1e19C0D3BF"),Object(_.a)(i,ae.GOERLI,""),Object(_.a)(i,ae.KOVAN,""),Object(_.a)(i,ae.GANACHE,"0xcD1639FD072113CC86e15f65f1505C6D58Aa7412"),Object(_.a)(i,ae.HARMONY_TEST,""),Object(_.a)(i,ae.HARMONY_MAIN,""),Object(_.a)(i,ae.POLYGON_TEST,""),Object(_.a)(i,ae.POLYGON,""),Object(_.a)(i,ae.AVALANCHE_TEST,""),Object(_.a)(i,ae.AVALANCHE_MAIN,""),i),pe=(u={},Object(_.a)(u,ae.MAINNET,""),Object(_.a)(u,ae.ROPSTEN,""),Object(_.a)(u,ae.RINKEBY,"0xd0A4b78719e44fF94FB57702699c1655Ef6ca5DF"),Object(_.a)(u,ae.GOERLI,""),Object(_.a)(u,ae.KOVAN,""),Object(_.a)(u,ae.GANACHE,"0xcF34FFFBba648719DAe106202674949f1679772B"),Object(_.a)(u,ae.HARMONY_TEST,""),Object(_.a)(u,ae.HARMONY_MAIN,""),Object(_.a)(u,ae.POLYGON_TEST,""),Object(_.a)(u,ae.POLYGON,""),Object(_.a)(u,ae.AVALANCHE_TEST,""),Object(_.a)(u,ae.AVALANCHE_MAIN,""),d={},Object(_.a)(d,ae.MAINNET,""),Object(_.a)(d,ae.ROPSTEN,""),Object(_.a)(d,ae.RINKEBY,"0x8a3FF22C8E4589d73BA48a6Ee01f6Fa21C5F1a46"),Object(_.a)(d,ae.GOERLI,""),Object(_.a)(d,ae.KOVAN,""),Object(_.a)(d,ae.GANACHE,"0x862d71d6E9Be8a7495EfEBa6f2b657b00E629c95"),Object(_.a)(d,ae.HARMONY_TEST,""),Object(_.a)(d,ae.HARMONY_MAIN,""),Object(_.a)(d,ae.POLYGON_TEST,""),Object(_.a)(d,ae.POLYGON,""),Object(_.a)(d,ae.AVALANCHE_TEST,""),Object(_.a)(d,ae.AVALANCHE_MAIN,""),l={},Object(_.a)(l,ae.MAINNET,""),Object(_.a)(l,ae.ROPSTEN,""),Object(_.a)(l,ae.RINKEBY,"0xc079A93B9852eAa146de2Ea1057c5174ACdaDbCa"),Object(_.a)(l,ae.GOERLI,""),Object(_.a)(l,ae.KOVAN,""),Object(_.a)(l,ae.GANACHE,"0xfB4E7C2FD8Ceb2757D2C4cE4749ebE326fc369D4"),Object(_.a)(l,ae.HARMONY_TEST,""),Object(_.a)(l,ae.HARMONY_MAIN,""),Object(_.a)(l,ae.POLYGON_TEST,""),Object(_.a)(l,ae.POLYGON,""),Object(_.a)(l,ae.AVALANCHE_TEST,""),Object(_.a)(l,ae.AVALANCHE_MAIN,""),b={},Object(_.a)(b,ae.MAINNET,""),Object(_.a)(b,ae.ROPSTEN,""),Object(_.a)(b,ae.RINKEBY,"0x63B788B55cA25ECAf202066651d0287a59Bd8472"),Object(_.a)(b,ae.GOERLI,""),Object(_.a)(b,ae.KOVAN,""),Object(_.a)(b,ae.GANACHE,"0x65CaCA9F2638Fb2B245E9694f00343F0b6CB6F77"),Object(_.a)(b,ae.HARMONY_TEST,""),Object(_.a)(b,ae.HARMONY_MAIN,""),Object(_.a)(b,ae.POLYGON_TEST,""),Object(_.a)(b,ae.POLYGON,""),Object(_.a)(b,ae.AVALANCHE_TEST,""),Object(_.a)(b,ae.AVALANCHE_MAIN,""),j={},Object(_.a)(j,ae.MAINNET,""),Object(_.a)(j,ae.ROPSTEN,""),Object(_.a)(j,ae.RINKEBY,"0x7eEfF2b586793f8399d59b15585d32b6364B4CeE"),Object(_.a)(j,ae.GOERLI,""),Object(_.a)(j,ae.KOVAN,""),Object(_.a)(j,ae.GANACHE,"0x314C824Ea4586798DF8B46121E881Defa40CB47E"),Object(_.a)(j,ae.HARMONY_TEST,""),Object(_.a)(j,ae.HARMONY_MAIN,""),Object(_.a)(j,ae.POLYGON_TEST,""),Object(_.a)(j,ae.POLYGON,""),Object(_.a)(j,ae.AVALANCHE_TEST,""),Object(_.a)(j,ae.AVALANCHE_MAIN,""),f={},Object(_.a)(f,ae.MAINNET,""),Object(_.a)(f,ae.ROPSTEN,""),Object(_.a)(f,ae.RINKEBY,"0xD84AB37f3c7b381e36BCa500fBCfB0699f21696B"),Object(_.a)(f,ae.GOERLI,""),Object(_.a)(f,ae.KOVAN,""),Object(_.a)(f,ae.GANACHE,"0xeD025b5BA14b8f3A085057b9D7Baa13998343aA8"),Object(_.a)(f,ae.HARMONY_TEST,""),Object(_.a)(f,ae.HARMONY_MAIN,""),Object(_.a)(f,ae.POLYGON_TEST,""),Object(_.a)(f,ae.POLYGON,""),Object(_.a)(f,ae.AVALANCHE_TEST,""),Object(_.a)(f,ae.AVALANCHE_MAIN,""),O={},Object(_.a)(O,ae.MAINNET,""),Object(_.a)(O,ae.ROPSTEN,""),Object(_.a)(O,ae.RINKEBY,"0xc95e94250ABB136B4DbdC5726A68747DB65CbcED"),Object(_.a)(O,ae.GOERLI,""),Object(_.a)(O,ae.KOVAN,""),Object(_.a)(O,ae.GANACHE,"0x4a7A5946567672c577EaF2b866BCeBc177E455E8"),Object(_.a)(O,ae.HARMONY_TEST,""),Object(_.a)(O,ae.HARMONY_MAIN,""),Object(_.a)(O,ae.POLYGON_TEST,""),Object(_.a)(O,ae.POLYGON,""),Object(_.a)(O,ae.AVALANCHE_TEST,""),Object(_.a)(O,ae.AVALANCHE_MAIN,""),p={},Object(_.a)(p,ae.MAINNET,""),Object(_.a)(p,ae.ROPSTEN,""),Object(_.a)(p,ae.RINKEBY,"0x581234019E087B6F1d038157e9Ad05E7858C079e"),Object(_.a)(p,ae.GOERLI,""),Object(_.a)(p,ae.KOVAN,""),Object(_.a)(p,ae.GANACHE,"0x4e1Ccf6Bca8d14B670478d8C4e2aEc9f6277A7f5"),Object(_.a)(p,ae.HARMONY_TEST,""),Object(_.a)(p,ae.HARMONY_MAIN,""),Object(_.a)(p,ae.POLYGON_TEST,""),Object(_.a)(p,ae.POLYGON,""),Object(_.a)(p,ae.AVALANCHE_TEST,""),Object(_.a)(p,ae.AVALANCHE_MAIN,""),h={},Object(_.a)(h,ae.MAINNET,""),Object(_.a)(h,ae.ROPSTEN,""),Object(_.a)(h,ae.RINKEBY,"0xBa4FDDeEBd4Dd23fC503a591E41E8D386c1c16c3"),Object(_.a)(h,ae.GOERLI,""),Object(_.a)(h,ae.KOVAN,""),Object(_.a)(h,ae.GANACHE,"0x72a011Aa67F8214a146A162A99B322017ad763fD"),Object(_.a)(h,ae.HARMONY_TEST,""),Object(_.a)(h,ae.HARMONY_MAIN,""),Object(_.a)(h,ae.POLYGON_TEST,""),Object(_.a)(h,ae.POLYGON,""),Object(_.a)(h,ae.AVALANCHE_TEST,""),Object(_.a)(h,ae.AVALANCHE_MAIN,""),m={},Object(_.a)(m,ae.MAINNET,""),Object(_.a)(m,ae.ROPSTEN,""),Object(_.a)(m,ae.RINKEBY,"0x864E2A55d776749A7612D091c4553dA667543F01"),Object(_.a)(m,ae.GOERLI,""),Object(_.a)(m,ae.KOVAN,""),Object(_.a)(m,ae.GANACHE,"0x4d4243f2d605282CBd27C8391f05b77316d1a561"),Object(_.a)(m,ae.HARMONY_TEST,""),Object(_.a)(m,ae.HARMONY_MAIN,""),Object(_.a)(m,ae.POLYGON_TEST,""),Object(_.a)(m,ae.POLYGON,""),Object(_.a)(m,ae.AVALANCHE_TEST,""),Object(_.a)(m,ae.AVALANCHE_MAIN,""),x={},Object(_.a)(x,ae.MAINNET,""),Object(_.a)(x,ae.ROPSTEN,""),Object(_.a)(x,ae.RINKEBY,"0x23ec156efF19ddB55fcBAd0A49488Dd1FB26a041"),Object(_.a)(x,ae.GOERLI,""),Object(_.a)(x,ae.KOVAN,""),Object(_.a)(x,ae.GANACHE,"0xA8EA078cF1D3837a025329c46A4E0F441Cb2eE87"),Object(_.a)(x,ae.HARMONY_TEST,""),Object(_.a)(x,ae.HARMONY_MAIN,""),Object(_.a)(x,ae.POLYGON_TEST,""),Object(_.a)(x,ae.POLYGON,""),Object(_.a)(x,ae.AVALANCHE_TEST,""),Object(_.a)(x,ae.AVALANCHE_MAIN,""),v={},Object(_.a)(v,ae.MAINNET,""),Object(_.a)(v,ae.ROPSTEN,""),Object(_.a)(v,ae.RINKEBY,"0x374a5DEA375320513B630B7cA2946F740A33B90d"),Object(_.a)(v,ae.GOERLI,""),Object(_.a)(v,ae.KOVAN,""),Object(_.a)(v,ae.GANACHE,"0x9A2E533FBa58Ec8b0dA34438154C48E295C80576"),Object(_.a)(v,ae.HARMONY_TEST,""),Object(_.a)(v,ae.HARMONY_MAIN,""),Object(_.a)(v,ae.POLYGON_TEST,""),Object(_.a)(v,ae.POLYGON,""),Object(_.a)(v,ae.AVALANCHE_TEST,""),Object(_.a)(v,ae.AVALANCHE_MAIN,""),N={},Object(_.a)(N,ae.MAINNET,""),Object(_.a)(N,ae.ROPSTEN,""),Object(_.a)(N,ae.RINKEBY,"0x59914E5BBEe0E55119cD2DC2a4e08E18435271A2"),Object(_.a)(N,ae.GOERLI,""),Object(_.a)(N,ae.KOVAN,""),Object(_.a)(N,ae.GANACHE,"0xa7D723BFc4deC341da03E70Af4026B3926b1E8Db"),Object(_.a)(N,ae.HARMONY_TEST,""),Object(_.a)(N,ae.HARMONY_MAIN,""),Object(_.a)(N,ae.POLYGON_TEST,""),Object(_.a)(N,ae.POLYGON,""),Object(_.a)(N,ae.AVALANCHE_TEST,""),Object(_.a)(N,ae.AVALANCHE_MAIN,""),g={},Object(_.a)(g,ae.MAINNET,""),Object(_.a)(g,ae.ROPSTEN,""),Object(_.a)(g,ae.RINKEBY,"0xc71538123fC6FED3607ccBc6D52Cc7882f66f5d0"),Object(_.a)(g,ae.GOERLI,""),Object(_.a)(g,ae.KOVAN,""),Object(_.a)(g,ae.GANACHE,"0x6749b9151B654A77ddA3Fa8f2b259E0E592065F6"),Object(_.a)(g,ae.HARMONY_TEST,""),Object(_.a)(g,ae.HARMONY_MAIN,""),Object(_.a)(g,ae.POLYGON_TEST,""),Object(_.a)(g,ae.POLYGON,""),Object(_.a)(g,ae.AVALANCHE_TEST,""),Object(_.a)(g,ae.AVALANCHE_MAIN,""),E={},Object(_.a)(E,ae.MAINNET,""),Object(_.a)(E,ae.ROPSTEN,""),Object(_.a)(E,ae.RINKEBY,"0x4939D7Ff53AcDbDC1BbC18bDd2F5E5aaD0087Bc9"),Object(_.a)(E,ae.GOERLI,""),Object(_.a)(E,ae.KOVAN,""),Object(_.a)(E,ae.GANACHE,"0x4Df3729e7B952EBE6d18b52132D2A8af2F2D167A"),Object(_.a)(E,ae.HARMONY_TEST,""),Object(_.a)(E,ae.HARMONY_MAIN,""),Object(_.a)(E,ae.POLYGON_TEST,""),Object(_.a)(E,ae.POLYGON,""),Object(_.a)(E,ae.AVALANCHE_TEST,""),Object(_.a)(E,ae.AVALANCHE_MAIN,""),A={},Object(_.a)(A,ae.MAINNET,""),Object(_.a)(A,ae.ROPSTEN,""),Object(_.a)(A,ae.RINKEBY,"0x914eFbA7885f151AAe0665629F33Aff1Aa4Fe65d"),Object(_.a)(A,ae.GOERLI,""),Object(_.a)(A,ae.KOVAN,""),Object(_.a)(A,ae.GANACHE,"0xae02a075290D2efD74F0D3fE2DfE64831320855a"),Object(_.a)(A,ae.HARMONY_TEST,""),Object(_.a)(A,ae.HARMONY_MAIN,""),Object(_.a)(A,ae.POLYGON_TEST,""),Object(_.a)(A,ae.POLYGON,""),Object(_.a)(A,ae.AVALANCHE_TEST,""),Object(_.a)(A,ae.AVALANCHE_MAIN,""),w={},Object(_.a)(w,ae.MAINNET,""),Object(_.a)(w,ae.ROPSTEN,""),Object(_.a)(w,ae.RINKEBY,"0x596ADA187E2374352187479fB12e592Ae3E2f85e"),Object(_.a)(w,ae.GOERLI,""),Object(_.a)(w,ae.KOVAN,""),Object(_.a)(w,ae.GANACHE,""),Object(_.a)(w,ae.HARMONY_TEST,""),Object(_.a)(w,ae.HARMONY_MAIN,""),Object(_.a)(w,ae.POLYGON_TEST,""),Object(_.a)(w,ae.POLYGON,""),Object(_.a)(w,ae.AVALANCHE_TEST,""),Object(_.a)(w,ae.AVALANCHE_MAIN,""),W),he="0x000000000000000000000000000000000000dead",me="0x000000000000000000000000000000000000babe",xe="0x00000000000000000000000000000000000FF1CE",ve="0x00000000000000000000000000000000DECAFBAD",Ne="0x0000000000000000000000000000000000000000",ge="0x0000000000000000000000000000000000004bec",Ee=J,Ae=q&&Object(S.a)(q)?q:Ne}).call(this,"/")},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return Y})),n.d(t,"d",(function(){return W})),n.d(t,"e",(function(){return q}));var r=n(6),a=n(5),c=n(4),s=n(2),o=n.n(s),i=n(23),u=n(14),d=n(1),l=n(12),b=n(28),j=n(46),f=n(9),O=n(57),p=n(11),h=n(62),m=n(36),x=n(16),v=n(73),N=n(35),g=n(51),E=n(27),A=n(53),w=n(0);function _(e){var t,n=e.adapterName,s=e.proposal,_=s.daoProposalVotingAdapter,y=s.snapshotProposal,C=Object(d.useState)(f.f.STANDBY),k=Object(c.a)(C,2),I=k[0],S=k[1],T=Object(d.useState)(),D=Object(c.a)(T,2),R=D[0],P=D[1],L=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),F=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.instance.methods})),M=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi.find((function(e){return"getPriorAmount"===e.name}))})),B=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),G=null===(t=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})))||void 0===t?void 0:t.find((function(e){return"getMemberAddress"===e.name})),V=Object(u.c)((function(e){return e.contracts})),U=Object(x.g)(),Y=U.account,H=U.provider,K=U.web3Instance,W=Object(x.a)(),q=W.txEtherscanURL,z=W.txIsPromptOpen,J=W.txSend,Q=W.txStatus,X=Object(x.c)().average,$=Object(m.f)(),Z=$.isDisabled,ee=$.openWhyDisabledModal,te=$.WhyDisabledModal,ne=null===_||void 0===_?void 0:_.getWeb3VotingAdapterContract().methods,re=I===f.f.AWAITING_CONFIRM||I===f.f.PENDING||Q===f.f.AWAITING_CONFIRM||Q===f.f.PENDING,ae=Q===f.f.FULFILLED&&I===f.f.FULFILLED,ce=re||ae||z;function se(){return(se=Object(a.a)(o.a.mark((function e(){var t,a,c,s,u,d,m,x,v,N,g,E,A,w,_,C,k,I,T,D,R,U,W,q;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,B){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(L){e.next=5;break}throw new Error("No Bank Extension address was found.");case 5:if(G){e.next=7;break}throw new Error("No ABI for `getMemberAddress` was found.");case 7:if(M){e.next=9;break}throw new Error("No ABI for `getPriorAmount` was found.");case 9:if(y){e.next=11;break}throw new Error("No Snapshot proposal was found.");case 11:if(y.votes){e.next=13;break}throw new Error("No Snapshot proposal votes Array was found.");case 13:if(ne){e.next=15;break}throw new Error('No "OffchainVotingContract" methods were found.');case 15:if(K){e.next=17;break}throw new Error("No Web3 instance was found.");case 17:if(F){e.next=19;break}throw new Error("No BankExtension methods were found.");case 19:if(Y){e.next=21;break}throw new Error("No account found.");case 21:return S(f.f.AWAITING_CONFIRM),a=y.idInDAO,c=y.msg.payload.snapshot.toString(),s=Object(b.d)(n,V),e.next=27,F.getPriorAmount(l.y,l.t,c).call();case 27:return u=e.sent,d=Object(p.k)(Number(u)-1,0).map((function(e){return[B,G,[e.toString()]]})),e.next=31,Object(b.l)({calls:d,web3Instance:K});case 31:return m=e.sent,x=m.map((function(e){return[L,M,[e,l.z,c]]})),e.next=35,Object(b.l)({calls:x,web3Instance:K});case 35:return v=e.sent,N=m.map((function(e,t){var n,r=Object.values((null===(n=y.votes)||void 0===n?void 0:n.find((function(t){return Object(p.j)(e)===Object(p.j)(Object.values(t)[0].msg.payload.metadata.memberAddress)})))||{})[0];return Object(i.createVote)({proposalId:a,sig:(null===r||void 0===r?void 0:r.sig)||"0x",timestamp:r?Number(r.msg.timestamp):0,voteYes:(null===r||void 0===r?void 0:r.msg.payload.choice)===i.VoteChoicesIndex.Yes,weight:r?v[t]:"0"})})),e.next=39,Object(i.prepareVoteResult)({actionId:s,chainId:l.h,daoAddress:B,votes:N});case 39:return g=e.sent,E=g.voteResultTree,A=g.result,w=E.getHexRoot(),_=A[A.length-1],e.next=46,ne.getBadNodeError(B,a,!0,w,c,0,u,_).call();case 46:if(C=e.sent,Number(C)===j.a.OK){e.next=49;break}throw new Error("Cannot submit off-chain voting result. Node has an error: ".concat(j.a[C],"."));case 49:return k=Object(i.getVoteResultRootDomainDefinition)(B,s,l.h),I=k.domain,T=k.types,D=JSON.stringify({domain:I,message:{root:w},primaryType:h.a,types:T}),e.next=53,Object(i.signMessage)(H,Y,D);case 53:return R=e.sent,e.next=56,Object(O.b)(w);case 56:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=60;break}e.t1=void 0===t;case 60:if(!e.t1){e.next=64;break}e.t3=void 0,e.next=65;break;case 64:e.t3=t.merkle_root.length;case 65:if(e.t0=e.t3,e.t0){e.next=68;break}e.t0="";case 68:if(e.t4=e.t0,e.t4>0){e.next=73;break}return e.next=73,Object(O.g)({actionId:s,chainId:l.h,steps:A,merkleRoot:w,verifyingContract:B});case 73:return S(f.f.FULFILLED),U=[B,a,w,Y,_,R],W=Object(r.a)({from:Y||""},X?{gasPrice:X}:null),e.next=78,J("submitVoteResult",ne,U,W);case 78:e.next=85;break;case 80:e.prev=80,e.t5=e.catch(0),q=e.t5,P(q),S(f.f.REJECTED);case 85:case"end":return e.stop()}}),e,null,[[0,80]])})))).apply(this,arguments)}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"proposaldetails__button",disabled:Z||ce,onClick:Z||ce?function(){}:function(){return se.apply(this,arguments)},children:re?Object(w.jsx)(A.a,{}):ae?"Done":"Submit Vote Result"}),Object(w.jsx)(N.a,{error:R,renderText:"Something went wrong"}),ce&&Object(w.jsx)("div",{className:"form__submit-status-container",children:function(){if(Q===f.f.AWAITING_CONFIRM||I===f.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(Q){case f.f.PENDING:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(v.a,{intervalMs:2e3,messages:h.b,useFirstItemStart:!0,render:function(e){return Object(w.jsx)(E.a,{children:e},e)}}),Object(w.jsx)(g.a,{url:q,isPending:!0})]});case f.f.FULFILLED:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:"Result submitted!"}),Object(w.jsx)(g.a,{url:q})]});default:return null}}()}),Z&&Object(w.jsx)("button",{className:"button--help-centered",onClick:ee,children:"Why is submitting disabled?"})]}),Object(w.jsx)(te,{title:"Why is this disabled?"})]})}var y=n(3),C=n(10),k=n(44),I=C.a.FULFILLED,S=C.a.PENDING,T=C.a.REJECTED;function D(e){var t=e.adapterName,n=e.proposal,s=n.snapshotProposal,l=n.refetchProposalOrDraft,b=Object(d.useState)(),j=Object(c.a)(b,2),p=j[0],h=j[1],v=Object(d.useState)(),g=Object(c.a)(v,2),E=g[0],A=g[1],_=Object(d.useRef)({alreadyVotedMessage:"",fetchingMembershipAtSnapshotMessage:"",noMembershipAtSnapshotMessage:"",undeterminedMembershipAtSnapshotMessage:""}),C=Object(u.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.memberAddress})),D=Object(x.g)().account,R=Object(k.h)(),P=R.signAndSendVote,L=R.voteDataStatus,F=Object(O.c)(null===s||void 0===s?void 0:s.votes,D||""),M=Object(m.f)(),B=M.isDisabled,G=M.openWhyDisabledModal,V=M.setOtherDisabledReasons,U=M.WhyDisabledModal,Y=Object(m.g)(C,null===s||void 0===s?void 0:s.msg.payload.snapshot),H=Y.hasMembershipAtSnapshot,K=Y.memberUnitsAtSnapshotError,W=Y.memberUnitsAtSnapshotStatus,z=null===s||void 0===s?void 0:s.msg.payload.snapshot,J=(null===s||void 0===s?void 0:s.idInDAO)||"",Q=(null===s||void 0===s?void 0:s.idInSnapshot)||"",X=L===f.f.AWAITING_CONFIRM||L===f.f.PENDING,$=L===f.f.FULFILLED,Z=B||(X||$),ee=X?p:void 0,te=E||K;function ne(){return(ne=Object(a.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,J){e.next=3;break}throw new Error("No proposal hash was found.");case 3:if(Q){e.next=5;break}throw new Error("No proposal ID was found.");case 5:return h(i.VoteChoices[n]),e.next=8,P(Object(r.a)(Object(r.a)({},t?{adapterName:t}:void 0),{},{partialVoteData:{choice:n},proposalIdInDAO:J,proposalIdInSnapshot:Q}));case 8:l(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),a=e.t0,A(a);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function re(e,t){_.current=Object(r.a)(Object(r.a)({},_.current),{},Object(y.a)({},e,t))}return Object(d.useEffect)((function(){re("alreadyVotedMessage",F?"You have already voted.":""),re("noMembershipAtSnapshotMessage",H||W!==I?"":"You were not a member when the proposal was sponsored at snapshot ".concat(z,".")),re("fetchingMembershipAtSnapshotMessage",W===S?"We are waiting on your membership status for when this proposal was sponsored at snapshot ".concat(z,"."):""),re("undeterminedMembershipAtSnapshotMessage",W===T?"Something went wrong. Your membership status when this proposal was sponsored at snapshot ".concat(z," cannot be determined."):""),V(Object.values(_.current))}),[H,W,V,z,F]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(q,{onClick:Z?function(){}:function(e){return ne.apply(this,arguments)},buttonProps:{disabled:Z,"aria-disabled":Z},voteChosen:F,voteProgress:ee}),B&&Object(w.jsx)("button",{className:"button--help-centered",onClick:G,children:"Why is voting disabled?"}),Object(w.jsx)(N.a,{error:te,renderText:"Something went wrong"}),Object(w.jsx)(U,{title:"Why is voting disabled?"})]})}var R=n(50);function P(e){var t=e.countdownFrom,n=e.renderCountdownText,r=e.showDaysOnly,a=Object(p.g)(t),c=a.days,s=a.hours,o=a.minutes,i=a.seconds,u=null===n||void 0===n?void 0:n({days:c,formatTimePeriod:L,hours:s,minutes:o,seconds:i,showDaysOnly:r}),d=L;return u||(c>2&&r?"~".concat(c," days"):c>0?"".concat(d(c,"day")," : ").concat(d(s,"hr")," : ").concat(d(o,"min")):s>0?"".concat(d(s,"hr")," : ").concat(d(o,"min")):o>0?"".concat(d(o,"min")," : ").concat(d(i,"sec")):Object(w.jsx)("span",{className:"color-brightsalmon",children:d(i,"sec")}))}function L(e,t){var n=0===e||e>1?"".concat(t,"s"):t;return"".concat(e," ").concat(n)}function F(e){var t=e.endedLabel,n=e.endLabel,r=e.endPeriodMs,a=e.renderCountdownText,s=e.startLabel,o=e.startPeriodMs,i=Object(d.useState)(),u=Object(c.a)(i,2),l=u[0],b=u[1],j=new Date(o),f=new Date(r);return Object(d.useEffect)((function(){var e=setInterval((function(){b(new Date)}),1e3);return function(){clearInterval(e)}}),[]),l?l<j?Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{className:"votingstatus",children:s||"Starts:"})," ",Object(w.jsx)("span",{className:"votingstatus__timer",children:P({countdownFrom:j,renderCountdownText:a,showDaysOnly:!0})})]})}):l<f?Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{className:"votingstatus",children:n||"Ends:"})," ",Object(w.jsx)("span",{className:"votingstatus__timer",children:P({countdownFrom:f,renderCountdownText:a})})]})}):Object(w.jsx)("div",{children:Object(w.jsx)("span",{className:"votingstatus",children:t||"Ended"})}):null}function M(e){return Object(w.jsxs)("svg",Object(r.a)(Object(r.a)({width:"20px",height:"20px",viewBox:"0 0 21 24",version:"1.1"},e),{},{children:[Object(w.jsx)("defs",{children:Object(w.jsx)("path",{d:"M17.6516,6.408 C19.8162,8.36 21,11.02 21,13.844 C21,19.458 16.303,24 10.5,24 C4.69616,24 0,19.457 0,13.844 C0,8.506 4.22802,4.197 9.53077,3.731 L9.53077,1.875 L6.68768,1.875 C6.15238,1.875 5.71845,1.455 5.71845,0.938 C5.71845,0.42 6.15238,0 6.68768,0 L14.3123,0 C14.8476,0 15.2815,0.42 15.2815,0.938 C15.2815,1.455 14.8476,1.875 14.3123,1.875 L11.46923,1.875 L11.46923,3.731 C13.1316,3.877 14.7126,4.398 16.1059,5.252 L17.4392,3.962 C17.8177,3.596 18.4314,3.596 18.8099,3.962 C19.1885,4.328 19.1885,4.922 18.8099,5.288 L17.6516,6.408 Z M10.5,22.125 C15.2208,22.125 19.0615,18.41 19.0615,13.844 C19.0615,9.277 15.2209,5.562 10.5,5.562 C5.77913,5.562 1.93846,9.277 1.93846,13.844 C1.93846,18.41 5.77917,22.125 10.5,22.125 Z M11.46923,8.312 L11.46923,13.844 C11.46923,14.362 11.03531,14.781 10.5,14.781 C9.96469,14.781 9.53077,14.362 9.53077,13.844 L9.53077,8.312 C9.53077,7.795 9.96469,7.375 10.5,7.375 C11.03531,7.375 11.46923,7.795 11.46923,8.312 Z",id:"path-1"})}),Object(w.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(w.jsxs)("g",{id:"Group-70",children:[Object(w.jsx)("mask",{id:"mask-2",fill:"white",children:Object(w.jsx)("use",{xlinkHref:"#path-1"})}),Object(w.jsx)("use",{id:"Clip-69",fill:"currentColor",xlinkHref:"#path-1"})]})})]}))}function B(e){var t=e.hasVotingEnded,n=e.noUnits,r=e.renderStatus,a=e.renderTimer,c=e.showPercentages,s=void 0===c||c,o=e.totalUnits,i=e.yesUnits,u=r();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"votingstatus-container",children:[Object(w.jsx)(M,{"aria-label":"Proposal status",role:"img"}),u&&Object(w.jsx)("span",{className:"votingstatus",children:u}),a(F)]}),Object(w.jsx)(W,{yesUnits:i,noUnits:n,totalUnits:o,votingExpired:t,showPercentages:s})]})}function G(e){var t=e.days,n=e.hours,r=e.formatTimePeriod;if(t>0)return"".concat(r(t,"day")," : ").concat(r(n,"hr"))}var V=Object(w.jsx)("span",{children:"Grace period:"}),U={duration:150};function Y(e){var t=e.countdownGracePeriodEndMs,n=void 0===t?0:t,r=e.countdownGracePeriodStartMs,a=void 0===r?0:r,c=e.countdownVotingEndMs,s=void 0===c?0:c,o=e.countdownVotingStartMs,i=void 0===o?0:o,u=e.onGracePeriodChange,l=e.onVotingPeriodChange,b=e.proposalId,j=e.renderStatus,f=e.votingResult,O=Object(m.h)(i/1e3,s/1e3),p=O.hasTimeEnded,h=O.hasTimeStarted,x=O.timeStartEndInitReady,v=Object(m.h)(a/1e3,n/1e3),N=v.hasTimeEnded,g=v.hasTimeStarted,E=v.timeStartEndInitReady,A=E&&g&&!N,_=(null===f||void 0===f?void 0:f.No.units)||0,y=(null===f||void 0===f?void 0:f.totalUnits)||0,C=(null===f||void 0===f?void 0:f.Yes.units)||0,k=p?C>_:void 0,I=null===j||void 0===j?void 0:j({countdownGracePeriodEndMs:n,countdownGracePeriodStartMs:a,countdownVotingEndMs:s,countdownVotingStartMs:i,didVotePassSimpleMajority:k,gracePeriodStartEndInitReady:E,hasGracePeriodEnded:N,hasGracePeriodStarted:g,hasVotingEnded:p,hasVotingStarted:h,votingStartEndInitReady:x});return Object(d.useEffect)((function(){x&&(null===l||void 0===l||l({hasVotingStarted:h,hasVotingEnded:p,proposalId:b,votingStartEndInitReady:x}))}),[p,h,l,b,x]),Object(d.useEffect)((function(){E&&(null===u||void 0===u||u({hasGracePeriodEnded:N,hasGracePeriodStarted:g,proposalId:b,gracePeriodStartEndInitReady:E}))}),[E,N,g,u,b]),Object(w.jsx)(B,{hasVotingEnded:p,noUnits:_,renderStatus:function(){return I||(x?A?"":k?"Approved":!1===k?"Failed":void 0:Object(w.jsx)(R.a,{ariaLabel:"Getting off-chain voting status",fadeInProps:U,intervalMs:200}))},renderTimer:function(e){return x&&h&&!p?Object(w.jsx)(e,{endPeriodMs:s,renderCountdownText:G,startPeriodMs:i}):A?Object(w.jsx)(e,{endLabel:V,endPeriodMs:n||0,renderCountdownText:G,startPeriodMs:a||0}):void 0},totalUnits:y,yesUnits:C})}function H(e){return Object(w.jsx)("svg",Object(r.a)(Object(r.a)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"18",height:"18",viewBox:"0 0 512 512"},e),{},{children:Object(w.jsx)("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}))}function K(e,t){return(e/t*100).toFixed(2).replace(/\.00$/,"")}function W(e){var t=e.yesUnits,n=void 0===t?0:t,r=e.noUnits,a=void 0===r?0:r,c=e.totalUnits,s=e.votingExpired,o=e.showPercentages,i=c?K(n,c):"0",u=c?K(a,c):"0";return Object(w.jsxs)("div",{className:"votingbar-container",children:[Object(w.jsxs)("div",{className:"votingbar",children:[Object(w.jsx)("div",{className:"votingbar__segment--yes","aria-label":"".concat(i,"% yes votes"),style:{width:"".concat(i,"%")}}),Object(w.jsx)("div",{className:"votingbar__segment--no","aria-label":"".concat(u,"% no votes"),style:{width:"".concat(u,"%")}})]}),Object(w.jsx)("div",{className:"votingbar__percentages",children:o&&Object(w.jsxs)(w.Fragment,{children:[s&&n>a&&Object(w.jsx)("span",{className:"yes-check",children:Object(w.jsx)(H,{"aria-label":"Vote has passed"})}),Object(w.jsxs)("span",{className:"yes-percent",children:[i,"%"]}),Object(w.jsxs)("span",{className:"no-percent",children:[u,"%"]}),s&&n<=a&&Object(w.jsx)("span",{className:"no-check",children:Object(w.jsx)(H,{"aria-label":"Vote has failed"})})]})})]})}function q(e){var t=e.buttonProps,n=e.onClick,a=e.voteChosen,c=e.voteProgress;function s(e){return c===e?{"aria-label":"Voting ".concat(e," \u2026")}:{}}function o(e){return c===e?Object(w.jsx)(A.a,{"aria-label":"Currently voting ".concat(e,"..."),role:"img"}):a===e?"Voted ".concat(e):"Vote ".concat(e)}function u(e){return function(){n(e)}}function d(e,t){return a===e?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(H,{"aria-label":t})," "]}):""}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("button",Object(r.a)(Object(r.a)(Object(r.a)({},t),s(i.VoteChoices.Yes)),{},{className:"proposaldetails__button",onClick:u(i.VoteChoices.Yes),children:[d(i.VoteChoices.Yes,"You voted yes"),o(i.VoteChoices.Yes)]})),Object(w.jsxs)("button",Object(r.a)(Object(r.a)(Object(r.a)({},t),s(i.VoteChoices.No)),{},{className:"proposaldetails__button",onClick:u(i.VoteChoices.No),children:[d(i.VoteChoices.No,"You voted no"),o(i.VoteChoices.No)]}))]})}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return l.a}));n(33);var r=n(5),a=n(4),c=n(2),s=n.n(c),o=n(1);var i=n(12),u=n(28),d=n(11),l=n(100),b=n(9);function j(){var e=Object(o.useState)(),t=Object(a.a)(e,2),n=t[0],c=t[1],j=Object(o.useState)(""),f=Object(a.a)(j,2),O=f[0],p=f[1],h=Object(o.useState)(!1),m=Object(a.a)(h,2),x=m[0],v=m[1],N=Object(o.useState)(),g=Object(a.a)(N,2),E=g[0],A=g[1],w=Object(o.useState)(b.f.STANDBY),_=Object(a.a)(w,2),y=_[0],C=_[1],k=Object(l.a)().networkId;function I(e){return function(t){C(b.f.PENDING),v(!1),k&&k!==i.b.GANACHE&&p("".concat(i.m[k],"/tx/").concat(t)),e&&e(t)}}function S(){return S=Object(r.a)(s.a.mark((function e(){var t,n,r,a,o,i,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Object(d.c)(),e.prev=1,c(void 0),p(""),C(b.f.AWAITING_CONFIRM),v(!0),n=l.length,r=new Array(n),a=0;a<n;a++)r[a]=l[a];return r[4]=I(r[4]),e.next=10,u.b.apply(void 0,r);case 10:return o=e.sent,A(o),C(b.f.FULFILLED),t(),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(1),i=e.t0,c(i),C(b.f.REJECTED),v(!1),t(),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,17]])}))),S.apply(this,arguments)}return{txError:n,txEtherscanURL:O,txIsPromptOpen:x,txReceipt:E,txSend:function(){return S.apply(this,arguments)},txStatus:y}}function f(e){var t=Object(o.useState)([]),n=Object(a.a)(t,2),c=n[0],i=n[1],d=Object(o.useState)([]),l=Object(a.a)(d,2),b=l[0],j=l[1],f=Object(o.useCallback)((function(e,t){return O.apply(this,arguments)}),[]);function O(){return O=Object(r.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=j,e.next=4,Object(u.m)(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),j(t);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),O.apply(this,arguments)}return Object(o.useEffect)((function(){e&&c.length&&f(c,e)}),[c,f,e]),[b,i]}var O=n(6),p=n(17),h=n(135),m=n.n(h),x=n(10),v=n(36),N="https://ethgasstation.info/json/ethgasAPI.json";function g(e){return Object(p.toWei)(new m.a((e/10).toFixed(4)).toString(),"Gwei")}var E={average:void 0,fast:void 0,fastest:void 0,safeLow:void 0};function A(e){var t=e||{},c=t.ignoreEnvironment,u=void 0!==c&&c,d=t.noRunIfEIP1559,b=void 0!==d&&d,j=Object(o.useState)(E),f=Object(a.a)(j,2),p=f[0],h=f[1],m=Object(o.useState)(),A=Object(a.a)(m,2),w=A[0],_=A[1],y=Object(o.useState)(x.a.STANDBY),C=Object(a.a)(y,2),k=C[0],I=C[1],S=Object(l.a)().web3Instance,T=Object(v.a)(),D=T.abortController,R=T.isMountedRef,P=!1===u&&"production"!==i.j,L=Object(o.useCallback)((function(){return F.apply(this,arguments)}),[D,R,b,P,S]);function F(){return(F=Object(r.a)(s.a.mark((function e(){var t,r,a,c,o,i,u,d,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==D&&void 0!==D&&D.signal){e.next=2;break}return e.abrupt("return");case 2:if(S){e.next=4;break}return e.abrupt("return");case 4:if(_(void 0),!P){e.next=8;break}return I(x.a.FULFILLED),e.abrupt("return");case 8:if(!b){e.next=18;break}return e.next=11,Promise.resolve().then(n.bind(null,461));case 11:return t=e.sent,r=t.isEIP1559Compatible,e.next=15,r(S);case 15:if(!e.sent){e.next=18;break}return I(x.a.FULFILLED),e.abrupt("return");case 18:return I(x.a.PENDING),e.prev=19,e.next=22,fetch(N,{signal:D.signal});case 22:if((a=e.sent).ok){e.next=25;break}throw new Error("Something went wrong while getting the latest gas price.");case 25:return e.next=27,a.json();case 27:if(c=e.sent,R.current){e.next=30;break}return e.abrupt("return");case 30:o=c.average,i=c.fast,u=c.fastest,d=c.safeLow,h({average:g(o),fast:g(i),fastest:g(u),safeLow:g(d)}),I(x.a.FULFILLED),e.next=43;break;case 35:if(e.prev=35,e.t0=e.catch(19),R.current){e.next=39;break}return e.abrupt("return");case 39:l=e.t0,_(l),h(E),I(x.a.REJECTED);case 43:case"end":return e.stop()}}),e,null,[[19,35]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){return L(),function(){null===D||void 0===D||D.abort()}}),[D,L]),Object(O.a)(Object(O.a)({},p),{},{gasPriceError:w,gasPriceStatus:k})}var w=n(14),_=n(25);function y(){var e=Object(w.b)(),t=Object(o.useCallback)((function(e){return n.apply(this,arguments)}),[e]);function n(){return(n=Object(r.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.web3Instance,t.prev=1,t.next=4,e(Object(_.H)(r));case 4:return t.next=6,e(Object(_.B)(r));case 6:return t.next=8,e(Object(_.C)(r));case 8:return t.next=10,e(Object(_.D)(r));case 10:return t.next=12,e(Object(_.E)(r));case 12:return t.next=14,e(Object(_.F)(r));case 14:return t.next=16,e(Object(_.G)(r));case 16:return t.next=18,e(Object(_.I)(r));case 18:return t.next=20,e(Object(_.J)(r));case 20:return t.next=22,e(Object(_.K)(r));case 22:return t.next=24,e(Object(_.L)(r));case 24:return t.next=26,e(Object(_.M)(r));case 26:return t.next=28,e(Object(_.N)(r));case 28:return t.next=30,e(Object(_.O)(r));case 30:return t.next=32,e(Object(_.P)(r));case 32:return t.next=34,e(Object(_.Q)(r));case 34:return t.next=36,e(Object(_.R)(r));case 36:return t.next=38,e(Object(_.S)(r));case 38:return t.next=40,e(Object(_.T)(r));case 40:return t.next=42,e(Object(_.U)(r));case 42:t.next=47;break;case 44:throw t.prev=44,t.t0=t.catch(1),t.t0;case 47:case"end":return t.stop()}}),t,null,[[1,44]])})))).apply(this,arguments)}return t}function C(){var e=Object(l.a)(),t=e.networkId,n=e.connected,r=Object(o.useState)(),c=Object(a.a)(r,2),s=c[0],u=c[1];return Object(o.useEffect)((function(){n&&t!==i.h?u(new Error("Please connect to the ".concat(i.d[i.h],"."))):u(void 0)}),[n,t]),{defaultChain:i.h,defaultChainError:s,isDefaultChain:t===i.h}}var k=n(1050),I=!1;function S(e,t){var n=Object(o.useState)(I),c=Object(a.a)(n,2),i=c[0],u=c[1],l=Object(v.e)().isMountedRef,b=Object(o.useCallback)((function(e,t){return j.apply(this,arguments)}),[l]);function j(){return j=Object(r.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.i)(t,new k.a(n));case 3:if(r=e.sent,l.current){e.next=6;break}return e.abrupt("return");case 6:u(r),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(0),l.current){e.next=13;break}return e.abrupt("return");case 13:u(I);case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),j.apply(this,arguments)}return Object(o.useEffect)((function(){t&&e&&b(e,t)}),[e,b,t]),i}n(194)},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(){return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"times","data-prefix":"fal",viewBox:"0 0 320 512",children:Object(r.jsx)("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"})})}},164:function(e,t,n){"use strict";function r(e){if(void 0!==e&&!isNaN(e))return"0x".concat(Math.abs(e).toString(16))}n.d(t,"a",(function(){return r}))},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return p}));var r,a=n(6),c=n(5),s=n(4),o=n(2),i=n.n(o),u=n(1),d=n(14),l=n(17),b=n(16),j=n(12),f=n(25),O=n(11);function p(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.CouponOnboardingContract})),n=Object(u.useState)(),o=Object(s.a)(n,2),p=o[0],h=o[1],m=Object(u.useState)(r.STANDBY),x=Object(s.a)(m,2),v=x[0],N=x[1],g=Object(b.g)(),E=g.account,A=g.web3Instance,w=Object(b.e)().defaultChainError,_=Object(b.c)().average,y=Object(b.a)(),C=y.txError,k=y.txEtherscanURL,I=y.txIsPromptOpen,S=y.txSend,T=y.txStatus,D=Object(d.b)();function R(){return(R=Object(c.a)(i.a.mark((function n(c,s){var o,u,d,b;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!w){n.next=3;break}throw new Error("Wrong network connected.");case 3:if(c){n.next=5;break}throw new Error("No coupon data was found.");case 5:if(E){n.next=7;break}throw new Error("No account found.");case 7:if(e){n.next=9;break}throw new Error("No DAO Registry contract was found.");case 9:if(t){n.next=11;break}throw new Error("No Coupon Onboarding contract was found.");case 11:if(A){n.next=13;break}throw new Error("No Web3 instance was found.");case 13:return N(r.PENDING),o=Object(l.toChecksumAddress)(c.recipient),u=[e.contractAddress,o,String(c.amount),Number(c.nonce),c.signature],d=Object(a.a)({from:E||""},_?{gasPrice:_}:null),n.next=19,S("redeemCoupon",t.instance.methods,u,d);case 19:if(!n.sent){n.next=32;break}return n.next=23,fetch("".concat(j.e,"/api/coupon/redeem"),{method:"PATCH",body:JSON.stringify({signature:c.signature}),headers:{"Content-Type":"application/json"}});case 23:if(n.sent.ok){n.next=26;break}throw new Error("Something went wrong while updating the coupon.");case 26:if(N(r.FULFILLED),Object(O.j)(c.recipient)!==Object(O.j)(E)){n.next=32;break}return n.next=30,D(Object(f.A)({account:E,daoRegistryContract:e,web3Instance:A}));case 30:return n.next=32,P(s);case 32:n.next=39;break;case 34:n.prev=34,n.t0=n.catch(0),b=n.t0,h(b),N(r.REJECTED);case 39:case"end":return n.stop()}}),n,null,[[0,34]])})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return{isInProcessOrDone:v===r.PENDING||v===r.FULFILLED,redeemCoupon:function(e,t){return R.apply(this,arguments)},submitError:p,submitStatus:v,txStatus:T,txError:C,txEtherscanURL:k,txIsPromptOpen:I}}!function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},190:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(6),a=n(4),c=n(5),s=n(2),o=n.n(s),i=n(48),u=n(28),d=n(9),l=n(11),b="SET_CONNECTED_MEMBER",j="CLEAR_CONNECTED_MEMBER";function f(e){var t=e.account,n=e.daoRegistryContract,r=e.web3Instance;return function(){var e=Object(c.a)(o.a.mark((function e(c){var s,b,j,f,h,m,x,v,N,g,E,A,w,_,y,C,k,I,S,T,D,R,P,L,F,M;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===n||void 0===n?void 0:n.contractAddress,b=null===n||void 0===n?void 0:n.instance,j=null===n||void 0===n?void 0:n.abi.find((function(e){return"getAddressIfDelegated"===e.name})),f=null===n||void 0===n?void 0:n.abi.find((function(e){return"members"===e.name})),h=null===n||void 0===n?void 0:n.abi.find((function(e){return"isActiveMember"===e.name})),m=null===n||void 0===n?void 0:n.abi.find((function(e){return"getCurrentDelegateKey"===e.name})),t&&s&&b&&j&&m&&h&&f){e.next=9;break}return c(p()),e.abrupt("return");case 9:return e.prev=9,e.next=12,Object(u.l)({calls:[[s,j,[t]],[s,f,[t]],[s,h,[s,t]],[s,m,[t]]],web3Instance:r});case 12:x=e.sent,v=Object(a.a)(x,4),N=v[0],g=v[1],E=v[2],A=v[3],w=Object(u.i)(d.d.EXISTS,g),_=E||w?A:i.a,y=E||w?N:i.a,C=Object(l.j)(t)===Object(l.j)(y)&&Object(l.j)(t)!==Object(l.j)(_),c(O({delegateKey:_,isAddressDelegated:C,isActiveMember:E,memberAddress:y})),e.next=61;break;case 25:return e.prev=25,e.t0=e.catch(9),e.prev=27,e.next=30,Object(u.l)({calls:[[s,j,[t]],[s,f,[t]],[s,m,[t]]],web3Instance:r});case 30:return k=e.sent,I=Object(a.a)(k,3),S=I[0],T=I[1],D=I[2],R=!1,e.prev=36,e.next=39,b.methods.isActiveMember(s,t).call();case 39:R=e.sent,e.next=50;break;case 42:if(e.prev=42,e.t1=e.catch(36),!e.t1.message.includes("call with your delegate key")){e.next=49;break}R=!1,e.next=50;break;case 49:throw e.t1;case 50:P=Object(u.i)(d.d.EXISTS,T),L=R||P?D:i.a,F=R||P?S:i.a,M=Object(l.j)(t)===Object(l.j)(F)&&Object(l.j)(t)!==Object(l.j)(L),c(O({delegateKey:L,isAddressDelegated:M,isActiveMember:R,memberAddress:F})),e.next=61;break;case 57:throw e.prev=57,e.t2=e.catch(27),c(p()),e.t2;case 61:case"end":return e.stop()}}),e,null,[[9,25],[27,57],[36,42]])})));return function(t){return e.apply(this,arguments)}}()}function O(e){return Object(r.a)({type:b},e)}function p(){return{type:j}}},191:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r="CONNECT_MODAL_CLOSE",a="CONNECT_MODAL_OPEN";function c(){return{type:r}}function s(){return{type:a}}},194:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return N}));var r,a,c,s=n(5),o=n(4),i=n(6),u=n(2),d=n.n(u),l=n(1),b=n(67),j=n.n(b),f=n(497),O=n.n(f),p=n(10),h=n(12),m=n(37);!function(e){e.DARK="dark",e.LIGHT="light"}(r||(r={})),function(e){e[e.CONNECT_WEB3MODAL=0]="CONNECT_WEB3MODAL",e[e.DEACTIVATE_PROVIDER_WEB3MODAL=1]="DEACTIVATE_PROVIDER_WEB3MODAL",e[e.ERROR_WEB3MODAL=2]="ERROR_WEB3MODAL",e[e.INITIAL_CACHED_CONNECTOR_CHECK_STATUS=3]="INITIAL_CACHED_CONNECTOR_CHECK_STATUS",e[e.NEW_WEB3MODAL=4]="NEW_WEB3MODAL",e[e.UPDATE_ACCOUNT=5]="UPDATE_ACCOUNT"}(a||(a={})),function(e){e.CONNECT="CONNECT",e.DISCONNECT="DISCONNECT"}(c||(c={}));var x={};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.CONNECT_WEB3MODAL:var c=r||{},s=c.provider,o=c.networkId,u=c.account,d=c.connected,l=c.web3Instance;return Object(i.a)(Object(i.a)({},e),{},{account:u,connected:d,networkId:o,provider:s,web3Instance:l});case a.DEACTIVATE_PROVIDER_WEB3MODAL:return x;case a.ERROR_WEB3MODAL:var b=r||{},j=b.error;return Object(i.a)(Object(i.a)({},e),{},{error:j});case a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS:var f=r||{},O=f.initialCachedConnectorCheckStatus;return Object(i.a)(Object(i.a)({},e),{},{initialCachedConnectorCheckStatus:O});case a.NEW_WEB3MODAL:var p=r||{},h=p.web3Modal;return{web3Modal:h};case a.UPDATE_ACCOUNT:var m=r||{},v=m.account;return Object(i.a)(Object(i.a)({},e),{},{account:v});default:return x}}function N(e){var t,n,r=e.defaultChain,u=e.defaultTheme,b=e.onBeforeConnect,f=e.onBeforeDisconnect,x=e.providerOptions,N=Object(l.useReducer)(v,{initialCachedConnectorCheckStatus:p.a.STANDBY}),g=Object(o.a)(N,2),E=g[0],A=g[1],w=u,_=r||h.h,y=Object(l.useCallback)(S,[b,E.web3Modal]),C=Object(l.useCallback)((function(e){var t,n;if(null===(t=E.web3Modal)||void 0===t||!t.cachedProvider)return;y(null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider)}),[y,null===(t=E.web3Modal)||void 0===t?void 0:t.cachedProvider]);function k(e){var t=Object(o.a)(e,1)[0];A({type:a.UPDATE_ACCOUNT,payload:{account:t}})}function I(){return(I=Object(s.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS,"string"===typeof t){e.next=3;break}return e.abrupt("return");case 3:if(A({type:r,payload:{initialCachedConnectorCheckStatus:p.a.PENDING}}),!t){e.next=7;break}return e.next=7,n(t);case 7:A({type:r,payload:{initialCachedConnectorCheckStatus:p.a.FULFILLED}});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(d.a.mark((function e(t){var n,r,s,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E.web3Modal){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E.web3Modal.connectTo(t);case 5:return n=e.sent,r=new j.a(n),e.next=9,r.eth.getAccounts();case 9:return s=e.sent,i=Object(o.a)(s,1),u=i[0],e.next=14,null===b||void 0===b?void 0:b();case 14:return e.t0=A,e.t1=a.CONNECT_WEB3MODAL,e.t2=u,e.next=19,r.eth.net.getId();case 19:e.t3=e.sent,e.t4=n,e.t5=r,e.t6={account:e.t2,connected:!0,networkId:e.t3,provider:e.t4,web3Instance:e.t5},e.t7={type:e.t1,payload:e.t6},(0,e.t0)(e.t7),e.next=30;break;case 27:e.prev=27,e.t8=e.catch(0),A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:t,error:new Error("Failed to connect to ".concat(t,".")),type:c.CONNECT}}});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function D(){return(D=Object(s.a)(d.a.mark((function e(){var t,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=E.provider)||void 0===t||null===(n=t.close)||void 0===n?void 0:n.call(t);case 3:if(e.t0=E.web3Modal,!e.t0){e.next=7;break}return e.next=7,E.web3Modal.clearCachedProvider();case 7:return e.next=9,null===f||void 0===f?void 0:f();case 9:A({type:a.DEACTIVATE_PROVIDER_WEB3MODAL}),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(0),s=(null===(r=E.web3Modal)||void 0===r?void 0:r.cachedProvider)||"",A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:s,error:new Error("Failed to disconnect from ".concat(s||"provider",".")),type:c.DISCONNECT}}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){var e,t,n=E.provider;return null===n||void 0===n||null===(e=n.on)||void 0===e||e.call(n,"accountsChanged",k),null===n||void 0===n||null===(t=n.on)||void 0===t||t.call(n,"chainChanged",C),function(){var e,t;null===n||void 0===n||null===(e=n.removeListener)||void 0===e||e.call(n,"accountsChanged",k),null===n||void 0===n||null===(t=n.removeListener)||void 0===t||t.call(n,"chainChanged",C)}}),[C,E.provider]),Object(l.useEffect)((function(){E.web3Modal||A({type:a.NEW_WEB3MODAL,payload:{web3Modal:new O.a({cacheProvider:!0,network:m.c[m.b[_]],providerOptions:x,theme:w})}})}),[x,E.web3Modal,_,w]),Object(l.useEffect)((function(){var e;E.initialCachedConnectorCheckStatus!==p.a.FULFILLED&&E.initialCachedConnectorCheckStatus!==p.a.PENDING&&function(e,t){I.apply(this,arguments)}(null===(e=E.web3Modal)||void 0===e?void 0:e.cachedProvider,y)}),[y,E.initialCachedConnectorCheckStatus,null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider]),Object(i.a)(Object(i.a)({},E),{},{connectWeb3Modal:S,disconnectWeb3Modal:function(){return D.apply(this,arguments)},providerOptions:x})}},195:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),a=n(4),c=n(1),s=n(1029),o=n(108),i=n(511),u=n(0);function d(e){var t=e.copySuccessResetMs,n=void 0===t?3e3:t,d=e.render,l=e.textToCopy,b=void 0===l?"":l,j=e.tooltipProps,f=Object(i.a)(b,{successDuration:n}),O=Object(a.a)(f,2),p=O[0],h=O[1];Object(c.useEffect)((function(){m.current&&(p&&o.a.show(m.current),!p&&x.current&&o.a.show(m.current))}),[p]);var m=Object(c.useRef)(null),x=Object(c.useRef)(!1),v=Object(c.useRef)(Object(s.a)());return Object(u.jsxs)(u.Fragment,{children:[d({elementRef:m,isCopied:p,setCopied:h,tooltipID:v.current}),Object(u.jsx)(o.a,Object(r.a)(Object(r.a)({delayShow:200,effect:"solid"},j),{},{afterHide:function(e){var t;x.current=!1,null===j||void 0===j||null===(t=j.afterHide)||void 0===t||t.call(j,e)},afterShow:function(e){var t;x.current=!0,null===j||void 0===j||null===(t=j.afterShow)||void 0===t||t.call(j,e)},id:v.current}))]})}},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(74);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return"---";if(!Object(r.a)(e))return e;var n=e.substring(0,t),a=e.substring(e.length-4);return"".concat(n,"...").concat(a)}},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),a=n(2),c=n.n(a),s=n(67),o=n.n(s);function i(e,t){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(r=o.a.utils.sha3(t)){e.next=6;break}throw new Error("No sha3 extension name was returned.");case 6:return e.next=8,n.methods.getExtensionAddress(r).call();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}},225:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(6),a="SET_SUBGRAPH_NETWORK_STATUS";function c(e){return Object(r.a)({type:a},e)}},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(6),c=n(1),s=n(27),o=n(0),i=["",".",".","."],u={position:"absolute"},d={height:1,width:1};function l(e){var t=e.ariaLabel,n=e.intervalMs,l=void 0===n?1e3:n,b=e.fadeInProps,j=Object(a.a)(Object(a.a)({},b),{},{inline:!0}),f=Object(c.useState)(1),O=Object(r.a)(f,2),p=O[0],h=O[1];return Object(c.useEffect)((function(){var e=setInterval((function(){return h((function(e){return(e+1)%i.length}))}),l);return function(){clearInterval(e)}}),[l]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("span",{"aria-label":t,style:u,children:[Object(o.jsx)("span",{children:p>=0&&i[0]}),Object(o.jsx)("span",{children:p>=1&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[1]}))}),Object(o.jsx)("span",{children:p>=2&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[2]}))}),Object(o.jsx)("span",{children:p>=3&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[3]}))})]}),Object(o.jsx)("span",{style:d,children:"\xa0"})]})}},227:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(33),a=n(5),c=n(6),s=n(4),o=n(2),i=n.n(o),u=n(1),d=n(14),l=n(23),b=n(10),j=n(28),f=n(12),O=n(62),p=n(44),h=n(16),m=n(36),x=n(9),v=n(73),N=n(35),g=n(51),E=n(27),A=n(53),w=n(0),_=b.a.FULFILLED,y=x.f.AWAITING_CONFIRM,C=x.f.FULFILLED,k=x.f.PENDING,I=O.c;function S(e){var t=e.checkApplicant,n=e.proposal,o=n.snapshotDraft,b=n.snapshotProposal,x=n.refetchProposalOrDraft,S=b||{msg:{payload:{}}},T=S.address,D=void 0===T?"":T,R=S.msg,P=R.payload,L=P.choices,F=void 0===L?I:L,M=P.name,B=void 0===M?"":M,G=P.body,V=void 0===G?"":G,U=P.start,Y=void 0===U?0:U,H=P.end,K=void 0===H?0:H,W=P.snapshot,q=void 0===W?0:W,z=R.timestamp,J=void 0===z?"":z,Q=S.sig,X=void 0===Q?"":Q,$=Object(u.useState)(((null===b||void 0===b?void 0:b.sig.length)||"")>0),Z=Object(s.a)($,2),ee=Z[0],te=Z[1],ne=Object(u.useRef)({body:V,choices:F,end:K,name:B,sig:X,snapshot:q,space:f.x||"",start:Y,submitter:D,timestamp:J}),re=Object(u.useState)(),ae=Object(s.a)(re,2),ce=ae[0],se=ae[1],oe=Object(u.useRef)({invalidApplicantMessage:""}),ie=Object(d.c)((function(e){return e.contracts})),ue=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),de=Object(h.g)(),le=de.account,be=de.web3Instance,je=Object(h.a)(),fe=je.txEtherscanURL,Oe=je.txIsPromptOpen,pe=je.txSend,he=je.txStatus,me=Object(h.c)().average,xe=Object(m.f)(),ve=xe.isDisabled,Ne=xe.openWhyDisabledModal,ge=xe.WhyDisabledModal,Ee=xe.setOtherDisabledReasons,Ae=Object(p.i)(),we=Ae.proposalSignAndSendStatus,_e=Ae.signAndSendProposal,ye=Object(p.a)(t),Ce=ye.checkApplicantError,ke=ye.checkApplicantInvalidMsg,Ie=ye.checkApplicantStatus,Se=ye.isApplicantValid,Te=he===y||he===k||we===y||we===k,De=ee?he===C:he===C&&we===C,Re=Te||De||Oe;function Pe(){return(Pe=Object(a.a)(i.a.mark((function e(){var t,n,a,s,u,d,f,O,p,h,m,v,N,g,E,A,w,_,y,C,k,I,S,T,D,R,P,L,F,M,B,G;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ue){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(s=(null===(t=o||b)||void 0===t?void 0:t.actionId)||"",u=Object(j.e)(s,ie)){e.next=7;break}throw Error("No contract was found for action id ".concat(s,"."));case 7:if(d=(null===(n=o||b)||void 0===n?void 0:n.idInDAO)||"",f=null===(a=(null===o||void 0===o?void 0:o.msg.payload)||(null===b||void 0===b?void 0:b.msg.payload))||void 0===a?void 0:a.metadata.submitActionArgs,ee||!o){e.next=19;break}return O=o.msg,p=O.payload,h=p.name,m=p.body,v=p.metadata,N=O.timestamp,e.next=13,_e({partialProposalData:{name:h,body:m,metadata:v,timestamp:N},adapterAddress:u.contractAddress,type:l.SnapshotType.proposal});case 13:g=e.sent,E=g.data,A=g.signature,w=g.submitter,ne.current={body:E.payload.body,choices:E.payload.choices,end:E.payload.end,name:E.payload.name,sig:A,snapshot:E.payload.snapshot,space:E.space,start:E.payload.start,submitter:w,timestamp:E.timestamp},te(!0);case 19:return _=ne.current,y=_.body,C=_.choices,k=_.end,I=_.name,S=_.sig,T=_.snapshot,D=_.space,R=_.start,P=_.submitter,L=_.timestamp,F=Object(l.prepareVoteProposalData)({payload:{body:y,choices:C,end:k,name:I,snapshot:T.toString(),start:R},submitter:P,sig:S,space:D,timestamp:parseInt(L)},be),M=[ue,d].concat(Object(r.a)(f||[]),[F]),B=Object(c.a)({from:le||""},me?{gasPrice:me}:null),e.next=25,pe("submitProposal",u.instance.methods,M,B);case 25:x(),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),G=e.t0,se(G);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){t&&Ie===_&&(!Se&&ke&&(oe.current=Object(c.a)(Object(c.a)({},oe.current),{},{invalidApplicantMessage:ke})),Ee(Object.values(oe.current)))}),[t,ke,Ie,Se,Ee]),Ce&&console.warn("Error checking if the applicant address is valid: ".concat(Ce.message)),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"proposaldetails__button",disabled:ve||Re,onClick:ve||Re?function(){}:function(){return Pe.apply(this,arguments)},children:Te?Object(w.jsx)(A.a,{}):De?"Done":"Sponsor"}),Object(w.jsx)(N.a,{error:ce,renderText:"Something went wrong"}),Re&&Object(w.jsx)("div",{className:"form__submit-status-container",children:function(){if(he===y||we===y)return"Awaiting your confirmation\u2026";switch(he){case k:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(v.a,{intervalMs:2e3,messages:O.b,useFirstItemStart:!0,render:function(e){return Object(w.jsx)(E.a,{children:e},e)}}),Object(w.jsx)(g.a,{url:fe,isPending:!0})]});case C:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:"Proposal submitted!"}),Object(w.jsx)(g.a,{url:fe})]});default:return null}}()}),ve&&Object(w.jsx)("button",{className:"button--help-centered",onClick:Ne,children:"Why is sponsoring disabled?"})]}),Object(w.jsx)(ge,{title:"Why is sponsoring disabled?"})]})}},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return f}));var r=n(4),a=n(1),c=n(67),s=n.n(c),o=n(194),i=n(10),u=n(12),d=n(11),l=n(16),b=n(0),j=Object(a.createContext)({});function f(e){var t,n=e.children,c=e.defaultChain,f=e.defaultTheme,O=void 0===f?o.a.DARK:f,p=e.onBeforeConnect,h=e.onBeforeDisconnect,m=e.providerOptions,x=Object(a.useRef)(new s.a(new s.a.providers.WebsocketProvider(u.l))),v=Object(a.useState)(),N=Object(r.a)(v,2),g=N[0],E=N[1],A={defaultChain:c,defaultTheme:O,onBeforeConnect:p,onBeforeDisconnect:h,providerOptions:m},w=Object(o.b)(A),_=w.account,y=w.connected,C=w.connectWeb3Modal,k=w.disconnectWeb3Modal,I=w.error,S=w.initialCachedConnectorCheckStatus,T=w.networkId,D=void 0===T?g:T,R=w.provider,P=void 0===R?null===(t=x.current)||void 0===t?void 0:t.currentProvider:R,L=w.web3Instance,F=void 0===L?x.current:L,M=w.web3Modal,B=Object(l.b)(F),G=Object(r.a)(B,2),V=G[0],U=G[1],Y=Object(r.a)(V,1)[0],H=Y&&Object(d.j)(Y)!==Object(d.j)(_)?Y:void 0;Object(a.useEffect)((function(){var e;y||S!==i.a.FULFILLED||(null===(e=x.current)||void 0===e||e.eth.net.getId().then(E).catch((function(){return E(void 0)})))}),[y,S]),Object(a.useEffect)((function(){_&&U([_])}),[_,U]);var K={account:_,accountENS:H,connected:y,connectWeb3Modal:C,disconnectWeb3Modal:k,error:I,initialCachedConnectorCheckStatus:S,networkId:D,provider:P,providerOptions:m,web3Instance:F,web3Modal:M};return Object(b.jsx)(j.Provider,{value:K,children:n})}},25:function(e,t,n){"use strict";n.d(t,"A",(function(){return r.d})),n.d(t,"w",(function(){return r.c})),n.d(t,"y",(function(){return a.c})),n.d(t,"z",(function(){return a.d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return I})),n.d(t,"p",(function(){return S})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return D})),n.d(t,"s",(function(){return R})),n.d(t,"t",(function(){return P})),n.d(t,"u",(function(){return L})),n.d(t,"v",(function(){return F})),n.d(t,"x",(function(){return M})),n.d(t,"D",(function(){return B})),n.d(t,"G",(function(){return G})),n.d(t,"H",(function(){return V})),n.d(t,"Q",(function(){return H})),n.d(t,"C",(function(){return K})),n.d(t,"S",(function(){return W})),n.d(t,"J",(function(){return q})),n.d(t,"O",(function(){return z})),n.d(t,"B",(function(){return J})),n.d(t,"I",(function(){return Q})),n.d(t,"R",(function(){return X})),n.d(t,"M",(function(){return $})),n.d(t,"L",(function(){return Z})),n.d(t,"E",(function(){return ee})),n.d(t,"T",(function(){return te})),n.d(t,"F",(function(){return ne})),n.d(t,"N",(function(){return re})),n.d(t,"P",(function(){return ae})),n.d(t,"K",(function(){return ce})),n.d(t,"U",(function(){return se})),n.d(t,"V",(function(){return ue.b}));var r=n(190),a=n(191),c=n(6),s=n(70),o=n(5),i=n(2),u=n.n(i),d=n(9),l=n(12),b=n(28),j=n(40),f=n(224),O=["type"],p="CLEAR_CONTRACTS",h="CONTRACT_BANK_ADAPTER",m="CONTRACT_BANK_EXTENSION",x="CONTRACT_BANK_FACTORY",v="CONTRACT_CONFIGURATION",N="CONTRACT_COUPON_ONBOARDING",g="CONTRACT_DAO_FACTORY",E="CONTRACT_DAO_REGISTRY",A="CONTRACT_DAO_REGISTRY_ADAPTER",w="CONTRACT_DISTRIBUTE",_="CONTRACT_ERC20_EXTENSION",y="CONTRACT_FINANCING",C="CONTRACT_GUILDKICK",k="CONTRACT_KYC_ONBOARDING",I="CONTRACT_MANAGING",S="CONTRACT_NFT_EXTENSION",T="CONTRACT_ONBOARDING",D="CONTRACT_RAGEQUIT",R="CONTRACT_TRIBUTE",P="CONTRACT_TRIBUTE_NFT",L="CONTRACT_VOTING",F="CONTRACT_VOTING_OP_ROLLUP";function M(){return{type:p}}function B(e){return function(){var t=Object(o.a)(u.a.mark((function t(r){var a,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(13).then(n.t.bind(null,1060,3));case 4:a=t.sent,c=a.default,s=c,o=l.a[l.h],i=new e.eth.Contract(s,o),r(oe({type:x,abi:s,contractAddress:o,instance:i}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function G(e){return function(){var t=Object(o.a)(u.a.mark((function t(r){var a,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(16).then(n.t.bind(null,1061,3));case 4:a=t.sent,c=a.default,s=c,o=l.f[l.h],i=new e.eth.Contract(s,o),r(oe({type:g,abi:s,contractAddress:o,instance:i}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function V(e){return function(){var t=Object(o.a)(u.a.mark((function t(r){var a,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=12;break}return t.next=4,n.e(17).then(n.t.bind(null,1062,3));case 4:if(a=t.sent,c=a.default,s=c,o=l.g){t.next=10;break}throw new Error("No DAO Registry contract address was found.");case 10:i=new e.eth.Contract(s,o),r(oe({type:E,abi:s,contractAddress:o,instance:i}));case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}function U(e,t){return ie({actionType:L,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.VotingContract,contractAddress:t,lazyImport:function(){return n.e(2).then(n.t.bind(null,1063,3))},web3Instance:e})}function Y(e,t){return ie({actionType:F,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.OffchainVotingContract,contractAddress:t,lazyImport:function(){return n.e(1).then(n.t.bind(null,1064,3))},web3Instance:e})}function H(e,t){return ie({actionType:T,adapterNameForRedux:j.a.ONBOARDING,adapterOrExtensionName:d.a.onboarding,contractAddress:t,lazyImport:function(){return n.e(27).then(n.t.bind(null,1065,3))},web3Instance:e})}function K(e,t){return ie({actionType:m,adapterNameForRedux:j.b.BANK,adapterOrExtensionName:d.c.bank,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(12).then(n.t.bind(null,1066,3))},web3Instance:e})}function W(e,t){return ie({actionType:R,adapterNameForRedux:j.a.TRIBUTE,adapterOrExtensionName:d.a.tribute,contractAddress:t,lazyImport:function(){return n.e(29).then(n.t.bind(null,1067,3))},web3Instance:e})}function q(e,t){return ie({actionType:w,adapterNameForRedux:j.a.DISTRIBUTE,adapterOrExtensionName:d.a.distribute,contractAddress:t,lazyImport:function(){return n.e(19).then(n.t.bind(null,1068,3))},web3Instance:e})}function z(e,t){return ie({actionType:I,adapterNameForRedux:j.a.MANAGING,adapterOrExtensionName:d.a.managing,contractAddress:t,lazyImport:function(){return n.e(24).then(n.t.bind(null,1069,3))},web3Instance:e})}function J(e,t){return ie({actionType:h,adapterNameForRedux:j.a.BANK,adapterOrExtensionName:d.a.bank,contractAddress:t,lazyImport:function(){return n.e(11).then(n.t.bind(null,1070,3))},web3Instance:e})}function Q(e,t){return ie({actionType:A,adapterNameForRedux:j.a.DAO_REGISTRY,adapterOrExtensionName:d.a.dao_registry,contractAddress:t,lazyImport:function(){return n.e(18).then(n.t.bind(null,1071,3))},web3Instance:e})}function X(e,t){return ie({actionType:D,adapterNameForRedux:j.a.RAGEQUIT,adapterOrExtensionName:d.a.ragequit,contractAddress:t,lazyImport:function(){return n.e(28).then(n.t.bind(null,1072,3))},web3Instance:e})}function $(e,t){return ie({actionType:C,adapterNameForRedux:j.a.GUILDKICK,adapterOrExtensionName:d.a.guildkick,contractAddress:t,lazyImport:function(){return n.e(22).then(n.t.bind(null,1073,3))},web3Instance:e})}function Z(e,t){return ie({actionType:y,adapterNameForRedux:j.a.FINANCING,adapterOrExtensionName:d.a.financing,contractAddress:t,lazyImport:function(){return n.e(21).then(n.t.bind(null,1074,3))},web3Instance:e})}function ee(e,t){return ie({actionType:v,adapterNameForRedux:j.a.CONFIGURATION,adapterOrExtensionName:d.a.configuration,contractAddress:t,lazyImport:function(){return n.e(14).then(n.t.bind(null,1075,3))},web3Instance:e})}function te(e,t){return ie({actionType:P,adapterNameForRedux:j.a.TRIBUTE_NFT,adapterOrExtensionName:d.a.tribute_nft,contractAddress:t,lazyImport:function(){return n.e(30).then(n.t.bind(null,1076,3))},web3Instance:e})}function ne(e,t){return ie({actionType:N,adapterNameForRedux:j.a.COUPON_ONBOARDING,adapterOrExtensionName:d.a.coupon_onboarding,contractAddress:t,lazyImport:function(){return n.e(15).then(n.t.bind(null,1077,3))},web3Instance:e})}function re(e,t){return ie({actionType:k,adapterNameForRedux:j.a.KYC_ONBOARDING,adapterOrExtensionName:d.a.kyc_onboarding,contractAddress:t,lazyImport:function(){return n.e(23).then(n.t.bind(null,1078,3))},web3Instance:e})}function ae(e,t){return ie({actionType:S,adapterNameForRedux:j.b.NFT,adapterOrExtensionName:d.c.nft,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(26).then(n.t.bind(null,1079,3))},web3Instance:e})}function ce(e,t){return ie({actionType:_,adapterNameForRedux:j.b.ERC20,adapterOrExtensionName:d.c.erc20,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(20).then(n.t.bind(null,1080,3))},web3Instance:e})}function se(e,t){return function(){var n=Object(o.a)(u.a.mark((function n(r,a){var c,s,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=29;break}if(a().contracts.DaoRegistryContract){n.next=6;break}return console.warn("Please init the DaoRegistry contract before the voting contract."),n.abrupt("return");case 6:if(c="",!(s=t||"")){n.next=12;break}return n.next=11,Object(b.h)(s,e);case 11:c=n.sent;case 12:if(s||c){n.next=19;break}return n.next=15,Object(b.c)(d.a.voting,null===(o=a().contracts.DaoRegistryContract)||void 0===o?void 0:o.instance);case 15:return s=n.sent,n.next=18,Object(b.h)(s,e);case 18:c=n.sent;case 19:n.t0=c,n.next="VotingContract"===n.t0?22:"OffchainVotingContract"===n.t0?25:28;break;case 22:return n.next=24,U(e,s)(r,a);case 24:return n.abrupt("return",n.sent);case 25:return n.next=27,Y(e,s)(r,a);case 27:return n.abrupt("return",n.sent);case 28:throw new Error("Voting contract name could not be found.");case 29:n.next=34;break;case 31:n.prev=31,n.t1=n.catch(0),console.warn("The voting contract could not be found in the DAO. Are you sure you meant to add this contract's ABI?");case 34:case"end":return n.stop()}}),n,null,[[0,31]])})));return function(e,t){return n.apply(this,arguments)}}()}function oe(e){var t=e.type,n=Object(s.a)(e,O);return Object(c.a)({type:t},n)}function ie(e){var t=e.actionType,n=e.adapterNameForRedux,r=e.adapterOrExtensionName,a=e.contractAddress,c=e.isExtension,s=void 0!==c&&c,i=e.lazyImport,d=e.web3Instance;return function(){var e=Object(o.a)(u.a.mark((function e(c,o){var l,j,O,p,h,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:if(O=e.sent,p=O.default,h=p,e.t0=a,e.t0){e.next=18;break}if(!s){e.next=14;break}return e.next=11,Object(f.a)(r,null===(l=o().contracts.DaoRegistryContract)||void 0===l?void 0:l.instance);case 11:e.t1=e.sent,e.next=17;break;case 14:return e.next=16,Object(b.c)(r,null===(j=o().contracts.DaoRegistryContract)||void 0===j?void 0:j.instance);case 16:e.t1=e.sent;case 17:e.t0=e.t1;case 18:m=e.t0,c(oe({type:t,abi:h,contractAddress:m,adapterOrExtensionName:n,instance:new d.eth.Contract(h,m)})),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(0),console.warn('The contract "'.concat(r,"\" could not be found in the DAO. Are you sure you meant to add this contract's ABI?"));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}()}var ue=n(225)},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a=(n(1),n(1030)),c=n(0),s=function(e){return{transition:"opacity ".concat(e.duration||300,"ms cubic-bezier(0, 0.69, 0.32, 0.64)"),opacity:0}},o={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};function i(e){var t=e.inline;return Object(c.jsx)(a.a,{appear:!0,in:void 0===e.show||e.show,timeout:e.duration||300,children:function(n){return t?Object(c.jsx)("span",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children}):Object(c.jsx)("div",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children})}})}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return P})),n.d(t,"l",(function(){return F})),n.d(t,"m",(function(){return K}));var r=n(33),a=n(6),c=n(5),s=n(2),o=n.n(s),i=n(12),u=n(11),d=n(164);function l(){return b.apply(this,arguments)}function b(){return b=Object(c.a)(o.a.mark((function e(){var t,n,c,s,b,j,f,O,p,h,m,x,v,N,g=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.length>0&&void 0!==g[0]?g[0]:{fromBlock:0},c=g.length>1&&void 0!==g[1]?g[1]:{},s=Object(u.f)(i.b.MAINNET)){e.next=5;break}throw new Error("No Alchemy URL was found.");case 5:return b=n.fromBlock,j=void 0===b?0:b,f=n.maxCount,O=void 0===f?1e3:f,p=Object(d.a)(n.toBlock)||"latest",h={id:0,jsonrpc:"2.0",method:"alchemy_getAssetTransfers",params:[Object(a.a)(Object(a.a)({},n),{},{fromBlock:Object(d.a)(j),maxCount:Object(d.a)(O),toBlock:p})]},e.next=10,fetch(s,{body:JSON.stringify(h),headers:{"Content-Type":"application/json"},method:"POST",signal:null===c||void 0===c||null===(t=c.abortController)||void 0===t?void 0:t.signal});case 10:if((m=e.sent).ok){e.next=13;break}throw new Error("Something went wrong while fetching alchemy_getAssetTransfers.");case 13:return e.next=15,m.json();case 15:if(x=e.sent,v=x.result,N=Object(r.a)(v.transfers),!v.pageKey){e.next=27;break}return e.t0=N.push,e.t1=N,e.t2=r.a,e.next=24,l(Object(a.a)(Object(a.a)({},n),{},{pageKey:v.pageKey}));case 24:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 27:return e.abrupt("return",N);case 28:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var j=n(135),f=n.n(j);function O(e,t,n,r,a){return p.apply(this,arguments)}function p(){return p=Object(c.a)(o.a.mark((function e(t,n,s,i,u){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(o.a.mark((function e(c,d){var l,b,j,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=f.a,b=n[t],e.next=5,b.apply(void 0,Object(r.a)(s)).estimateGas({from:i.from,value:i.value});case 5:return j=e.sent,O=new l(j).decimalPlaces(0,f.a.ROUND_DOWN).toNumber(),e.next=9,b.apply(void 0,Object(r.a)(s)).send(Object(a.a)(Object(a.a)({},i),{},{gas:O})).on("transactionHash",(function(e){u&&u(e)})).on("receipt",(function(e){c(e)})).on("error",(function(e){d(e)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),d(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var h=n(67),m=n.n(h);function x(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(r=m.a.utils.sha3(t)){e.next=6;break}throw new Error("No sha3 adapter name was returned.");case 6:return e.next=8,n.methods.getAdapterAddress(r).call();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var N,g=n(9);function E(e){try{var t=null===e||void 0===e?void 0:e.contractAddress;if(!t)throw new Error("Contract address was not found in the store.");return t}catch(n){throw n}}function A(e,t){try{switch(e){case g.a.configuration:return"";case g.a.distribute:return E(t.DistributeContract);case g.a.financing:case g.a.guildkick:return"";case g.a.kyc_onboarding:return E(t.KycOnboardingContract);case g.a.managing:return E(t.ManagingContract);case g.a.onboarding:return E(t.OnboardingContract);case g.a.ragequit:return"";case g.a.tribute:return E(t.TributeContract);case g.a.tribute_nft:return E(t.TributeNFTContract);case g.a.voting:return E(t.VotingContract);default:throw new Error("Contract address was not found in the store.")}}catch(n){throw n}}function w(e,t){try{var n=Object.values(t).find((function(t){return(null===t||void 0===t?void 0:t.contractAddress)&&Object(u.j)(t.contractAddress)===Object(u.j)(e)}));if(!n)throw new Error("Contract was not found in the store.");return n}catch(r){throw r}}function _(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(o.a.mark((function e(t,n,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(a=m.a.utils.sha3(n),r&&(c=new m.a,a=m.a.utils.sha3(c.eth.abi.encodeParameters(["address","bytes32"],[r,m.a.utils.sha3(n)]))),a){e.next=7;break}throw new Error("No sha3 config key was returned.");case 7:return e.next=9,t.methods.getAddressConfiguration(a).call();case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function C(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(o.a.mark((function e(t,n,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(a=m.a.utils.sha3(n),r&&(c=new m.a,a=m.a.utils.sha3(c.eth.abi.encodeParameters(["address","bytes32"],[r,m.a.utils.sha3(n)]))),a){e.next=7;break}throw new Error("No sha3 config key was returned.");case 7:return e.next=9,t.methods.getConfiguration(a).call();case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(e){e.CREATION="CREATION",e.READY="READY"}(N||(N={}));n(224);function I(e,t){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(o.a.mark((function e(t,r){var a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(0).then(n.t.bind(null,1058,3));case 3:return a=e.sent,c=a.default,e.next=7,new r.eth.Contract(c,t).methods.getAdapterName().call();case 7:return s=e.sent,e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function T(e,t){return e===Math.log2(Number(t)+1)-1}n(461);function D(e){return e!==i.q&&e!==i.y&&e!==i.k}var R=n(48);function P(e){return e!==R.a}var L=n(4);function F(e){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(o.a.mark((function e(t){var r,a,c,s,u,d,l,b,j,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blockNumber,a=void 0===r?"latest":r,c=t.calls,s=t.web3Instance,e.next=3,n.e(25).then(n.t.bind(null,1059,3));case 3:if(u=e.sent,d=u.default,i.u){e.next=7;break}throw new Error("No Multicall address was found. Are you sure it is set?");case 7:return e.prev=7,l=new s.eth.Contract(d,i.u),b=l.methods,e.next=11,b.aggregate(c.map((function(e){var t=Object(L.a)(e,3),n=t[0],r=t[1],a=t[2];return[n.toLowerCase(),s.eth.abi.encodeFunctionCall(r,a)]}))).call({},a);case 11:return j=e.sent,f=j.returnData,e.abrupt("return",f.map((function(e,t){var n=c[t][1].outputs||[],r=s.eth.abi.decodeParameters(n,e);return 1===r.__length__&&void 0!==r[0]?r[0]:s.eth.abi.decodeParameters(n||[],e)})));case 16:throw e.prev=16,e.t0=e.catch(7),e.t0;case 19:case"end":return e.stop()}}),e,null,[[7,16]])})))).apply(this,arguments)}var B,G=n(3),V=n(492),U=n.n(V),Y=n(493),H=(B={},Object(G.a)(B,i.b.GOERLI,"0x333Fc8f550043f239a2CF79aEd5e9cF4A20Eb41e"),Object(G.a)(B,i.b.MAINNET,"0x3671aE578E63FdF66ad4F3E12CC0c0d71Ac7510C"),Object(G.a)(B,i.b.RINKEBY,"0x196eC7109e127A353B709a20da25052617295F6f"),Object(G.a)(B,i.b.ROPSTEN,"0x72c33B247e62d0f1927E8d325d0358b8f9971C68"),B);function K(e,t){return W.apply(this,arguments)}function W(){return(W=Object(c.a)(o.a.mark((function e(t,n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=H[i.h])&&t&&t.length){e.next=3;break}return e.abrupt("return",t);case 3:return a=new n.eth.Contract(Y,r),e.next=6,a.methods.getNames(t).call();case 6:return c=e.sent,e.abrupt("return",c.map((function(e,n){return""!==e&&U.a.normalize(e)===e?e:t[n]})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(6),a=n(4),c=n(1),s=n(11),o=n(27),i=n(0);function u(e){var t=e.error,n=e.renderText,u=Object(c.useState)(!1),d=Object(a.a)(u,2),l=d[0],b=d[1],j="function"!==typeof t&&(4001===(null===t||void 0===t?void 0:t.code)||/^(the )?user rejected (the )?request$/g.test(Object(s.j)((null===t||void 0===t?void 0:t.message)||""))),f="string"===typeof n?n:n(),O="string"===typeof n&&"function"!==typeof t&&Object(s.j)(n)===Object(s.j)((null===t||void 0===t?void 0:t.message)||"");return!t||j?null:Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)("p",{className:"error-message",children:f}),t&&!O&&Object(i.jsxs)("details",Object(r.a)(Object(r.a)({},e.detailsProps),{},{children:[Object(i.jsx)("summary",{"aria-expanded":l,className:"error-message",onClick:function(){return b(!l)},style:{cursor:"pointer",outline:"none"},children:Object(i.jsx)("small",{children:"Details"})}),Object(i.jsx)("p",{className:"error-message",children:Object(i.jsx)("small",{children:"function"===typeof t?t():t.message})})]}))]})})}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return V})),n.d(t,"h",(function(){return W}));var r=n(4),a=n(1);function c(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return s.current=!0,!n&&c(new AbortController),function(){s.current=!1,n&&n.abort()}}),[n]),{abortController:n,isMountedRef:s}}var s={count:0};function o(e,t){return"increment"===t.type?{count:e.count+1}:e}function i(){var e=Object(a.useReducer)(o,s),t=Object(r.a)(e,2),n=t[0],c=t[1];return[n.count,c]}var u=n(1055),d=n(14),l=n(117);var b=n(5),j=n(2),f=n.n(j),O=n(10),p=n(28),h=n(16),m=[];function x(e){var t=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),n=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),c=Object(a.useState)(m),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(O.a.STANDBY),l=Object(r.a)(u,2),j=l[0],x=l[1],v=Object(a.useState)(),N=Object(r.a)(v,2),g=N[0],E=N[1],A=Object(h.g)().web3Instance,w=null===n||void 0===n?void 0:n.find((function(e){return"getConfiguration"===e.name}));function _(){return _=Object(b.a)(f.a.mark((function e(t){var n,r,a,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.abi,r=t.configKeys,a=t.contractAddress,c=t.web3Instance,e.prev=1,s=r.map((function(e){return[a,n,[c.utils.sha3(e)||""]]})),E(void 0),x(O.a.PENDING),e.t0=i,e.next=8,Object(p.l)({calls:s,web3Instance:c});case 8:e.t1=e.sent,(0,e.t0)(e.t1),x(O.a.FULFILLED),e.next=19;break;case 13:e.prev=13,e.t2=e.catch(1),o=e.t2,i(m),x(O.a.REJECTED),E(o);case 19:case"end":return e.stop()}}),e,null,[[1,13]])}))),_.apply(this,arguments)}return Object(a.useEffect)((function(){t&&w&&A&&function(e){_.apply(this,arguments)}({abi:w,configKeys:e,contractAddress:t,web3Instance:A})}),[e,t,w,A]),{daoConfigurations:o,daoConfigurationsError:g,daoConfigurationsStatus:j}}var v=n(17),N=n(94),g=n(12);function E(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(d.c)((function(e){return e.subgraphNetworkStatus.status})),c=Object(u.a)(l.a,{variables:{id:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),s=Object(r.a)(c,2),o=s[0],i=s[1],j=i.called,p=i.loading,h=i.data,m=i.error,x=Object(a.useState)(),E=Object(r.a)(x,2),A=E[0],w=E[1],_=Object(a.useState)(),y=Object(r.a)(_,2),C=y[0],k=y[1],I=Object(a.useState)(O.a.STANDBY),S=Object(r.a)(I,2),T=S[0],D=S[1],R=Object(a.useState)(),P=Object(r.a)(R,2),L=P[0],F=P[1],M=Object(a.useCallback)((function(){return G.apply(this,arguments)}),[t]),B=Object(a.useCallback)((function(){try{if(D(O.a.PENDING),h){var e=h.tributeDaos[0],t=e.totalUnits,n=e.totalUnitsIssued;w(Number(t)),k(Number(n)),D(O.a.FULFILLED)}else{if(m)throw new Error("subgraph query error: ".concat(m.message));if("undefined"===typeof h)throw new Error("subgraph query error: data is undefined")}}catch(m){var r=m,a=r.message;console.log(a),M()}}),[h,m,M]);function G(){return(G=Object(b.a)(f.a.mark((function e(){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,D(O.a.PENDING),e.next=6,t.instance.methods.balanceOf(g.y,g.z).call();case 6:return n=e.sent,e.next=9,t.instance.methods.balanceOf(g.q,g.z).call();case 9:r=e.sent,a=Object(v.toBN)(n).sub(Object(v.toBN)(r)),w(Number(n)),k(Number(a)),D(O.a.FULFILLED),e.next=24;break;case 16:e.prev=16,e.t0=e.catch(2),c=e.t0,console.log(c),w(void 0),k(void 0),F(c),D(O.a.REJECTED);case 24:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){j||o()}),[j,o]),Object(a.useEffect)((function(){n===N.a.OK?j&&!p&&null!==e&&void 0!==e&&e.contractAddress&&B():M()}),[null===e||void 0===e?void 0:e.contractAddress,j,M,B,p,n]),{totalUnits:A,totalUnitsError:L,totalUnitsIssued:C,totalUnitsStatus:T}}function A(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),{isMountedRef:e}}var w=n(165),_=n.n(w),y=n(11),C=n(27),k=n(163),I=n(0);function S(e){var t=(e||{}).skipIsActiveMemberCheck,n=void 0!==t&&t,c=Object(a.useState)([]),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(r.a)(u,2),b=l[0],j=l[1],f=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),O=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),p=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),m=Object(h.g)().connected,x=o&&o.find((function(e){return e})),v=function(){if(!m)return"Your wallet is not connected.";if(!p&&!O&&!n)return"Either you are not a member, or your membership is not active.";if(f&&O&&!n)return e=f,"Your member address is delegated to ".concat(Object(y.m)(e,7),". You must use that address.");var e;return x||""}(),N=!!v||!!x,g=!(!N||!v),E=Object(a.useCallback)((function(e){if(!g)return null;var t=e.title;return Object(I.jsx)(_.a,{ariaHideApp:!1,className:"modal-container",isOpen:b,onRequestClose:function(){j(!1)},overlayClassName:"modal-overlay",role:"dialog",style:{overlay:{zIndex:1e3}},children:Object(I.jsx)(C.a,{children:Object(I.jsxs)("div",{className:"modal",children:[Object(I.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(){j(!1)},children:Object(I.jsx)(k.a,{})}),Object(I.jsxs)("div",{className:"card",children:[Object(I.jsx)("h2",{className:"modal__title",children:t||"Why disabled?"}),Object(I.jsx)("p",{children:v})]})]})})})}),[g,v,b]),A=Object(a.useCallback)((function(e){i(e.filter(Boolean))}),[]);return{disabledReason:v,isDisabled:N,openWhyDisabledModal:function(){j(!0)},setOtherDisabledReasons:A,WhyDisabledModal:E}}var T=n(135),D=n.n(T),R=O.a.STANDBY,P=O.a.PENDING,L=O.a.FULFILLED,F=O.a.REJECTED,M="production"===g.j?15e3:5e3;function B(e){return G.apply(this,arguments)}function G(){return G=Object(b.a)(f.a.mark((function e(t){var n,r,a,c,s,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.block,r=t.blockOffset,a=void 0===r?2:r,c=t.isMountedRef,s=t.pollInterval,o=void 0===s?M:s,i=t.web3Instance,e.abrupt("return",new Promise(function(){var e=Object(b.a)(f.a.mark((function e(t,r){var s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e,t){return t-e>=Math.abs(a)},e.prev=1,e.t0=s,e.t1=n,e.next=6,i.eth.getBlockNumber();case 6:if(e.t2=e.sent,!(0,e.t0)(e.t1,e.t2)){e.next=10;break}return t(!0),e.abrupt("return");case 10:e.next=16;break;case 12:return e.prev=12,e.t3=e.catch(1),r(e.t3),e.abrupt("return");case 16:u=setInterval(Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==c&&void 0!==c&&c.current){e.next=4;break}return clearInterval(u),e.abrupt("return");case 4:return e.t0=s,e.t1=n,e.next=8,i.eth.getBlockNumber();case 8:if(e.t2=e.sent,!(0,e.t0)(e.t1,e.t2)){e.next=12;break}clearInterval(u),t(!0);case 12:e.next=18;break;case 14:e.prev=14,e.t3=e.catch(0),clearInterval(u),r(e.t3);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),o);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function V(e,t,n){var c=n||{},s=c.blockCheckOffset,o=c.currentBlockPollIntervalMs,i=Object(d.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.instance.methods})),u=Object(a.useState)(),l=Object(r.a)(u,2),j=l[0],O=l[1],p=Object(a.useState)(!1),m=Object(r.a)(p,2),x=m[0],v=m[1],N=Object(a.useState)(),E=Object(r.a)(N,2),w=E[0],_=E[1],y=Object(a.useState)(R),C=Object(r.a)(y,2),k=C[0],I=C[1],S=Object(h.g)().web3Instance,T=A().isMountedRef,M=Object(a.useCallback)((function(e){return G.apply(this,arguments)}),[T]);function G(){return G=Object(b.a)(f.a.mark((function e(t){var n,r,a,c,s,o,i,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bankExtensionMethods,r=t.blockCheckOffset,a=t.currentBlockPollIntervalMs,c=t.memberAddress,s=t.snapshot,o=t.web3Instance,e.prev=1,_(void 0),I(P),e.next=6,B({block:s,blockOffset:r,isMountedRef:T,pollInterval:a,web3Instance:o});case 6:return e.next=8,n.getPriorAmount(c,g.z,s).call();case 8:if(i=e.sent,T.current){e.next=11;break}return e.abrupt("return");case 11:O(i),v(new D.a(i).isGreaterThan(new D.a(0))),I(L),e.next=25;break;case 16:if(e.prev=16,e.t0=e.catch(1),T.current){e.next=20;break}return e.abrupt("return");case 20:u=e.t0,v(!1),O(void 0),_(u),I(F);case 25:case"end":return e.stop()}}),e,null,[[1,16]])}))),G.apply(this,arguments)}return Object(a.useEffect)((function(){e&&t&&i&&S&&M({bankExtensionMethods:i,blockCheckOffset:s,currentBlockPollIntervalMs:o,memberAddress:e,snapshot:t,web3Instance:S})}),[i,s,o,M,e,t,S]),{hasMembershipAtSnapshot:x,memberUnitsAtSnapshot:j,memberUnitsAtSnapshotError:w,memberUnitsAtSnapshotStatus:k}}n(166);var U=O.a.FULFILLED,Y=O.a.PENDING,H=O.a.STANDBY;function K(e){return Object.values(e).every((function(e){return e===U}))}function W(e,t){var n=Object(a.useRef)({start:H,end:H}),c=Object(a.useState)(!1),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),d=Object(r.a)(u,2),l=d[0],b=d[1],j=Object(a.useState)(K(n.current)),f=Object(r.a)(j,2),O=f[0],p=f[1],h=void 0===e||void 0===t||e<=0||t<=0;return Object(a.useEffect)((function(){if(!o&&!h){p((function(){return n.current.start=Y,K(n.current)}));var t=setInterval((function(){var t=Math.floor(Date.now()/1e3)>(null!==e&&void 0!==e?e:0);i(t),n.current.start!==U&&p((function(){return n.current.start=U,K(n.current)}))}),1e3);return function(){t&&clearInterval(t)}}p((function(){return n.current.start=U,K(n.current)}))}),[o,h,e]),Object(a.useEffect)((function(){if(!l&&!h){p((function(){return n.current.end=Y,K(n.current)}));var e=setInterval((function(){var e=Math.ceil(Date.now()/1e3)>(null!==t&&void 0!==t?t:0);b(e),n.current.end!==U&&p((function(){return n.current.end=U,K(n.current)}))}),1e3);return function(){e&&clearInterval(e)}}p((function(){return n.current.end=U,K(n.current)}))}),[t,l,h]),{hasTimeStarted:o,hasTimeEnded:l,timeStartEndInitReady:O}}},37:function(e,t,n){"use strict";var r,a,c,s;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s})),function(e){e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.RINKEBY=4]="RINKEBY",e[e.ROPSTEN=3]="ROPSTEN",e[e.MAINNET=1]="MAINNET"}(r||(r={})),function(e){e.GOERLI="goerli",e.KOVAN="kovan",e.RINKEBY="rinkeby",e.ROPSTEN="ropsten",e.MAINNET="mainnet"}(a||(a={})),function(e){e.REQUIRED="This field is required.",e.INVALID_BYTES32="The value is not a bytes32.",e.INVALID_BYTES32_ARRAY="The value is not a comma-separated bytes32 format, ie. 0x...,0x...",e.INVALID_EMAIL="The email address is invalid.",e.INVALID_ETHEREUM_ADDRESS="The ethereum address is invalid.",e.INVALID_NUMBER="The value is not a number.",e.INVALID_NUMBER_ARRAY="The value is not a comma-separated number format, ie. 42,5,124"}(c||(c={})),function(e){e.FAILED="Failed",e.PASSED="Passed",e.REQUESTS="Proposals",e.VOTING="Voting"}(s||(s={}))},40:function(e,t,n){"use strict";var r,a,c;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),function(e){e.BANK="bank",e.CONFIGURATION="configuration",e.COUPON_ONBOARDING="coupon-onboarding",e.DAO_REGISTRY="daoRegistry",e.DISTRIBUTE="distribute",e.EXECUTION="execution",e.FINANCING="financing",e.GUILDKICK="guildkick",e.KYC_ONBOARDING="kyc-onboarding",e.MANAGING="managing",e.NFT="nft",e.NONVOTING_ONBOARDING="nonvoting-onboarding",e.OFFCHAINVOTING="offchainvoting",e.ONBOARDING="onboarding",e.RAGEQUIT="ragequit",e.TRIBUTE="tribute",e.TRIBUTE_NFT="tribute-nft",e.VOTING="voting"}(r||(r={})),function(e){e.BANK="bank",e.ERC20="erc20-ext",e.NFT="nft"}(a||(a={})),function(e){e.OffchainVotingContract="OffchainVotingContract",e.VotingContract="VotingContract"}(c||(c={}))},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s}));var r,a,c,s;n(23),n(40);!function(e){e[e.EXISTS=0]="EXISTS",e[e.SPONSORED=1]="SPONSORED",e[e.PROCESSED=2]="PROCESSED"}(r||(r={})),function(e){e.Submit="Submit",e.Sponsor="Sponsor",e.OffchainVoting="OffchainVoting",e.OffchainVotingSubmitResult="OffchainVotingSubmitResult",e.OffchainVotingGracePeriod="OffchainVotingGracePeriod",e.OnchainVoting="OnchainVoting",e.Process="Process",e.Completed="Completed"}(a||(a={})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE",e[e.FAILED=3]="FAILED"}(c||(c={})),function(e){e.Governance="Governance"}(s||(s={}))},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return P})),n.d(t,"f",(function(){return U})),n.d(t,"g",(function(){return Y})),n.d(t,"e",(function(){return ee})),n.d(t,"h",(function(){return re})),n.d(t,"i",(function(){return ae}));var r=n(5),a=n(4),c=n(2),s=n.n(c),o=n(14),i=n(1),u=n(503),d=n.n(u),l=n(10),b=n(28),j=n(11),f=n(16);function O(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),n=Object(i.useState)(),c=Object(a.a)(n,2),u=c[0],O=c[1],p=Object(i.useState)(),h=Object(a.a)(p,2),m=h[0],x=h[1],v=Object(i.useState)(l.a.STANDBY),N=Object(a.a)(v,2),g=N[0],E=N[1],A=Object(i.useState)(),w=Object(a.a)(A,2),_=w[0],y=w[1],C=Object(f.g)().web3Instance,k=d()(e),I=Object(i.useCallback)((function(){return S.apply(this,arguments)}),[e,t,C]);function S(){return(S=Object(r.a)(s.a.mark((function n(){var r,a,c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&C){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,E(l.a.PENDING),r=Object(j.m)(e,7),n.next=7,t.methods.getAddressIfDelegated(e).call();case 7:a=n.sent,Object(b.j)(e)?Object(b.k)(e)?Object(j.j)(e)!==Object(j.j)(a)?(y(!1),x("The applicant address ".concat(r," is already in use as a delegate key. The address must be removed as a delegate before it can become a member."))):(y(!0),x(void 0)):(y(!1),x("The applicant address ".concat(r," is invalid."))):(y(!1),x("The applicant address ".concat(r," is invalid because it is a DAO reserved address."))),E(l.a.FULFILLED),n.next=19;break;case 12:n.prev=12,n.t0=n.catch(2),c=n.t0,y(void 0),x(void 0),O(c),E(l.a.REJECTED);case 19:case"end":return n.stop()}}),n,null,[[2,12]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){k&&!e&&(O(void 0),x(void 0),y(void 0),E(l.a.STANDBY)),e&&I()}),[e,I,k]),{checkApplicantError:u,checkApplicantInvalidMsg:m,checkApplicantStatus:g,isApplicantValid:_}}var p=n(66),h=[];function m(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi.find((function(e){return"proposals"===e.name}))})),n=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),c=Object(i.useState)(h),u=Object(a.a)(c,2),d=u[0],j=u[1],O=Object(i.useState)(l.a.STANDBY),m=Object(a.a)(O,2),x=m[0],v=m[1],N=Object(i.useState)(),g=Object(a.a)(N,2),E=g[0],A=g[1],w=Object(i.useState)(),_=Object(a.a)(w,2),y=_[0],C=_[1],k=Object(i.useState)(),I=Object(a.a)(k,2),S=I[0],T=I[1],D=Object(f.g)().web3Instance,R=Object(p.useQuery)(["daoProposals",S],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==S&&void 0!==S&&S.length&&D){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.l)({calls:S,web3Instance:D});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!(null===S||void 0===S||!S.length)&&!!D}),P=R.data,L=R.error,F=Object(i.useCallback)((function(){return M.apply(this,arguments)}),[P,L,y]);function M(){return(M=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return");case 3:if(y.length){e.next=7;break}return v(l.a.FULFILLED),j([]),e.abrupt("return");case 7:if(v(l.a.PENDING),A(void 0),!L){e.next=11;break}throw L;case 11:P&&(j(y.map((function(e,t){return[e,P[t]]}))),v(l.a.FULFILLED)),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),t=e.t0,j(h),A(t),v(l.a.REJECTED);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){e.length&&y&&t&&n&&D&&F()}),[F,e.length,t,n,y,D]),Object(i.useEffect)((function(){if(e.length&&D){var t=e.filter(D.utils.isHexStrict);C(t)}}),[e,D]),Object(i.useEffect)((function(){if(t&&n&&null!==y&&void 0!==y&&y.length){var e=y.map((function(e){return[n,t,[e]]}));T(e)}}),[t,n,y]),{daoProposals:d,daoProposalsStatus:x,daoProposalsError:E}}var x=n(504),v=n(33),N=n(3),g=n(17),E=n(23),A=n(12),w=n(36),_=n(9);function y(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi})),n=Object(o.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),c=Object(i.useState)([]),u=Object(a.a)(c,2),d=u[0],j=u[1],O=Object(i.useState)(l.a.STANDBY),h=Object(a.a)(O,2),m=h[0],y=h[1],C=Object(i.useState)(),k=Object(a.a)(C,2),I=k[0],S=k[1],T=Object(i.useState)([]),D=Object(a.a)(T,2),R=D[0],P=D[1],L=null===t||void 0===t?void 0:t.find((function(e){return"getPriorAmount"===e.name})),F=Object(f.g)().web3Instance,M=Object(w.e)().isMountedRef,B=Object(p.useQuery)(["votingResultsToSet",R],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&L&&R.length&&F){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(R.map(function(){var e=Object(r.a)(s.a.mark((function e(t){var r,a,c,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===t||void 0===t?void 0:t.msg.payload.snapshot,(c=null===t||void 0===t?void 0:t.idInSnapshot)&&a){e.next=4;break}return e.abrupt("return");case 4:if((o=null===t||void 0===t||null===(r=t.votes)||void 0===r?void 0:r.map((function(e){var t=e[Object.keys(e)[0]];return[t.msg.payload.metadata.memberAddress,t.msg.payload.choice]})))&&o.length){e.next=7;break}return e.abrupt("return");case 7:return i=Object.entries(Object.fromEntries(o)),e.prev=8,e.next=11,U({bankAddress:n,getPriorAmountABI:L,snapshot:a,voterAddressesAndChoices:i,web3Instance:F});case 11:return u=e.sent,e.abrupt("return",[c,u]);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!n&&!!L&&!!R.length&&!!F}),G=B.data,V=B.error,U=Object(i.useCallback)((function(e){return K.apply(this,arguments)}),[]),Y=Object(i.useCallback)((function(){return H.apply(this,arguments)}),[n,L,M,R.length,G,V,F]);function H(){return(H=Object(r.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&L&&R.length&&F){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,y(l.a.PENDING),!V){e.next=6;break}throw V;case 6:if(!G){e.next=13;break}if(t=G.filter((function(e){return e})),M.current){e.next=10;break}return e.abrupt("return");case 10:y(l.a.FULFILLED),j(t),S(void 0);case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(2),M.current){e.next=19;break}return e.abrupt("return");case 19:r=e.t0,y(l.a.REJECTED),j([]),S(r);case 23:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function K(){return K=Object(r.a)(s.a.mark((function e(t){var n,r,c,o,i,u,d,l,j,f,O,p,h,m,w,y,C;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bankAddress,r=t.getPriorAmountABI,c=t.snapshot,o=t.voterAddressesAndChoices,i=t.web3Instance,e.prev=1,u={},Object(N.a)(u,_.e.Yes,{percentage:0,units:0}),Object(N.a)(u,_.e.No,{percentage:0,units:0}),Object(N.a)(u,"totalUnits",0),d=u,l=[n,r,[A.y,A.z,c.toString()]],j=[n,r,[A.q,A.z,c.toString()]],f=o.map((function(e){var t=Object(a.a)(e,1)[0];return[n,r,[t,A.z,c.toString()]]})),O=[l,j].concat(Object(v.a)(f)),e.next=9,Object(b.l)({calls:O,web3Instance:i});case 9:return p=e.sent,h=Object(x.a)(p),m=h[0],w=h[1],y=h.slice(2),C=Object(g.toBN)(m).sub(Object(g.toBN)(w)),y.forEach((function(e,t){var n=E.VoteChoicesIndex[o[t][1]]===E.VoteChoicesIndex[E.VoteChoicesIndex.Yes]?_.e.Yes:_.e.No;d[n].units+=Number(e)})),d[_.e.Yes].percentage=d[_.e.Yes].units/Number(C)*100,d[_.e.No].percentage=d[_.e.No].units/Number(C)*100,d.totalUnits=Number(C),e.abrupt("return",d);case 22:throw e.prev=22,e.t0=e.catch(1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,22]])}))),K.apply(this,arguments)}return Object(i.useEffect)((function(){Y()}),[Y]),Object(i.useEffect)((function(){var t=Array.isArray(e)?e:[e];P(t)}),[e]),{offchainVotingResults:d,offchainVotingResultsError:I,offchainVotingResultsStatus:m}}var C=n(6),k=n(48),I=n(57),S=[];function T(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),c=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),u=Object(f.g)().web3Instance,d=Object(i.useState)(S),j=Object(a.a)(d,2),O=j[0],p=j[1],h=Object(i.useState)(),m=Object(a.a)(h,2),x=m[0],v=m[1],N=Object(i.useState)(l.a.STANDBY),g=Object(a.a)(N,2),E=g[0],A=g[1],w=Object(i.useCallback)((function(){return _.apply(this,arguments)}),[e,c,t,u]);function _(){return _=Object(r.a)(s.a.mark((function a(){var o,i,d,j,f,O,h,m,x,N,g,E,w;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.length&&c&&t&&u){a.next=2;break}return a.abrupt("return");case 2:if((o=e.filter(u.utils.isHexStrict)).length){a.next=7;break}return p(S),A(l.a.FULFILLED),a.abrupt("return");case 7:if(a.prev=7,i=c.find((function(e){return"votingAdapter"===e.name}))){a.next=11;break}throw new Error('No "votingAdapter" ABI function was found in the DAO registry ABI.');case 11:return d=o.map((function(e){return[t,i,[e]]})),A(l.a.PENDING),a.next=15,Object(b.l)({calls:d,web3Instance:u});case 15:return j=a.sent,a.next=18,n.e(0).then(n.t.bind(null,1058,3));case 18:if(f=a.sent,O=f.default,h=O.find((function(e){return"getAdapterName"===e.name}))){a.next=23;break}throw new Error('No "getAdapterName" ABI function was found in the IVoting ABI.');case 23:if(m=o.filter((function(e,t){return j[t]!==k.a})),(x=j.filter((function(e){return e!==k.a}))).length){a.next=29;break}return p(S),A(l.a.FULFILLED),a.abrupt("return");case 29:return N=x.map((function(e){return[e,h,[]]})),a.next=32,Object(b.l)({calls:N,web3Instance:u});case 32:return g=a.sent,a.next=35,Promise.all(m.map(function(){var e=Object(r.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)(g[n]);case 2:return r=e.sent,a=x[n],e.abrupt("return",[t,{votingAdapterName:g[n],votingAdapterAddress:a,getVotingAdapterABI:function(){return r},getWeb3VotingAdapterContract:function(){return new u.eth.Contract(r,a)}}]);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 35:E=a.sent,p(E),A(l.a.FULFILLED),a.next=46;break;case 40:a.prev=40,a.t0=a.catch(7),w=a.t0,A(l.a.REJECTED),p([]),v(w);case 46:case"end":return a.stop()}}),a,null,[[7,40]])}))),_.apply(this,arguments)}return Object(i.useEffect)((function(){w()}),[w]),{proposalsVotingAdapters:O,proposalsVotingAdaptersError:x,proposalsVotingAdaptersStatus:E}}var D="Something went wrong while getting the proposal.",R="Proposal was not found.";function P(e,t){var n,c=Object(i.useState)(),o=Object(a.a)(c,1)[0],u=Object(i.useState)(),d=Object(a.a)(u,2),b=d[0],j=d[1],f=Object(i.useState)(),O=Object(a.a)(f,2),h=O[0],m=O[1],x=Object(i.useState)(!1),v=Object(a.a)(x,2),N=v[0],g=v[1],_=Object(i.useState)(),y=Object(a.a)(_,2),k=y[0],I=y[1],S=Object(i.useState)(l.a.STANDBY),P=Object(a.a)(S,2),L=P[0],F=P[1],M=Object(i.useState)([e]),B=Object(a.a)(M,2),G=B[0],V=B[1],U=Object(i.useState)(l.a.STANDBY),Y=Object(a.a)(U,2),H=Y[0],K=Y[1],W=Object(i.useState)(),q=Object(a.a)(W,2),z=q[0],J=q[1],Q=Object(w.a)(),X=Q.abortController,$=Q.isMountedRef,Z=Object(w.b)(),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],re=T(G),ae=re.proposalsVotingAdapters,ce=re.proposalsVotingAdaptersError,se=re.proposalsVotingAdaptersStatus,oe=Object(p.useQueryClient)(),ie=Object(i.useCallback)((function(){return je.apply(this,arguments)}),[null===X||void 0===X?void 0:X.signal,e,$]),ue=Object(i.useCallback)((function(){return fe.apply(this,arguments)}),[null===X||void 0===X?void 0:X.signal,e,$,t]),de=Object(i.useCallback)((function(){return Oe.apply(this,arguments)}),[ie,ue]),le=h?E.SnapshotType.proposal:b?E.SnapshotType.draft:void 0,be=b||h?{daoProposal:o,daoProposalVotingAdapter:null===(n=ae[0])||void 0===n?void 0:n[1],getCommonSnapshotProposalData:function(){switch(le){case E.SnapshotType.draft:return b;case E.SnapshotType.proposal:return h;default:return}},refetchProposalOrDraft:function(){ne({type:"increment"})},snapshotDraft:b,snapshotProposal:h,snapshotType:le}:void 0;function je(){return(je=Object(r.a)(s.a.mark((function t(){var n,r,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,F(l.a.PENDING),t.next=4,fetch("".concat(A.w,"/api/").concat(A.x,"/draft/").concat(e),{signal:null===X||void 0===X?void 0:X.signal});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error(D);case 7:return t.next=9,n.json();case 9:if(r=t.sent,$.current){t.next=12;break}return t.abrupt("return");case 12:if(r&&Object.keys(r).length){t.next=15;break}throw g(!0),new Error(R);case 15:return a=Object.keys(r)[0],c=Object(C.a)({idInDAO:a,idInSnapshot:a},r[a]),F(l.a.FULFILLED),j(c),t.abrupt("return",c);case 22:if(t.prev=22,t.t0=t.catch(0),$.current){t.next=26;break}return t.abrupt("return");case 26:o=t.t0,F(l.a.REJECTED),I(o);case 29:case"end":return t.stop()}}),t,null,[[0,22]])})))).apply(this,arguments)}function fe(){return(fe=Object(r.a)(s.a.mark((function n(){var r,a,c,o,i,u,d;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,F(l.a.PENDING),n.next=4,fetch("".concat(A.w,"/api/").concat(A.x,"/proposal/").concat(e,"?searchUniqueDraftId=true&includeVotes=true"),{signal:null===X||void 0===X?void 0:X.signal});case 4:if((a=n.sent).ok){n.next=9;break}if(t!==E.SnapshotType.proposal){n.next=8;break}throw new Error(D);case 8:return n.abrupt("return");case 9:return n.next=11,a.json();case 11:if(c=n.sent,$.current){n.next=14;break}return n.abrupt("return");case 14:if(c&&Object.keys(c).length){n.next=19;break}if(t!==E.SnapshotType.proposal){n.next=18;break}throw g(!0),new Error(R);case 18:return n.abrupt("return");case 19:return o=Object.keys(c)[0],i=(null===(r=c[o])||void 0===r?void 0:r.data.erc712DraftHash)||o,u=Object(C.a)({idInDAO:i,idInSnapshot:o},c[o]),F(l.a.FULFILLED),m(u),n.abrupt("return",u);case 27:if(n.prev=27,n.t0=n.catch(0),$.current){n.next=31;break}return n.abrupt("return");case 31:d=n.t0,F(l.a.REJECTED),I(d);case 34:case"end":return n.stop()}}),n,null,[[0,27]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:if(t=e.sent){e.next=9;break}return e.next=6,ie();case 6:return n=e.sent,j(n),e.abrupt("return");case 9:m(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(null!==X&&void 0!==X&&X.signal)switch(t){case E.SnapshotType.draft:ie();break;case E.SnapshotType.proposal:ue();break;default:de()}}),[null===X||void 0===X?void 0:X.signal,ie,ue,de,te,t]),Object(i.useEffect)((function(){0!==te&&V([e])}),[e,te]),Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==te){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,oe.resetQueries();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[oe,te]),Object(i.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[L,se];L!==e?a.some((function(e){return e===t}))&&0===te?K(t):a.every((function(e){return e===n}))?K(n):L!==n||se!==n||ae.length?a.some((function(e){return e===r}))&&K(r):K(n):K(e)}),[L,ae.length,se,te]),Object(i.useEffect)((function(){J([k,ce].find((function(e){return e})))}),[k,ce]),{proposalData:be,proposalError:z,proposalNotFound:N,proposalStatus:H}}var L=n(40);var F=[];function M(e){return B.apply(this,arguments)}function B(){return(B=Object(r.a)(s.a.mark((function e(t){var n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(A.w,"/api/").concat(A.x),e.next=4,fetch("".concat(n,"/drafts/").concat(t));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot drafts.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).filter((function(e){var t=Object(a.a)(e,2);t[0];return!1===t[1].data.sponsored})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=Object(r.a)(s.a.mark((function e(t){var n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(A.w,"/api/").concat(A.x),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).map((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return[r.data.erc712DraftHash||n,r]})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function U(e){var t=e.adapterName,n=e.includeProposalsExistingOnlyOffchain,c=void 0!==n&&n,u=Object(i.useState)(),d=Object(a.a)(u,2),O=d[0],h=d[1],x=Object(i.useState)(F),g=Object(a.a)(x,2),A=g[0],w=g[1],_=Object(i.useState)(l.a.STANDBY),y=Object(a.a)(_,2),k=y[0],I=y[1],S=Object(i.useState)(),D=Object(a.a)(S,2),R=D[0],P=D[1],B=Object(i.useState)(F),V=Object(a.a)(B,2),U=V[0],H=V[1],K=Object(i.useState)(F),W=Object(a.a)(K,2),q=W[0],z=W[1],J=Object(i.useState)(l.a.STANDBY),Q=Object(a.a)(J,2),X=Q[0],$=Q[1],Z=Object(i.useState)(),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],re=Object(o.c)((function(e){return e.contracts})),ae=m(Object(i.useMemo)((function(){return A.map((function(e){return e[0]}))}),[A])),ce=ae.daoProposals,se=ae.daoProposalsError,oe=ae.daoProposalsStatus,ie=T(U),ue=ie.proposalsVotingAdapters,de=ie.proposalsVotingAdaptersError,le=ie.proposalsVotingAdaptersStatus,be=Y(ue),je=be.proposalsVotingState,fe=be.proposalsVotingStateError,Oe=be.proposalsVotingStateStatus,pe=function(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),n=Object(i.useState)([]),c=Object(a.a)(n,2),u=c[0],d=c[1],j=Object(i.useState)(),O=Object(a.a)(j,2),h=O[0],m=O[1],x=Object(i.useState)(l.a.STANDBY),v=Object(a.a)(x,2),g=v[0],E=v[1],A=Object(i.useState)(),w=Object(a.a)(A,2),_=w[0],y=w[1],C=Object(f.g)().web3Instance,k=Object(p.useQuery)(["votesDataCalls",_],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(_.map(function(){var e=Object(r.a)(s.a.mark((function e(n){var r,c,o,i,u,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(a.a)(n,2),c=r[0],o=r[1],i=o.votingAdapterAddress,u=o.getVotingAdapterABI,d=o.votingAdapterName,e.t0=i,e.next=4,B(d,u());case 4:return e.t1=e.sent,e.t2=[t,c],e.abrupt("return",[e.t0,e.t1,e.t2]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!e.length&&!!_&&!!t&&!!C}),I=k.data,S=k.error,T=Object(p.useQuery)(["votesDataResults",null===I||void 0===I?void 0:I.length],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==I&&void 0!==I&&I.length&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.l)({calls:I,web3Instance:C});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!(null===I||void 0===I||!I.length)&&!!C}),D=T.data,R=T.error,P=Object(i.useCallback)((function(){return F.apply(this,arguments)}),[_,I,S,D,R]);function F(){return(F=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:if(_.length){e.next=6;break}return E(l.a.FULFILLED),d([]),e.abrupt("return");case 6:if(e.prev=6,E(l.a.PENDING),!S){e.next=10;break}throw S;case 10:if(!I){e.next=14;break}if(!R){e.next=13;break}throw R;case 13:D&&(d(_.map((function(e,t){var n=Object(a.a)(e,2),r=n[0],c=n[1].votingAdapterName;return[r,Object(N.a)({},c,M(c,D[t]))]}))),E(l.a.FULFILLED));case 14:e.next=22;break;case 16:e.prev=16,e.t0=e.catch(6),t=e.t0,d([]),E(l.a.REJECTED),m(t);case 22:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}function M(e,t){try{switch(e){case L.c.OffchainVotingContract:return{snapshot:t[0],reporter:t[1],resultRoot:t[2],nbYes:t[3],nbNo:t[4],startingTime:t[5],gracePeriodStartingTime:t[6],isChallenged:t[7],stepRequested:t[8],forceFailed:t[9],fallbackVotesCount:t[10]};case L.c.VotingContract:return t;default:throw new Error('No voting adapter name was found for "'.concat(e,'".'))}}catch(n){throw n}}function B(e,t){return G.apply(this,arguments)}function G(){return(G=Object(r.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===L.c.OffchainVotingContract?4:e.t0===L.c.VotingContract?8:12;break;case 4:if(r=n.find((function(e){return"getVote"===e.name}))){e.next=7;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 7:return e.abrupt("return",r);case 8:if(a=n.find((function(e){return"votes"===e.name}))){e.next=11;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 11:return e.abrupt("return",a);case 12:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(0),e.t1;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){e.length&&_&&t&&C&&P()}),[P,e.length,t,_,C]),Object(i.useEffect)((function(){if(e.length&&C){var t=e.filter((function(e){var t=Object(a.a)(e,1)[0];return C.utils.isHexStrict(t)}));y(t)}}),[e,C]),{proposalsVotes:u,proposalsVotesError:h,proposalsVotesStatus:g}}(ue),he=pe.proposalsVotes,me=pe.proposalsVotesError,xe=pe.proposalsVotesStatus,ve=Object(p.useQuery)(["snapshotDraftEntries",O],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,M(O);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!O}),Ne=ve.data,ge=ve.error,Ee=Object(p.useQuery)(["snapshotProposalEntries",O],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,G(O);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!O}),Ae=Ee.data,we=Ee.error,_e=ge||we,ye=Object(i.useCallback)((function(){return Ce.apply(this,arguments)}),[_e,Ne,Ae]);function Ce(){return(Ce=Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I(l.a.PENDING),P(void 0),!_e){e.next=5;break}throw _e;case 5:if(!Ne||!Ae){e.next=12;break}if((t=[].concat(Object(v.a)(Ne),Object(v.a)(Ae))).length){e.next=10;break}return I(l.a.FULFILLED),e.abrupt("return");case 10:w(t),I(l.a.FULFILLED);case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),n=e.t0,I(l.a.REJECTED),w(F),P(n);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e,n,r=null===(e=Object.entries(re).find((function(e){var n=Object(a.a)(e,2),r=(n[0],n[1]);return(null===r||void 0===r?void 0:r.adapterOrExtensionName)===t})))||void 0===e||null===(n=e[1])||void 0===n?void 0:n.contractAddress;h(r)}),[O,t,re]),Object(i.useEffect)((function(){O&&ye()}),[O,ye]),Object(i.useEffect)((function(){if(ce.length)return H(c?ce.map((function(e){return Object(a.a)(e,1)[0]})):ce.filter((function(e){var t=Object(a.a)(e,2);t[0];return"0"!==t[1].flags})).map((function(e){return Object(a.a)(e,1)[0]})))}),[ce,c]),Object(i.useEffect)((function(){if(X===l.a.FULFILLED){var e=U.map((function(e){var t,n,r,c=ce.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)}))||[],s=Object(a.a)(c,2)[1],o=A.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)}))||[],i=Object(a.a)(o,2),u=i[0],d=i[1],l=(null===d||void 0===d?void 0:d.msg.type)===E.SnapshotType.draft,b=u&&l?Object(C.a)(Object(C.a)({},d),{},{idInDAO:e,idInSnapshot:u}):void 0,f=u&&!l?Object(C.a)(Object(C.a)({},d),{},{idInDAO:e,idInSnapshot:u}):void 0,O=null===(t=ue.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)})))||void 0===t?void 0:t[1],p=null===(n=je.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)})))||void 0===n?void 0:n[1];return{daoProposal:s,daoProposalVote:null===(r=he.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(e)===Object(j.j)(n)})))||void 0===r?void 0:r[1],daoProposalVotingAdapter:O,daoProposalVotingState:p,idInDAO:e,snapshotDraft:b,snapshotProposal:f,snapshotType:l?E.SnapshotType.draft:E.SnapshotType.proposal,getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){}}})).filter((function(e){return e.snapshotDraft||e.snapshotProposal}));z(e)}}),[U,ce,X,he,ue,je,A]),Object(i.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[oe,le,Oe,xe,k];k!==e?a.some((function(e){return e===t}))?$(t):a.every((function(e){return e===n}))?$(n):(k!==n||A.length)&&(le!==n||ue.length)?a.some((function(e){return e===r}))&&$(r):$(n):$(e)}),[U.length,oe,xe,ue,le,Oe,A.length,k]),Object(i.useEffect)((function(){ne([se,me,de,fe,R].find((function(e){return e})))}),[se,me,de,fe,R]),{proposals:q,proposalsError:te,proposalsStatus:X}}function Y(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),c=Object(i.useState)([]),u=Object(a.a)(c,2),d=u[0],j=u[1],O=Object(i.useState)(),h=Object(a.a)(O,2),m=h[0],x=h[1],v=Object(i.useState)(l.a.STANDBY),N=Object(a.a)(v,2),g=N[0],E=N[1],A=Object(i.useState)(),w=Object(a.a)(A,2),_=w[0],y=w[1],C=Object(i.useState)(),k=Object(a.a)(C,2),I=k[0],S=k[1],T=Object(i.useState)(),D=Object(a.a)(T,2),R=D[0],P=D[1],L=Object(f.g)().web3Instance,F=Object(p.useQuery)(["proposalsVotingStateResult",I],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==I&&void 0!==I&&I.length&&L){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.l)({calls:I,web3Instance:L});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!(null===I||void 0===I||!I.length)&&!!L}),M=F.data,B=F.error,G=Object(i.useCallback)((function(){return V.apply(this,arguments)}),[e.length,I,M,B,t,R,_,L]);function V(){return(V=Object(r.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&e.length&&R&&L){n.next=2;break}return n.abrupt("return");case 2:if(R.length){n.next=5;break}return E(l.a.FULFILLED),n.abrupt("return");case 5:if(n.prev=5,!_){n.next=8;break}throw _;case 8:if(I){n.next=10;break}return n.abrupt("return");case 10:if(E(l.a.PENDING),!B){n.next=13;break}throw B;case 13:M&&(E(l.a.FULFILLED),j(R.map((function(e,t){return[Object(a.a)(e,1)[0],M[t]]})))),n.next=22;break;case 16:n.prev=16,n.t0=n.catch(5),r=n.t0,E(l.a.REJECTED),j([]),x(r);case 22:case"end":return n.stop()}}),n,null,[[5,16]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){G()}),[G]),Object(i.useEffect)((function(){if(e.length&&L){var t=e.filter((function(e){var t=Object(a.a)(e,1)[0];return L.utils.isHexStrict(t)}));P(t)}}),[e,L]),Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(s.a.mark((function e(){var r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!==R&&void 0!==R&&R.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(0).then(n.t.bind(null,1058,3));case 4:if(r=e.sent.default,c=r.find((function(e){return"voteResult"===e.name}))){e.next=9;break}return y(new Error('No "voteResult" ABI function was found on the "IVoting" contract.')),e.abrupt("return");case 9:o=R.map((function(e){var n=Object(a.a)(e,2),r=n[0];return[n[1].votingAdapterAddress,c,[t,r]]})),S(o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,R]),{proposalsVotingState:d,proposalsVotingStateError:m,proposalsVotingStateStatus:g}}var H=n(41),K=n(46),W=H.c.Completed,q=H.c.OffchainVotingGracePeriod,z=H.c.OffchainVotingSubmitResult,J=H.c.OffchainVoting,Q=H.c.Process,X=H.c.Sponsor,$=H.c.Submit,Z="production"===A.j?15e3:5e3;function ee(e){var t=e.countdownVotingEndSeconds,n=void 0===t?0:t,c=e.countdownVotingStartSeconds,u=void 0===c?0:c,d=e.pollInterval,l=void 0===d?Z:d,O=e.proposal,p=e.useCountdownToCheckInVoting,h=void 0!==p&&p,m=Object(f.g)().web3Instance,x=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),v=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),N=Object(i.useState)(),E=Object(a.a)(N,2),A=E[0],_=E[1],y=Object(i.useState)(!1),C=Object(a.a)(y,2),S=C[0],T=C[1],D=Object(i.useState)(),R=Object(a.a)(D,2),P=R[0],L=R[1],F=Object(i.useState)(),M=Object(a.a)(F,2),B=M[0],G=M[1],V=Object(i.useState)(),U=Object(a.a)(V,2),Y=U[0],ee=U[1],te=Object(i.useState)(),ne=Object(a.a)(te,2),re=ne[0],ae=ne[1],ce=Object(i.useRef)(),se=Object(i.useRef)(!1),oe=Object(w.h)(u,n),ie=oe.hasTimeStarted,ue=oe.hasTimeEnded,de=oe.timeStartEndInitReady,le=S&&(!h||de),be=O.daoProposalVotingAdapter,je=O.snapshotDraft,fe=O.snapshotProposal,Oe=(null===je||void 0===je?void 0:je.idInDAO)||(null===fe||void 0===fe?void 0:fe.idInDAO),pe=!!P&&Object(I.e)(H.b.EXISTS,P.flags),he=!!P&&Object(I.e)(H.b.SPONSORED,P.flags),me=!!P&&Object(I.e)(H.b.PROCESSED,P.flags),xe=null===be||void 0===be?void 0:be.votingAdapterAddress,ve=null===be||void 0===be?void 0:be.getVotingAdapterABI(),Ne=Object(g.isAddress)((null===B||void 0===B?void 0:B.reporter)||"")&&Object(j.j)((null===B||void 0===B?void 0:B.reporter)||"")!==k.a,ge=h?ie&&!ue:K.b[Y||""]===K.b[K.b.IN_PROGRESS],Ee=K.b[Y||""]===K.b[K.b.GRACE_PERIOD],Ae=Object(i.useCallback)((function(){return we.apply(this,arguments)}),[be,v,x,ve,xe,Oe,m]);function we(){return(we=Object(r.a)(s.a.mark((function e(){var t,n,r,c,o,i,u,d,l,j,f,O,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v&&x&&Oe&&m){e.next=3;break}return e.abrupt("return");case 3:if(t=v.filter((function(e){return"proposals"===e.name}))[0],be){e.next=13;break}return e.next=7,Object(b.l)({calls:[[x,t,[Oe]]],web3Instance:m});case 7:return n=e.sent,r=Object(a.a)(n,1),c=r[0],L(c),T(!0),e.abrupt("return",c);case 13:if(ve&&xe){e.next=15;break}return e.abrupt("return");case 15:return o=ve.filter((function(e){return"voteResult"===e.name}))[0],i=ve.filter((function(e){return"getVote"===e.name}))[0],u=[[x,t,[Oe]],[xe,i,[x,Oe]],[xe,o,[x,Oe]]],e.next=20,Object(b.l)({calls:u,web3Instance:m});case 20:return d=e.sent,l=Object(a.a)(d,3),j=l[0],f=l[1],O=l[2],p={snapshot:f[0],reporter:f[1],resultRoot:f[2],nbYes:f[3],nbNo:f[4],startingTime:f[5],gracePeriodStartingTime:f[6],isChallenged:f[7],stepRequested:f[8],forceFailed:f[9],fallbackVotesCount:f[10]},L(j),G(p),ee(O),T(!0),e.abrupt("return",{proposal:j,voteResult:O,votes:f});case 33:throw e.prev=33,e.t0=e.catch(0),e.t0;case 36:case"end":return e.stop()}}),e,null,[[0,33]])})))).apply(this,arguments)}function _e(){ce.current&&(clearInterval(ce.current),ce.current=void 0)}return Object(i.useEffect)((function(){S||Ae().catch((function(e){ae(e)}))}),[Ae,S]),Object(i.useEffect)((function(){me&&(se.current=!0),_e();var e=setInterval(Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,se.current&&_e(),e.next=4,Ae();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),t=e.t0,_e(),ae(t);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),l);ce.current=e}),[me,l,Ae]),Object(i.useEffect)((function(){return me&&_e(),function(){_e()}}),[me]),Object(i.useEffect)((function(){if(le){var e=void 0===A;pe||he||me||A!==$&&!e?!pe||ge||A!==$&&!e?!he||!ge||Ne||A!==$&&A!==X&&!e?!he||ge||Ne||A!==J&&!e?he&&!ge&&Ne&&Ee&&(A===z||e)?_(q):!he||ge||!Ne||Ee||A!==q&&!e?!me||A!==Q&&!e||_(W):_(Q):_(z):_(J):_(X):_($)}else _(void 0)}),[pe,me,he,le,ge,Ee,Ne,A]),{daoProposal:P,daoProposalVote:B,daoProposalVoteResult:Y,proposalFlowStatusError:re,status:A,stopPollingForStatus:_e}}var te=n(62),ne=n(100);function re(){var e=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(o.c)((function(e){return e.contracts})),n=Object(o.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.memberAddress})),c=Object(ne.a)(),u=c.account,d=c.provider,l=c.web3Instance,j=Object(i.useState)(),f=Object(a.a)(j,2),O=f[0],p=f[1],h=Object(i.useState)(),m=Object(a.a)(h,2),x=m[0],v=m[1],N=Object(i.useState)(_.f.STANDBY),g=Object(a.a)(N,2),w=g[0],y=g[1];function I(){return(I=Object(r.a)(s.a.mark((function r(a){var c,o,i,j,f,O,h,m,x,N,g,w,I,S,T,D,R,P,L,F,M,B,G;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=a.partialVoteData,o=a.adapterName,i=a.proposalIdInDAO,j=a.proposalIdInSnapshot,r.prev=1,l){r.next=4;break}throw new Error("No Web3 instance was found.");case 4:if(u){r.next=6;break}throw new Error("No account was found.");case 6:if(n){r.next=8;break}throw new Error("No member address was found.");case 8:if(e){r.next=10;break}throw new Error('No "DaoRegistry" address was found.');case 10:if(A.w){r.next=12;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 12:if(A.x){r.next=14;break}throw new Error('No Snapshot "SPACE" was found.');case 14:return y(_.f.AWAITING_CONFIRM),f=o?Object(b.d)(o,t):k.a,O=c.choice,h=c.metadata,m=void 0===h?{}:h,r.next=19,Object(E.getSpace)(A.w,A.x);case 19:return x=r.sent,N=x.data,g={chainId:A.h,choice:O,metadata:Object(C.a)(Object(C.a)({},m),{},{memberAddress:n})},w={proposalId:i,space:A.x,token:N.token},r.next=25,Object(E.buildVoteMessage)(g,w,A.w);case 25:return I=r.sent,S=Object(E.prepareVoteMessage)({timestamp:I.timestamp,payload:{proposalId:I.payload.proposalId,choice:E.VoteChoicesIndex[O]}}),T=Object(E.getDomainDefinition)(Object(C.a)(Object(C.a)({},S),{},{type:E.SnapshotType.vote}),e,f,A.h),D=T.domain,R=T.types,P=JSON.stringify({types:R,domain:D,primaryType:te.a,message:S}),r.next=31,Object(E.signMessage)(d,u,P);case 31:return L=r.sent,y(_.f.PENDING),r.next=35,Object(E.submitMessage)(A.w,u,Object(C.a)(Object(C.a)({},I),{},{payload:Object(C.a)(Object(C.a)({},I.payload),{},{proposalId:j})}),L,{actionId:D.actionId,chainId:D.chainId,verifyingContract:D.verifyingContract,message:S});case 35:return F=r.sent,M=F.data,B={data:I,signature:L,uniqueId:M.uniqueId},y(_.f.FULFILLED),p(B),r.abrupt("return",B);case 43:throw r.prev=43,r.t0=r.catch(1),G=r.t0,y(_.f.REJECTED),v(G),r.t0;case 49:case"end":return r.stop()}}),r,null,[[1,43]])})))).apply(this,arguments)}return{signAndSendVote:function(e){return I.apply(this,arguments)},voteData:O,voteDataError:x,voteDataStatus:w}}function ae(){var e=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),n=Object(o.c)((function(e){return e.contracts})),c=Object(ne.a)(),u=c.account,d=c.provider,l=c.web3Instance,j=Object(i.useState)(),f=Object(a.a)(j,2),O=f[0],p=f[1],h=Object(i.useState)(),m=Object(a.a)(h,2),x=m[0],v=m[1],N=Object(i.useState)(_.f.STANDBY),g=Object(a.a)(N,2),w=g[0],y=g[1];function I(e){return S.apply(this,arguments)}function S(){return(S=Object(r.a)(s.a.mark((function e(n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.w){e.next=2;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 2:if(l){e.next=4;break}throw new Error("No Web3 instance was found.");case 4:return e.next=6,l.eth.getBlockNumber();case 6:return r=e.sent,e.t0=parseInt,e.next=10,Object(b.g)(t,_.b.offchainVotingVotingPeriod);case 10:return e.t1=e.sent,a=(0,e.t0)(e.t1),e.next=14,Object(E.buildProposalMessage)(Object(C.a)(Object(C.a)({},n),{},{votingTimeSeconds:a,snapshot:r}),A.w);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(r.a)(s.a.mark((function t(r){var a,c,o,i,j,f,O,h,m,x,N,g,w,S,T,D,R,P,L,F,M,B,G;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.partialProposalData,c=r.adapterAddress,o=r.adapterName,i=r.type,t.prev=1,u){t.next=4;break}throw new Error("No account was found to send.");case 4:if(l){t.next=6;break}throw new Error("No Web3 instance was found.");case 6:if(e){t.next=8;break}throw new Error('No "DaoRegistry" address was found.');case 8:if(A.w){t.next=10;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 10:if(A.x){t.next=12;break}throw new Error('No Snapshot "SPACE" was found.');case 12:if(i===E.SnapshotType.draft||i===E.SnapshotType.proposal){t.next=14;break}throw new Error('Handling for type "vote" is not implemented.');case 14:return y(_.f.AWAITING_CONFIRM),j=c||(o?Object(b.d)(o,n):k.a),f=a.body,O=a.name,h=a.metadata,m=a.timestamp,t.next=19,Object(E.getSpace)(A.w,A.x);case 19:if(x=t.sent,N=x.data,g={name:O,body:f,metadata:h,token:N.token,space:A.x},i!==E.SnapshotType.draft){t.next=28;break}return t.next=25,Object(E.buildDraftMessage)(g,A.w);case 25:t.t0=t.sent,t.next=31;break;case 28:return t.next=30,I(Object(C.a)(Object(C.a)({},g),{},{timestamp:m}));case 30:t.t0=t.sent;case 31:return w=t.t0,S=i===E.SnapshotType.draft?Object(E.prepareDraftMessage)(w):Object(E.prepareProposalMessage)(w),T=Object(E.getDomainDefinition)(Object(C.a)(Object(C.a)({},S),{},{type:i}),e,j,A.h),D=T.domain,R=T.types,P=JSON.stringify({types:R,domain:D,primaryType:te.a,message:S}),t.next=37,Object(E.signMessage)(d,u,P);case 37:return L=t.sent,y(_.f.PENDING),t.next=41,Object(E.submitMessage)(A.w,u,w,L,{actionId:D.actionId,chainId:D.chainId,verifyingContract:D.verifyingContract,message:S});case 41:return F=t.sent,M=F.data,B={data:w,signature:L,submitter:u,uniqueId:M.uniqueId,uniqueIdDraft:M.uniqueIdDraft||""},y(_.f.FULFILLED),p(B),t.abrupt("return",B);case 49:throw t.prev=49,t.t1=t.catch(1),G=t.t1,y(_.f.REJECTED),v(G),t.t1;case 55:case"end":return t.stop()}}),t,null,[[1,49]])})))).apply(this,arguments)}return{proposalData:O,proposalSignAndSendError:x,proposalSignAndSendStatus:w,signAndSendProposal:function(e){return T.apply(this,arguments)}}}},46:function(e,t,n){"use strict";var r,a;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.TIE=1]="TIE",e[e.PASS=2]="PASS",e[e.NOT_PASS=3]="NOT_PASS",e[e.IN_PROGRESS=4]="IN_PROGRESS",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(r||(r={})),function(e){e[e.OK=0]="OK",e[e.WRONG_PROPOSAL_ID=1]="WRONG_PROPOSAL_ID",e[e.INVALID_CHOICE=2]="INVALID_CHOICE",e[e.AFTER_VOTING_PERIOD=3]="AFTER_VOTING_PERIOD",e[e.BAD_SIGNATURE=4]="BAD_SIGNATURE",e[e.INDEX_OUT_OF_BOUND=5]="INDEX_OUT_OF_BOUND",e[e.VOTE_NOT_ALLOWED=6]="VOTE_NOT_ALLOWED"}(a||(a={}))},461:function(e,t,n){"use strict";n.r(t),n.d(t,"isEIP1559Compatible",(function(){return s}));var r=n(5),a=n(2),c=n.n(a);function s(e){return o.apply(this,arguments)}function o(){return(o=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.eth.getBlock("latest");case 2:return n=e.sent,e.abrupt("return",void 0!==(null===n||void 0===n?void 0:n.baseFeePerGas));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},476:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a=n(165),c=n.n(a),s=n(27),o=n(0);function i(e){var t=e.children,n=e.isOpen,a=e.isOpenHandler,i=e.keyProp,u=e.modalClassNames,d=e.styleProps;return Object(o.jsx)(c.a,{ariaHideApp:!1,className:"modal-container ".concat(u),isOpen:n,onRequestClose:function(){a(n)},overlayClassName:"modal-overlay",role:"dialog",style:Object(r.a)({overlay:{zIndex:"99"}},d),children:Object(o.jsx)(s.a,{children:Object(o.jsx)("div",{className:"modal",children:t})})},i)}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="0x0000000000000000000000000000000000000000"},480:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(0),c=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,1081))})),s=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,1082))})),o={injected:Object(a.jsx)(c,{}),walletconnect:Object(a.jsx)(s,{})};function i(e){var t=e.providerName;return t&&o[t]?Object(a.jsx)(r.Suspense,{fallback:null,children:Object(a.jsx)("span",{className:"walletconnect__wallet-icon",children:o[t]})}):null}},493:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"contract ENS","name":"_ens","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address[]","name":"addresses","type":"address[]"}],"name":"getNames","outputs":[{"internalType":"string[]","name":"r","type":"string[]"}],"stateMutability":"view","type":"function"}]')},50:function(e,t,n){"use strict";var r=n(226);n.d(t,"a",(function(){return r.a}))},505:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=e.url,n=e.isPending,a=void 0!==n&&n;return Object(r.jsx)("small",{children:Object(r.jsx)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:a?"view progress":"view transaction"})})}},53:function(e,t,n){"use strict";var r=n(4),a=n(70),c=n(6),s=n(1),o=n(0),i=["showAfterMs","text","textProps"];function u(e){return Object(o.jsx)("div",Object(c.a)({className:"loader"},e))}t.a=function(e){var t=e.showAfterMs,n=e.text,d=e.textProps,l=Object(a.a)(e,i),b=Object(s.useState)(!1),j=Object(r.a)(b,2),f=j[0],O=j[1];return Object(s.useEffect)((function(){var e=t&&setTimeout((function(){return O(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),(!t||t&&f)&&e.text?Object(o.jsxs)("div",{className:"loader-container",children:[Object(o.jsx)(u,Object(c.a)({},l)),Object(o.jsx)("span",Object(c.a)(Object(c.a)({className:"loader__text"},d),{},{children:n}))]}):(!t||t&&f)&&!e.text?Object(o.jsx)(u,Object(c.a)({},l)):null}},534:function(e,t){},57:function(e,t,n){"use strict";function r(e){var t=e.gracePeriodLength,n=e.gracePeriodStartingTime,r=e.votePeriodLength,a=e.voteStartingTime,c=1e3,s=function(e){return Number(e||0)},o=s(n)*c,i=s(a)*c;return{voteEndMs:i+s(r)*c,voteStartMs:i,gracePeriodEndMs:o+s(t)*c,gracePeriodStartMs:o}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return N}));var a=n(5),c=n(2),s=n.n(c),o=n(12);function i(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.w,"/api/").concat(o.x,"/offchain_proof/").concat(t));case 3:if(404!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:if(n.ok){e.next=8;break}throw new Error("Something went wrong while getting the off-chain vote proof.");case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var d=n(4),l=n(23),b=n(11),j=n(9);function f(e,t){var n=(e||[]).find((function(e){return Object.entries(e).find((function(e){var n=Object(d.a)(e,2),r=n[0];n[1];return Object(b.j)(r)===Object(b.j)(t||"")}))}));if(n)return Object.entries(n)[0][1].msg.payload.choice===l.VoteChoicesIndex.Yes?j.e.Yes:j.e.No}var O=n(40);function p(e){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(s.a.mark((function e(t){var r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===O.c.OffchainVotingContract?4:e.t0===O.c.VotingContract?9:14;break;case 4:return e.next=6,n.e(1).then(n.t.bind(null,1064,3));case 6:return r=e.sent,a=r.default,e.abrupt("return",a);case 9:return e.next=11,n.e(2).then(n.t.bind(null,1063,3));case 11:return c=e.sent,o=c.default,e.abrupt("return",o);case 14:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 15:e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(0),e.t1;case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function m(e,t){return e===Math.log2(Number(t)+1)-1}var x=n(46);function v(e,t){return x.b[t]===x.b[e]}function N(e){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.w,"/api/").concat(o.x,"/offchain_proofs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Something went wrong while submitting the off-chain vote proof.");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},576:function(e,t){},578:function(e,t){},601:function(e,t){},603:function(e,t){},615:function(e,t){},616:function(e,t){},62:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(9),a=[r.e.Yes,r.e.No],c="Message",s=["Submitting\u2026","Working\u2026","DAOing\u2026","Getting closer\u2026","Dreaming of ETH\u2026"]},638:function(e,t){},645:function(e,t){},647:function(e,t){},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(11);function s(e){var t=e.intervalMs,n=e.messages,s=e.useFirstItemStart?n[0]:Object(c.a)(n),o=Object(a.useState)(s),i=Object(r.a)(o,2),u=i[0],d=i[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return d((function(e){return Object(c.a)(n,e)}))}),t);return function(){clearInterval(e)}}),[t,n]),e.render(u)}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(67),a=n.n(r),c=function(e){return a.a.utils.isAddress(e)}},747:function(e,t){},752:function(e,t){},769:function(e,t){},775:function(e,t){},776:function(e,t){},778:function(e,t){},783:function(e,t){},787:function(e,t){},792:function(e,t){},797:function(e,t){},801:function(e,t){},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(0);function s(e){var t=e.showAfterMs,n=Object(a.useState)(!1),s=Object(r.a)(n,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){var e=t&&setTimeout((function(){return i(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&o?Object(c.jsx)("div",{className:"loader--large","aria-label":"Loading content..."}):null}},843:function(e,t){},873:function(e,t){},874:function(e,t){},891:function(e,t){},9:function(e,t,n){"use strict";var r,a,c,s,o,i;n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),function(e){e[e.EXISTS=0]="EXISTS"}(r||(r={})),function(e){e.bank="bank",e.configuration="configuration",e.coupon_onboarding="coupon-onboarding",e.dao_registry="daoRegistry",e.distribute="distribute",e.financing="financing",e.guildkick="guildkick",e.kyc_onboarding="kyc-onboarding",e.managing="managing",e.nft="nft",e.onboarding="onboarding",e.ragequit="ragequit",e.tribute="tribute",e.tribute_nft="tribute-nft",e.voting="voting"}(a||(a={})),function(e){e.bank="bank",e.erc20="erc20-ext",e.nft="nft"}(c||(c={})),function(e){e.kycOnboardingChunkSize="kyc-onboarding.chunkSize",e.kycOnboardingFundTargetAddress="kyc-onboarding.fundTargetAddress",e.kycOnboardingMaximumChunks="kyc-onboarding.maximumChunks",e.kycOnboardingMaxMembers="kyc-onboarding.maxMembers",e.kycOnboardingSignerAddress="kyc-onboarding.signerAddress",e.kycOnboardingTargetAddress="kyc-onboarding.tokenAddr",e.kycOnboardingUnitsPerChunk="kyc-onboarding.unitsPerChunk",e.offchainVotingGracePeriod="offchainvoting.gracePeriod",e.offchainVotingStakingAmount="offchainvoting.stakingAmount",e.offchainVotingVotingPeriod="offchainvoting.votingPeriod",e.onboardingChunkSize="onboarding.chunkSize",e.onboardingMaximumChunks="onboarding.maximumChunks",e.onboardingUnitsPerChunk="onboarding.unitsPerChunk",e.onboardingTokenAddr="onboarding.tokenAddr",e.votingGracePeriod="voting.gracePeriod",e.votingStakingAmount="voting.stakingAmount",e.votingVotingPeriod="voting.votingPeriod"}(s||(s={})),function(e){e.Yes="Yes",e.No="No"}(o||(o={})),function(e){e.STANDBY="STANDBY",e.AWAITING_CONFIRM="AWAITING_CONFIRM",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(i||(i={}))},900:function(e,t){},94:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.OK="OK",e.ERR="ERR"}(r||(r={}))},971:function(e,t){},974:function(e,t){},997:function(e,t){}},[[1023,4,5]]]);
//# sourceMappingURL=main.73ce9934.chunk.js.map